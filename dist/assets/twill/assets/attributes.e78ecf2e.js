import{T as w,ae as m,m as p,b as g,L as b,n as h,F as x,ag as l,f as d}from"./form.3ed58db1.js";import{V as _}from"./toggleVisibility.ff8a4ceb.js";var v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.languages.length>1?a("div",{staticClass:"languageManager"},[a("div",{staticClass:"languageManager__switcher"},[a("a17-langswitcher",{attrs:{"in-modal":!0,"all-published":!t.controlPublication}})],1),t.controlPublication?a("a17-dropdown",{ref:"languageManagerDropdown",staticClass:"languageManager__dropdown",attrs:{position:"bottom-right",clickable:!0}},[a("button",{staticClass:"languageManager__button",attrs:{type:"button"},on:{click:function(i){return t.$refs.languageManagerDropdown.toggle()}}},[t._v(" "+t._s(t.currentValue.length)+" "+t._s(t.$trans("lang-manager.published"))+" "),a("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"dropdown_module"}})]),a("div",{staticClass:"languageManager__dropdown-content",attrs:{slot:"dropdown__content"},slot:"dropdown__content"},[a("a17-checkboxgroup",{attrs:{name:"langManager",options:t.languages,selected:t.currentValue,min:1},on:{change:t.changeValue}})],1)]):t._e()],1):t._e()},y=[];const I={name:"A17LangManager",mixins:[_,w],components:{"a17-langswitcher":m},props:{controlPublication:{type:Boolean,default:!0},value:{default:function(){return[]}}},computed:{currentValue:{get(){const t=[];return this.publishedLanguages.length&&this.publishedLanguages.forEach(function(e){t.push(e.value)}),t}},...p({languages:t=>t.language.all}),...g(["publishedLanguages"])},methods:{changeValue:function(t){this.$store.commit(b.PUBLISH_LANG,t)}}},c={};var M=h(I,v,y,!1,k,"6db08c60",null,null);function k(t){for(let e in c)this[e]=c[e]}var N=function(){return M.exports}(),B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modalValidation"},[a("a17-inputframe",[t.mode==="create"?[a("a17-button",{attrs:{type:"submit",name:"create",variant:"validate",disabled:t.isDisabled}},[t._v(t._s(t.$trans("modal.create.button","Create")))]),t.isDisabled?t._e():a("a17-button",{attrs:{type:"submit",name:"create-another",variant:"aslink-grey"},nativeOn:{click:function(i){return i.currentTarget.focus()}}},[a("span",[t._v(t._s(t.$trans("modal.create.create-another","Create and add another")))])])]:t.mode==="update"?a("a17-button",{attrs:{type:"submit",name:"update",variant:"validate",disabled:t.isDisabled}},[t._v(t._s(t.$trans("modal.update.button","Update")))]):a("a17-button",{attrs:{type:"submit",name:"done",variant:"validate",disabled:t.isDisabled}},[t._v(t._s(t.$trans("modal.done.button","Done")))])],2),t.activePublishState?a("label",{staticClass:"switcher__button",class:t.switcherClasses,attrs:{for:t.publishedName}},[t.isChecked?a("span",{staticClass:"switcher__label"},[t._v(t._s(t.textEnabled))]):t._e(),t.isChecked?t._e():a("span",{staticClass:"switcher__label"},[t._v(t._s(t.textDisabled))]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.published,expression:"published"}],attrs:{type:"checkbox",disabled:t.disabled,name:t.publishedName,id:t.publishedName},domProps:{value:1,checked:Array.isArray(t.published)?t._i(t.published,1)>-1:t.published},on:{change:function(i){var n=t.published,o=i.target,f=!!o.checked;if(Array.isArray(n)){var r=1,s=t._i(n,r);o.checked?s<0&&(t.published=n.concat([r])):s>-1&&(t.published=n.slice(0,s).concat(n.slice(s+1)))}else t.published=f}}}),a("span",{staticClass:"switcher__switcher"})]):t._e()],1)},D=[];const S={name:"A17ModalValidationButtons",props:{publishedName:{type:String,required:!1},disabled:{type:Boolean,default:!1},activePublishState:{type:Boolean,default:!1},isPublish:{type:Boolean,default:!1},isDisable:{type:Boolean,default:!1},mode:{type:String,default:"create"},textEnabled:{type:String,default:"Live"},textDisabled:{type:String,default:"Draft"}},data:function(){return{fields:!1,isDisabled:this.isDisable,published:this.isPublish}},watch:{published:function(t){this.$store.commit(x.UPDATE_FORM_FIELD,{name:"published",value:t})}},computed:{switcherClasses:function(){return[this.isChecked?"switcher--active":""]},isChecked:function(){return this.published},checkedValue:{get:function(){return this.published},set:function(t){this.published=t}}},methods:{disable:function(){if(!this.fields){this.isDisabled=!0,this.$emit("disable",!0);return}const t=this.fields.filter(a=>a.getAttribute("required"));if(t.length===0){this.isDisabled=!1,this.$emit("disable",!1);return}if(t.filter(function(a){return a.value.length>0}).length===t.length){this.isDisabled=!1,this.$emit("disable",!1);return}this.isDisabled=!0,this.$emit("disable",!0)}},mounted:function(){const t=this;this.fields=[...this.$parent.$el.querySelectorAll("input, textarea, select")],t.disable(),this.fields.length&&this.fields.forEach(function(e){e.addEventListener("input",t.disable)})},beforeDestroy:function(){const t=this;!this.fields.length||this.fields.forEach(function(e){e.removeEventListener("input",t.disable)})}},u={};var $=h(S,B,D,!1,C,"48bf7503",null,null);function C(t){for(let e in u)this[e]=u[e]}var O=function(){return $.exports}(),T={data:function(){return{shouldRetrySubmitWhenAllowed:!1}},computed:{...p({isSubmitPrevented:t=>t.form.isSubmitPrevented})},watch:{isSubmitPrevented:function(t){!t&&this.shouldRetrySubmitWhenAllowed&&(this.shouldRetrySubmitWhenAllowed=!1,this.retrySubmit())}},methods:{retrySubmit:function(){this.submitForm?this.submitForm():this.submit&&this.submit()}}};const A={options:{}},E={optionsByName(t){return e=>t.options[e]||[]}},P={[l.EMPTY_OPTIONS](t,e){t.options[e]&&d.delete(t.options,e)},[l.UPDATE_OPTIONS](t,e){const a=e.name,i=e.options;let n=[];t.options[a]&&(n=t.options[a],d.delete(t.options,a)),Array.isArray(i)&&i.forEach(function(o){n.findIndex(r=>r.value===o.value)===-1&&n.push(o)}),d.set(t.options,a,n)}},L={};var F={state:A,getters:E,mutations:P,actions:L};export{O as a,N as b,F as c,T as r};
