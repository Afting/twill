import{U as Il,R as kl,r as El,t as Al,u as Sl,v as Cl,S as Xa,w as Bl,x as $l,y as Pl,z as Rl,B as Ml,C as Tl,E as Ol,G as Ll,H as Dl,I as Nl,J as Z_,K as X_,M as Ls,f as F,O as Ja,P as J_,n as V,Q as Fl,T as Ul,q as Q_,m as _t,b as jt,l as Me,p as Ds,W as ht,L as j_,X as Vl,Y as Wl,N as En,Z as tw,F as nt,c as mt,d as bi,D as yi,a as ew,_ as nw,$ as iw,a0 as aw,a1 as rw,a2 as ow,a3 as Ya,a4 as sw,a5 as lw,a6 as Qa,a7 as Ht,a8 as zl,a9 as fw,e as Kl,g as Hl,aa as dw,ab as cw,ac as uw,ad as kn,h as pw,i as hw,s as Gt,j as mw,ae as _w,o as ww,k as vw}from"./form.3ed58db1.js";import{a as ja,b as gw,r as Gl,c as xw}from"./attributes.e78ecf2e.js";import{a as bw}from"./Fieldset.e2160e02.js";import{V as Te}from"./toggleVisibility.ff8a4ceb.js";import{F as yw}from"./index.a3183894.js";import{b as Iw,a as kw}from"./browser.ee6ca469.js";import{l as Ew}from"./language.2baf5859.js";const Aw="addBlock",Sw="moveBlock",Cw="deleteBlock",Bw="duplicateBlock",$w="reorderBlocks",Pw="activateBlock",Rw="addBlockPreview",Mw="updateBlockPreviewLoading";var J={ADD_BLOCK:Aw,MOVE_BLOCK:Sw,DELETE_BLOCK:Cw,DUPLICATE_BLOCK:Bw,REORDER_BLOCKS:$w,ACTIVATE_BLOCK:Pw,ADD_BLOCK_PREVIEW:Rw,UPDATE_PREVIEW_LOADING:Mw};const Tw=[Il,kl,El,Al,Sl,Cl,Xa,Bl,$l,Pl,Rl,Ml,Tl,Ol,Ll,Dl,Nl],Ow=[Xa];var Ns={REFRESH_BLOCK_PREVIEW:Tw,REFRESH_BLOCK_PREVIEW_ALL:Ow};const Lw="updateParent";var ql={UPDATE_PARENT:Lw};const Dw=[Z_,Il,kl,El,Al,Sl,Cl,X_,Xa,Bl,$l,Pl,Rl,Ml,Tl,Ol,Ll,Dl,Nl];var Nw={props:{name:{type:String,required:!0},isOpen:{type:Boolean,default:!1}},data:function(){return{opened:this.isOpen}},methods:{open:function(){this.opened=!0},fieldName:function(e){return this.name+"["+e+"]"},repeaterName:function(e){return this.name.replace("[","-").replace("]","")+"|"+e},nestedEditorName:function(e){return this.name.replace("[","-").replace("]","")+"|"+e}}},Yl={props:{block:{type:Object,default:()=>{}},blockIndex:{type:Number,default:0},blocksLength:{type:Number,default:0}},methods:{selectBlock(){this.$emit("block:select")},unselectBlock(){this.$emit("block:unselect")},deleteBlock(){this.$emit("block:delete")},moveBlock(e){this.$emit("block:move",e)},toggleBlockDropdown(){this.blocksLength>1&&this.$refs.blockDropdown&&this.$refs.blockDropdown.toggle()}}},Zl={props:{editorName:{type:String,required:!0},blocks:{type:Array,default:()=>[]},savedBlocksLength:{type:Number,default:0}},methods:{addAndEditBlock(e,o,{block:a,index:c}){window[{}.VUE_APP_NAME].PREVSTATE=Ls(this.$store.state),e(a,c),o(c)},saveBlock(e,o){window[{}.VUE_APP_NAME].hasOwnProperty("PREVSTATE")&&delete window[{}.VUE_APP_NAME].PREVSTATE,this.unselectBlock(e,o),this.$emit("block:save",o)},cancelBlock(e,o){window[{}.VUE_APP_NAME].hasOwnProperty("PREVSTATE")&&(console.warn("Store - Restore previous Store state"),this.$store.replaceState(window[{}.VUE_APP_NAME].PREVSTATE)),this.unselectBlock(e,o),this.$emit("block:cancel",o)},selectBlock(e,o){window[{}.VUE_APP_NAME].PREVSTATE=Ls(this.$store.state),e(),this.$emit("block:select",o)},unselectBlock(e,o){e(),window[{}.VUE_APP_NAME].hasOwnProperty("PREVSTATE")&&delete window[{}.VUE_APP_NAME].PREVSTATE,this.$emit("block:unselect",o)},moveBlock(e){this.$emit("block:move",e)},deleteBlock(e){this.$root.$refs.warningContentEditor?this.$root.$refs.warningContentEditor.open(()=>{e(),this.$emit("block:delete")}):(e(),this.$emit("block:delete"))}}},Xl={methods:{openEditor(e=-1,o=!1){this.$root.$refs.editor&&this.$root.$refs.editor.open(e,o)}}},Fw=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("div",{staticClass:"stickyNav"},[a("div",{staticClass:"container"},[a("div",{staticClass:"stickyNav__nav"},[e.navItems.length>1?a("div",{staticClass:"stickyNav__links"},e._l(e.navItems,function(c,m){return a("a",{key:c.fieldset,class:{"s--on":c.active},attrs:{href:"#"},on:{click:function(b){return b.preventDefault(),e.scrollToFieldset(m)}}},[e._v(e._s(c.label))])}),0):e._e(),e._t("title")],2),a("div",{staticClass:"stickyNav__actions"},[e._t("actions")],2)])])},Uw=[];const Vw={name:"A17StickyNav",props:{items:{type:Array,default:function(){return[]}}},data:function(){return{lastScrollPos:0,topOffset:70,ticking:!1,navItems:this.items,clickedFieldset:-1,fieldset:[]}},methods:{getFieldsetPosition:function(){const e=this;this.lastScrollPos=window.pageYOffset,this.navItems.forEach(function(o,a){const c=e.fieldset[a],m=c?c.getBoundingClientRect().top+e.lastScrollPos:0;F.set(o,"position",m)})},setActiveItems:function(){const e=this;let o=0;this.navItems.forEach(function(a,c){const m=a.position-e.topOffset<e.lastScrollPos;F.set(a,"active",!1),m&&c>0&&(o=c)}),this.clickedFieldset>=0?F.set(e.navItems[e.clickedFieldset],"active",!0):F.set(e.navItems[o],"active",!0)},refresh:function(){const e=this;e.clickedFieldset=-1,this.getFieldsetPosition(),this.setActiveItems(),e.ticking=!1},_resize:Ja(function(){this.lastScrollPos=window.pageYOffset,this.refresh()},200),_scroll:function(){const e=this;this.lastScrollPos=window.pageYOffset,e.ticking||window.requestAnimationFrame(function(){e.refresh(),e.ticking=!1}),e.ticking=!0},scrollToFieldset:function(e){const o=this,a=this.navItems[e].position-this.topOffset+1;this.dispose(),this.clickedFieldset=e,this.getFieldsetPosition(),this.setActiveItems(),J_({offset:a,easing:"easeOut",onComplete:function(){o.init()}})},init:function(){window.addEventListener("scroll",this._scroll),window.addEventListener("resize",this._resize)},dispose:function(){window.removeEventListener("scroll",this._scroll),window.removeEventListener("resize",this._resize)}},mounted:function(){const e=this;this.navItems.forEach(function(o,a){const c=document.querySelector("#"+o.fieldset);c?e.fieldset.push(c):e.fieldset.push(null)}),this.refresh(),this.init()},beforeDestroy:function(){this.dispose()}},Fs={};var Ww=V(Vw,Fw,Uw,!1,zw,"3fa1f7db",null,null);function zw(e){for(let o in Fs)this[o]=Fs[o]}var Kw=function(){return Ww.exports}(),Hw=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("div",{staticClass:"titleEditor",class:e.titleEditorClasses},[a("div",{staticClass:"titleEditor__preview"},[a("h2",{staticClass:"titleEditor__title",class:{"titleEditor__title-only":!e.permalink}},[e.editableTitle?a("a",{staticClass:"titleEditor__title-wrapper",attrs:{href:"#"},on:{click:function(c){return c.preventDefault(),e.$refs.editModal.open()}}},[e.thumbnail?a("a17-avatar",{attrs:{name:e.title,thumbnail:e.thumbnail}}):e._e(),a("span",{staticClass:"titleEditor__title"},[a("span",{staticClass:"f--underlined--o"},[e._v(e._s(e.title))]),e._v(" "),a("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"edit"}})])],1):a("span",{staticClass:"titleEditor__title-wrapper"},[e.thumbnail?a("a17-avatar",{attrs:{name:e.title,thumbnail:e.thumbnail}}):e._e(),a("span",{staticClass:"titleEditor__title"},[e._v(" "+e._s(e.customTitle?e.customTitle:e.title)+" ")])],1)]),(e.permalink||e.customPermalink)&&!e.showModal?a("a",{staticClass:"titleEditor__permalink f--small",attrs:{href:e.fullUrl,target:"_blank"}},[a("span",{staticClass:"f--note f--external f--underlined--o"},[e._v(e._s(e._f("prettierUrl")(e.visibleUrl)))])]):e._e(),e.showModal?a("span",{staticClass:"titleEditor__permalink f--small f--note f--external f--underlined--o"},[e._v(e._s(e._f("prettierUrl")(e.visibleUrl)))]):e._e(),a("a17-modal",{ref:"editModal",staticClass:"modal--form",attrs:{title:e.modalTitle,forceLock:e.disabled}},[a("a17-langmanager",{attrs:{"control-publication":e.controlLanguagesPublication}}),a("form",{ref:"modalForm",attrs:{action:"#"},on:{submit:function(c){return c.preventDefault(),e.update(c)}}},[e._t("modal-form"),a("a17-modal-validation",{attrs:{mode:e.mode},on:{disable:e.lockModal}})],2)],1)],1),e._t("default")],2)},Gw=[];const qw={name:"A17TitleEditor",mixins:[Fl,Ul],components:{"a17-avatar":Q_,"a17-modal-validation":ja,"a17-langmanager":gw},props:{modalTitle:{type:String,default:function(){return this.$trans("modal.update.title")}},warningMessage:{type:String,default:"Missing title"},thumbnail:{type:String,default:""},showModal:{type:Boolean,default:!1},name:{default:"title"},editableTitle:{type:Boolean,default:!0},controlLanguagesPublication:{type:Boolean,default:!0},customTitle:{type:String,default:""},customPermalink:{type:String,default:""},localizedPermalinkbase:{type:String,default:""},localizedCustomPermalink:{type:String,default:""}},data:function(){return{disabled:!1}},mounted:function(){this.showModal&&this.$refs.editModal.open()},computed:{titleEditorClasses:function(){return{"titleEditor--error":this.error||this.title===this.warningMessage}},mode:function(){return this.showModal?"done":this.title.length>0?"update":"create"},fullUrl:function(){return this.customlink||this.baseUrl.replace("{language}",this.currentLocale.value).replace("{preview}/",this.published?"":"admin-preview/")+this.permalink},visibleUrl:function(){return this.customlink||this.baseUrl.replace("{language}",this.currentLocale.value).replace("{preview}/","")+this.permalink},title:function(){const e=this.fieldValueByName(this.name)?this.fieldValueByName(this.name):"";return(typeof e=="string"?e:e[this.currentLocale.value])||this.warningMessage},customlink:function(){const e=this.localizedCustomPermalink.length>0?JSON.parse(this.localizedCustomPermalink):{};return Object.keys(e).length>0?e[this.currentLocale.value]:this.customPermalink?this.customPermalink:!1},permalink:function(){const e=this.localizedPermalinkbase.length>0?JSON.parse(this.localizedPermalinkbase):{};return Object.keys(e).length>0?this.currentLocale.value in e?e[this.currentLocale.value].concat("/",this.fieldValueByName("slug")[this.currentLocale.value]):this.fieldValueByName("slug")[this.currentLocale.value]:this.fieldValueByName("slug")[this.currentLocale.value]},..._t({baseUrl:e=>e.form.baseUrl,currentLocale:e=>e.language.active,languages:e=>e.language.all,fields:e=>e.form.fields,published:e=>e.publication.published}),...jt(["fieldValueByName"])},filters:Me,methods:{update:function(){this.$refs.editModal.hide()},lockModal:function(e){this.disabled=e}}},Us={};var Yw=V(qw,Hw,Gw,!1,Zw,"5776b723",null,null);function Zw(e){for(let o in Us)this[o]=Us[o]}var Xw=function(){return Yw.exports}(),Jw=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("div",{staticClass:"switcher",class:e.switcherClasses},[a("h4",{staticClass:"switcher__title"},[e._v(e._s(e.title))]),a("label",{staticClass:"switcher__button",attrs:{for:e.name+"_live"}},[e.isChecked?a("span",{staticClass:"switcher__label"},[e._v(e._s(e.formatTextEnabled))]):e._e(),e.isChecked?e._e():a("span",{staticClass:"switcher__label"},[e._v(e._s(e.formatTextDisabled))]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedValue,expression:"checkedValue"}],attrs:{type:"checkbox",disabled:e.disabled,name:e.name,id:e.name+"_live",value:"live"},domProps:{checked:Array.isArray(e.checkedValue)?e._i(e.checkedValue,"live")>-1:e.checkedValue},on:{change:function(c){var m=e.checkedValue,b=c.target,E=!!b.checked;if(Array.isArray(m)){var B="live",R=e._i(m,B);b.checked?R<0&&(e.checkedValue=m.concat([B])):R>-1&&(e.checkedValue=m.slice(0,R).concat(m.slice(R+1)))}else e.checkedValue=E}}}),a("span",{staticClass:"switcher__switcher"})])])},Qw=[];const jw={name:"A17Toggle",props:{name:{type:String,default:""},title:{default:"Status"},disabled:{type:Boolean,default:!1},textEnabled:{type:String,default:"Live"},textDisabled:{type:String,default:"Draft"},textExpired:{type:String,default:"Expired"},textScheduled:{type:String,default:"Scheduled"}},filters:Me,computed:{switcherClasses:function(){return[this.isChecked?"switcher--active":"",this.formatTextEnabled?`switcher--${this.$options.filters.lowercase(this.formatTextEnabled)}`:""]},isChecked:function(){return this.published},formatTextEnabled:function(){const e=Ds(this.startDate,new Date),o=Ds(this.endDate,new Date);return this.endDate&&o<0?this.textExpired:this.startDate&&e>0?this.textScheduled:this.textEnabled},formatTextDisabled:function(){return this.textDisabled},checkedValue:{get:function(){return this.published},set:function(e){this.$store.commit(ht.UPDATE_PUBLISH_STATE,e),this.$emit("change",e)}},..._t({startDate:e=>e.publication.startDate,endDate:e=>e.publication.endDate,published:e=>e.publication.published})}},Vs={};var tv=V(jw,Jw,Qw,!1,ev,"3a916747",null,null);function ev(e){for(let o in Vs)this[o]=Vs[o]}var nv=function(){return tv.exports}(),iv=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("div",{staticClass:"accordion",class:e.visibilityClasses},[a("button",{staticClass:"accordion__trigger",attrs:{type:"button","aria-expanded":e.visible?"true":"false"},on:{click:e.onClickVisibility}},[e._t("accordion__title"),a("span",{staticClass:"accordion__value"},[e._t("accordion__value")],2),a("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"dropdown_module"}})],2),a("transition",{attrs:{css:!1,duration:275},on:{"before-enter":e.beforeEnter,"before-leave":e.beforeLeave,enter:e.enter,leave:e.leave}},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"accordion__dropdown",attrs:{"aria-hidden":!e.visible}},[a("div",{staticClass:"accordion__list"},[e._t("default")],2)])])],1)},av=[];const rv={name:"A17Accordion",mixins:[Te],watch:{open:function(){this.visible!==this.open&&(this.visible=this.open)}},methods:{getMaxHeight:function(){return Math.min(250,this.$el.querySelector(".accordion__list").clientHeight+1)},beforeEnter:function(e){e.style.maxHeight="0px"},enter:function(e,o){e.style.maxHeight=this.getMaxHeight()+"px"},beforeLeave:function(e,o){e.style.maxHeight=this.getMaxHeight()+"px"},leave:function(e,o){e.style.maxHeight="0px"}}},Ws={};var ov=V(rv,iv,av,!1,sv,"43082274",null,null);function sv(e){for(let o in Ws)this[o]=Ws[o]}var je=function(){return ov.exports}(),lv=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("a17-accordion",{attrs:{open:e.open},on:{toggleVisibility:e.notifyOpen}},[a("span",{attrs:{slot:"accordion__title"},slot:"accordion__title"},[e._t("default")],2),a("div",{attrs:{slot:"accordion__value"},slot:"accordion__value"},[e._v(e._s(e.currentLabel))]),a("a17-radiogroup",{attrs:{name:e.name,radios:e.radios,initialValue:e.currentValue},on:{change:e.changeValue}})],1)},fv=[];const dv={name:"A17Radioaccordion",components:{"a17-accordion":je},mixins:[Te],props:{value:{default:""},title:{default:""},name:{default:""},radios:{default:function(){return[]}}},data:function(){return{currentValue:this.value}},computed:{currentLabel:function(){const e=this.radios.filter(this.isSameValue);return e.length?e[0].label:""}},methods:{isSameValue:function(e){return e.value===this.currentValue},changeValue:function(e){this.currentValue=e,this.$emit("change",e)},notifyOpen:function(e){this.$emit("open",e,this.$options.name)}}},zs={};var cv=V(dv,lv,fv,!1,uv,null,null,null);function uv(e){for(let o in zs)this[o]=zs[o]}var pv=function(){return cv.exports}(),hv=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("a17-accordion",{attrs:{open:e.open},on:{toggleVisibility:e.notifyOpen}},[a("span",{attrs:{slot:"accordion__title"},slot:"accordion__title"},[e._t("default")],2),a("div",{attrs:{slot:"accordion__value"},slot:"accordion__value"},[e._v(e._s(e.currentLabel))]),a("a17-checkboxgroup",{attrs:{name:e.name,options:e.currentOptions,selected:e.currentValue},on:{change:e.changeValue}})],1)},mv=[];const _v={name:"A17Reviewaccordion",components:{"a17-accordion":je},mixins:[Te],props:{value:{default:function(){return[]}},title:{type:String,default:""},name:{type:String,default:""},options:{default:function(){return[]}}},data:function(){return{currentOptions:this.options,currentValue:this.value}},computed:{currentLabel:function(){let e="Pending approval";const o=this.currentValue[this.currentValue.length-1];return this.currentValue.length&&this.options.forEach(function(a){a.value===o&&(e=a.display)}),e}},methods:{changeValue:function(e){this.currentValue=e,this.$store.commit(ht.UPDATE_REVIEW_PROCESS,e)},notifyOpen:function(e){this.$emit("open",e,this.$options.name)}}},Ks={};var wv=V(_v,hv,mv,!1,vv,null,null,null);function vv(e){for(let o in Ks)this[o]=Ks[o]}var gv=function(){return wv.exports}(),xv=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("a17-accordion",{attrs:{open:e.open},on:{toggleVisibility:e.notifyOpen}},[a("span",{attrs:{slot:"accordion__title"},slot:"accordion__title"},[e._t("default")],2),a("div",{attrs:{slot:"accordion__value"},slot:"accordion__value"},[e._v(e._s(e.currentLabel))]),a("a17-checkboxgroup",{attrs:{name:e.name,options:e.options,selected:e.currentValue,min:1},on:{change:e.changeValue}})],1)},bv=[];const yv={name:"A17Checkboxaccordion",components:{"a17-accordion":je},mixins:[Te],props:{value:{default:function(){return[]}},title:{type:String,default:""},name:{type:String,default:""},options:{default:function(){return[]}}},data:function(){return{currentValue:this.value}},watch:{value:function(e){this.currentValue=e}},computed:{currentLabel:function(){return this.currentValue.length+" "+this.$trans("publisher.languages-published")}},methods:{changeValue:function(e){this.currentValue=e,this.$store.commit(j_.PUBLISH_LANG,e)},notifyOpen:function(e){this.$emit("open",e,this.$options.name)}}},Hs={};var Iv=V(yv,xv,bv,!1,kv,null,null,null);function kv(e){for(let o in Hs)this[o]=Hs[o]}var Ev=function(){return Iv.exports}(),Av=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("a17-accordion",{attrs:{open:e.open},on:{toggleVisibility:e.notifyOpen}},[a("span",{attrs:{slot:"accordion__title"},slot:"accordion__title"},[e._t("default"),e._v(" "),a("span",{staticClass:"f--small f--note"},[e._v("("+e._s(e.revisions.length)+")")])],2),a("div",{attrs:{slot:"accordion__value"},slot:"accordion__value"},[e._v(e._s(e.$trans("publisher.last-edit"))+" "),a("timeago",{attrs:{"auto-update":1,datetime:new Date(e.revisions[0].datetime)}})],1),a("div",{staticClass:"revaccordion__scroller"},[a("ul",{staticClass:"revaccordion__list"},e._l(e.revisions,function(c){return a("li",{key:c.id,staticClass:"revaccordion__item"},[a("a",{attrs:{href:"#"},on:{click:function(m){return m.preventDefault(),e.openPreview(c.id)}}},[a("span",{staticClass:"revaccordion__author"},[e._v(e._s(c.author))]),a("span",{staticClass:"revaccordion__datetime"},[c.label?a("span",{staticClass:"tag"},[e._v(e._s(c.label))]):e._e(),e._v(" "+e._s(e._f("formatDate")(c.datetime))+" ")])])])}),0)])])},Sv=[];const Cv={name:"A17Revisions",components:{"a17-accordion":je},mixins:[Te],props:{revisions:{default:function(){return[]}}},filters:Me,methods:{notifyOpen:function(e){this.$emit("open",e,this.$options.name)},openPreview:function(e){this.$root.$refs.preview&&this.$root.$refs.preview.open(parseInt(e))}}},Gs={};var Bv=V(Cv,Av,Sv,!1,$v,"ab3cc366",null,null);function $v(e){for(let o in Gs)this[o]=Gs[o]}var Pv=function(){return Bv.exports}(),Rv=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("a17-accordion",{attrs:{open:e.open},on:{toggleVisibility:e.notifyOpen}},[a("span",{attrs:{slot:"accordion__title"},slot:"accordion__title"},[e._t("default")],2),a("div",{attrs:{slot:"accordion__value"},slot:"accordion__value"},[e.startDate?[e._v(" "+e._s(e._f("formatDateWithFormat")(e.startDate,e.dateDisplayFormat))+" ")]:[e._v(" "+e._s(e.defaultStartDate)+" ")]],2),a("div",{staticClass:"accordion__fields"},[a("a17-datepicker",{attrs:{name:"publish_date","place-holder":e.$trans("publisher.start-date"),time_24hr:e.date_24h,altFormat:e.dateFormat,initialValue:e.startDate,maxDate:e.endDate,enableTime:!0,allowInput:!0,staticMode:!0,clear:!0},on:{open:e.openStartCalendar,close:e.closeCalendar,input:e.updateStartDate}}),a("a17-datepicker",{attrs:{name:"end_date","place-holder":e.$trans("publisher.end-date"),time_24hr:e.date_24h,altFormat:e.dateFormat,initialValue:e.endDate,minDate:e.startDate,enableTime:!0,allowInput:!0,staticMode:!0,clear:!0},on:{open:e.openEndCalendar,close:e.closeCalendar,input:e.updateEndDate}})],1)])},Mv=[];const Tv={name:"A17Pubaccordion",components:{"a17-accordion":je},mixins:[Te],props:{defaultStartDate:{type:String,default:function(){return this.$trans("publisher.immediate")}},defaultEndDate:{type:String,default:""},dateDisplayFormat:{type:String,default:"MMM, DD, YYYY, "+Vl()},dateFormat:{type:String,default:null},date_24h:{type:Boolean,default:Wl()}},filters:Me,computed:{..._t({startDate:e=>e.publication.startDate,endDate:e=>e.publication.endDate})},methods:{updateStartDate:function(e){this.$store.commit(ht.UPDATE_PUBLISH_START_DATE,e)},updateEndDate:function(e){this.$store.commit(ht.UPDATE_PUBLISH_END_DATE,e)},notifyOpen:function(e){this.$emit("open",e,this.$options.name)},openCalendar:function(){setTimeout(function(){document.querySelectorAll(".accordion.s--open, .accordion.s--open .accordion__dropdown").forEach(function(o){o.style.overflow="visible"})},10)},openStartCalendar:function(){this.openCalendar()},openEndCalendar:function(){this.openCalendar()},closeCalendar:function(){document.querySelectorAll(".accordion.s--open, .accordion.s--open .accordion__dropdown").forEach(function(o){o.style.overflow=""})}}},qs={};var Ov=V(Tv,Rv,Mv,!1,Lv,null,null,null);function Lv(e){for(let o in qs)this[o]=qs[o]}var Dv=function(){return Ov.exports}();function Jl(e,o){const a=[];function c(b){return Array(b+1).join(o)+" "}function m(b,E){b.forEach(function(B){const R={};if(R.value=B.id,B.edit&&(R.edit=B.edit),R.label=c(E)+B.name,a.push(R),B.children&&B.children.length){const z=E+1;m(B.children,z)}})}return m(e,0),a}var Nv=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("a17-accordion",{attrs:{open:e.open},on:{toggleVisibility:e.notifyOpen}},[a("span",{attrs:{slot:"accordion__title"},slot:"accordion__title"},[e._t("default")],2),a("div",{attrs:{slot:"accordion__value"},domProps:{innerHTML:e._s(e.currentLabel)},slot:"accordion__value"}),a("div",{staticClass:"accordion__fields"},[a("a17-select",{attrs:{name:"parent_id",options:e.options,selected:e.currentValue,size:"small"},on:{change:e.updateSelected}})],1)])},Fv=[];const Uv={name:"A17Parents",components:{"a17-accordion":je},mixins:[Te],props:{value:{default:0},parents:{default:function(){return[]}}},computed:{currentLabel:function(){const e=this.options.filter(this.isSameValue);return e.length?e[0].label:""},options:function(){const e=Jl(this.parents,"&nbsp;&nbsp;&nbsp;"),o={value:0,label:"(No parent)"};return e.unshift(o),e},..._t({currentValue:e=>e.parents.active})},methods:{isSameValue:function(e){return e.value===this.currentValue},updateSelected:function(e){this.$store.commit(ql.UPDATE_PARENT,e)},notifyOpen:function(e){this.$emit("open",e,this.$options.name)}}},Ys={};var Vv=V(Uv,Nv,Fv,!1,Wv,"5c82c6d8",null,null);function Wv(e){for(let o in Ys)this[o]=Ys[o]}var zv=function(){return Vv.exports}(),Kv=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("div",{staticClass:"multibutton"},[a("a17-dropdown",{ref:"submitDown",attrs:{position:"bottom-right",width:"full",offset:0}},[e.isDisabled(e.options[0])?a("a17-button",{attrs:{type:"button",variant:"validate",disabled:!0}},[e._v(e._s(e.options[0].text))]):a("a17-button",{attrs:{type:e.type,name:e.options[0].name,variant:"validate"},on:{click:function(c){return e.buttonClicked(e.options[0].name)}}},[e._v(e._s(e.options[0].text))]),e.hasValidOptions?a("button",{staticClass:"multibutton__trigger",attrs:{type:"button"},on:{click:function(c){return e.$refs.submitDown.toggle()}}},[a("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"dropdown_module"}})]):e._e(),e.otherOptions.length?a("div",{attrs:{slot:"dropdown__content"},slot:"dropdown__content"},[a("ul",e._l(e.otherOptions,function(c){return a("li",{key:c.name},[e.isDisabled(c)?a("button",{attrs:{type:"button",disabled:""}},[e._v(e._s(c.text))]):a("button",{attrs:{type:e.type,name:c.name},on:{click:function(m){return e.buttonClicked(c.name)}}},[e._v(e._s(c.text))])])}),0)]):e._e()],1)],1)},Hv=[];const Gv={name:"A17Multibutton",props:{type:{default:"button"},message:{type:String,default:""},options:{default:function(){return[]}}},data:function(){return{}},computed:{otherOptions:function(){return this.options.length?this.options.slice(1):[]},hasValidOptions:function(){const e=this.options.filter(function(a){return!a.hasOwnProperty("disabled")||a.disabled===!1}),o=Boolean(e.length>0);return!o&&this.message&&this.$store.commit(En.SET_NOTIF,{message:this.message,variant:"success"}),o}},methods:{isDisabled:function(e){return e.hasOwnProperty("disabled")?e.disabled===!0:!1},buttonClicked:function(e){this.$emit("button-clicked",e)}}},Zs={};var qv=V(Gv,Kv,Hv,!1,Yv,"50a61eea",null,null);function Yv(e){for(let o in Zs)this[o]=Zs[o]}var Zv=function(){return qv.exports}(),Xv=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("div",{staticClass:"userInfo"},[a("div",{staticClass:"userInfo__content"},[e.userInfo.registered_at?a("div",{staticClass:"userInfo__item"},[a("div",{staticClass:"userInfo__row"},[a("span",{staticClass:"userInfo__row-cell"},[e._v("Registered at")]),a("span",{staticClass:"userInfo__row-cell userInfo__row-cell--value"},[e._v(e._s(e.userInfo.registered_at))])])]):e._e(),e.userInfo.last_login_at?a("div",{staticClass:"userInfo__item"},[a("div",{staticClass:"userInfo__row"},[a("span",{staticClass:"userInfo__row-cell"},[e._v("Last login at")]),a("span",{staticClass:"userInfo__row-cell userInfo__row-cell--value"},[e._v(e._s(e.userInfo.last_login_at))])])]):e._e(),e.userInfo.resend_registration_link?a("div",{staticClass:"userInfo__item"},[a("a",{staticClass:"userInfo__link",attrs:{href:e.userInfo.resend_registration_link,type:"submit"}},[a("span",{staticClass:"f--link-underlined--o"},[e._v("Resend registration email")])])]):e._e(),a("div",{staticClass:"userInfo__item"},[a("button",{staticClass:"userInfo__link",attrs:{type:"button"},on:{click:e.openPasswordModal}},[a("span",{staticClass:"f--link-underlined--o"},[e._v(e._s(e.userInfo.is_activated?"Reset password":"Register account now"))])])])]),a("a17-modal",{ref:"passwordModal",staticClass:"modal--form",attrs:{title:e.userInfo.is_activated?"Reset password for "+e.userInfo.user_name:"Register account for "+e.userInfo.user_name},on:{hide:e.hidePasswordModal}},[a("div",{staticClass:"userInfo__form-row"},[a("a17-textfield",{attrs:{name:"new_password",id:"new_password",fieldName:"new_password",inStore:"value",label:"New password",maxlength:50,note:"Must have at least 8 characters",required:"",type:"password"}})],1),e.userInfo.is_activated?a("div",{staticClass:"userInfo__form-row"},[a("a17-singlecheckbox",{attrs:{inStore:"value",name:"require_password_change",initialValue:!1,id:"require_password_change",fieldName:"require_password_change",label:"Require password change at next login"}})],1):e._e(),a("div",{staticClass:"userInfo__form-row"},[a("a17-modal-validation",{attrs:{mode:e.userInfo.is_activated?"Update":"Create"}})],1)])],1)},Jv=[];const Qv={name:"A17UserInfo",components:{"a17-textfield":tw,"a17-modal-validation":ja},props:{userInfo:{type:Object,default:null}},data(){return{isPasswordModalOpen:!1}},methods:{openPasswordModal(){this.isPasswordModalOpen=!0,this.$refs.passwordModal.open(),this.$store.commit(nt.UPDATE_FORM_FIELD,{name:"reset_password",value:!0})},hidePasswordModal(){this.$store.commit(nt.UPDATE_FORM_FIELD,{name:"reset_password",value:!1})}}},Xs={};var jv=V(Qv,Xv,Jv,!1,tg,"6ad0159c",null,null);function tg(e){for(let o in Xs)this[o]=Xs[o]}var eg=function(){return jv.exports}(),ng=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("div",{staticClass:"publisher__wrapper"},[e.withPublicationToggle?a("a17-switcher",{attrs:{title:e.$trans("publisher.switcher-title","Status"),name:"publish_state",textEnabled:e.textEnabled,textDisabled:e.textDisabled,"text-scheduled":e.textScheduled,"text-expired":e.textExpired}}):e._e(),e._t("default"),e.userInfo?a("a17-userinfo",{attrs:{userInfo:e.userInfo}}):e._e(),e.reviewProcess&&e.reviewProcess.length?a("a17-reviewaccordion",{attrs:{options:e.reviewProcess,name:"review_process",value:e.reviewProcessCompleteValues,open:e.openStates.A17Reviewaccordion},on:{open:e.openCloseAccordion}},[e._v(e._s(e.$trans("publisher.review-status")))]):e._e(),e.visibility&&e.visibilityOptions&&e.visibilityOptions.length?a("a17-radioaccordion",{attrs:{radios:e.visibilityOptions,name:"visibility",value:e.visibility,open:e.openStates.A17Radioaccordion},on:{open:e.openCloseAccordion,change:e.updateVisibility}},[e._v(e._s(e.$trans("publisher.visibility")))]):e._e(),e.languages&&e.showLanguages&&e.languages.length>1?a("a17-checkboxaccordion",{attrs:{options:e.languages,name:"active_languages",value:e.publishedLanguagesValues,open:e.openStates.A17Checkboxaccordion},on:{open:e.openCloseAccordion}},[e._v(e._s(e.$trans("publisher.languages")))]):e._e(),e.withPublicationTimeframe?a("a17-pubaccordion",{attrs:{"date-display-format":e.dateDisplayFormat,"date-format":e.dateFormat,date_24h:e.date_24h,open:e.openStates.A17Pubaccordion},on:{open:e.openCloseAccordion}},[e._v(e._s(e.$trans("publisher.published-on")))]):e._e(),e.revisions.length?a("a17-revaccordion",{attrs:{open:e.openStates.A17Revisions,revisions:e.revisions},on:{open:e.openCloseAccordion}},[e._v(e._s(e.$trans("publisher.revisions")))]):e._e(),e.parents.length?a("a17-parentaccordion",{attrs:{open:e.openStates.A17Parents,parents:e.parents,value:e.parentId},on:{open:e.openCloseAccordion}},[e._v(e._s(e.$trans("publisher.parent-page")))]):e._e(),e.revisions.length?a("div",{staticClass:"publisher__item"},[a("a",{staticClass:"publisher__link",attrs:{href:"#"},on:{click:function(c){return c.preventDefault(),e.openPreview(c)}}},[a("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"preview"}}),a("span",{staticClass:"f--link-underlined--o"},[e._v(e._s(e.$trans("publisher.preview")))])])]):e._e(),a("div",{staticClass:"publisher__item publisher__item--btns"},[a("a17-multibutton",{attrs:{options:e.submitOptions,type:"submit",message:e.submitDisableMessage},on:{"button-clicked":e.buttonClicked}})],1)],2)},ig=[];const ag={name:"A17Publisher",components:{"a17-switcher":nv,"a17-radioaccordion":pv,"a17-checkboxaccordion":Ev,"a17-reviewaccordion":gv,"a17-revaccordion":Pv,"a17-parentaccordion":zv,"a17-pubaccordion":Dv,"a17-multibutton":Zv,"a17-userinfo":eg},props:{showLanguages:{type:Boolean,default:!0},dateFormat:{type:String,default:null},dateDisplayFormat:{type:String,default:"MMM, DD, YYYY, "+Vl()},date_24h:{type:Boolean,default:Wl()}},data:function(){return{singleOpen:!0,openStates:{A17Reviewaccordion:!1,A17Radioaccordion:!1,A17Checkboxaccordion:!1,A17Revisions:!1,A17Pubaccordion:!1,A17Parents:!1}}},filters:Me,computed:{reviewProcessCompleteValues:function(){const e=[];return this.reviewProcessComplete.length&&this.reviewProcessComplete.forEach(function(o){e.push(o.value)}),e},submitOptions:function(){return this.$store.getters.getSubmitOptions},publishedLanguagesValues:function(){const e=[];return this.publishedLanguages.length&&this.publishedLanguages.forEach(function(o){e.push(o.value)}),e},..._t({languages:e=>e.language.all,revisions:e=>e.revision.all,parentId:e=>e.parents.active,parents:e=>e.parents.all,published:e=>e.publication.published,publishSubmit:e=>e.publication.publishSubmit,textEnabled:e=>e.publication.publishedLabel,textDisabled:e=>e.publication.draftLabel,textExpired:e=>e.publication.expiredLabel,textScheduled:e=>e.publication.scheduledLabel,withPublicationToggle:e=>e.publication.withPublicationToggle,withPublicationTimeframe:e=>e.publication.withPublicationTimeframe,visibility:e=>e.publication.visibility,visibilityOptions:e=>e.publication.visibilityOptions,reviewProcess:e=>e.publication.reviewProcess,hasUnsavedChanges:e=>e.publication.hasUnsavedChanges,submitDisableMessage:e=>e.publication.submitDisableMessage,userInfo:e=>e.publication.userInfo}),...jt(["publishedLanguages","reviewProcessComplete"])},methods:{buttonClicked:function(e){this.$store.commit(ht.UPDATE_SAVE_TYPE,e)},openCloseAccordion:function(e,o){if(!!this.singleOpen)if(e)for(const a in this.openStates)this.openStates[a]=a===o;else this.openStates[o]=!1},openPreview:function(){this.$root.$refs.preview&&this.$root.$refs.preview.open(0)},updateVisibility:function(e){this.$store.commit(ht.UPDATE_PUBLISH_VISIBILITY,e)},openMoveToTrashModal:function(){this.$parent.$refs.moveToTrashModal.open()}}},Js={};var rg=V(ag,ng,ig,!1,og,"acc12942",null,null);function og(e){for(let o in Js)this[o]=Js[o]}var sg=function(){return rg.exports}(),lg=function(){var e=this,o=e.$createElement,a=e._self._c||o;return e.parents.length||e.hasUrl?a("div",{staticClass:"pagenav"},[e.parents.length?a("div",{staticClass:"pagenav__form"},[a("a17-vselect",{attrs:{name:"parents_sources",placeholder:e.placeholder,size:"large",searchable:!0,options:e.options},on:{change:e.gotoUrl}})],1):e._e(),e.hasUrl?a("nav",{staticClass:"pagenav__nav"},[e.previousUrl?a("a",{staticClass:"pagenav__btn",attrs:{href:e.previousUrl}},[e._v("\u2190 "+e._s(e.previousLabel))]):a("span",{staticClass:"pagenav__btn"},[e._v("\u2190 "+e._s(e.previousLabel))]),e.nextUrl?a("a",{staticClass:"pagenav__btn",attrs:{href:e.nextUrl}},[e._v(e._s(e.nextLabel)+" \u2192")]):a("span",{staticClass:"pagenav__btn"},[e._v(e._s(e.nextLabel)+" \u2192")])]):e._e()]):e._e()},fg=[];const dg={name:"A17PageNav",props:{previousLabel:{type:String,default:"Previous page"},nextLabel:{type:String,default:"Next page"},previousUrl:{type:String,default:""},nextUrl:{type:String,default:""},placeholder:{type:String,default:""}},data:function(){return{}},computed:{hasUrl:function(){return this.previousUrl||this.nextUrl},options:function(){return Jl(this.parents,"\u2013")},..._t({parents:e=>e.parents.all})},methods:{gotoUrl:function(e){e.edit&&(window.location.href=e.edit)}},beforeMount:function(){}},Qs={};var cg=V(dg,lg,fg,!1,ug,"6efcfdf8",null,null);function ug(e){for(let o in Qs)this[o]=Qs[o]}var pg=function(){return cg.exports}(),hg=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("div",{staticClass:"block",class:e.blockClasses},[a("div",{staticClass:"block__header",on:{dblclick:function(c){return c.preventDefault(),e.toggleExpand()}}},[e.withHandle?a("span",{staticClass:"block__handle"}):e._e(),a("div",{staticClass:"block__toggle"},[e.withMoveDropdown?a("a17-dropdown",{ref:e.moveDropdown,staticClass:"f--small",attrs:{position:"bottom-left",maxHeight:270}},[a("span",{staticClass:"block__counter f--tiny",on:{click:function(c){return e.$refs[e.moveDropdown].toggle()}}},[e._v(e._s(e.index+1))]),a("div",{attrs:{slot:"dropdown__content"},slot:"dropdown__content"},[e._t("dropdown-numbers")],2)]):a("span",{staticClass:"block__counter f--tiny"},[e._v(e._s(e.index+1))]),a("span",{staticClass:"block__title"},[e._v(e._s(e.blockTitle))])],1),a("div",{staticClass:"block__actions"},[e._t("block-actions"),e.withAddDropdown?a("a17-dropdown",{ref:e.addDropdown,attrs:{position:"bottom-right"},on:{open:function(c){e.hover=!0},close:function(c){e.hover=!1}}},[a("a17-button",{attrs:{variant:"icon","data-action":""},on:{click:function(c){return e.$refs[e.addDropdown].toggle()}}},[a("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"add"}})]),a("div",{attrs:{slot:"dropdown__content"},slot:"dropdown__content"},[e._t("dropdown-add")],2)],1):e._e(),a("a17-button",{attrs:{variant:"icon","data-action":"","aria-expanded":e.visible?"true":"false"},on:{click:function(c){return e.toggleExpand()}}},[a("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"expand"}})]),a("a17-dropdown",{ref:e.actionsDropdown,attrs:{position:"bottom-right"},on:{open:function(c){e.hover=!0},close:function(c){e.hover=!1}}},[a("a17-button",{attrs:{variant:"icon"},on:{click:function(c){return e.$refs[e.actionsDropdown].toggle()}}},[a("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"more-dots"}})]),a("div",{attrs:{slot:"dropdown__content"},slot:"dropdown__content"},[e._t("dropdown-action")],2)],1)],2)]),e.visible?a("div",{staticClass:"block__content"},[a(""+e.block.type,e._b({key:"form_"+e.block.type+"_"+e.block.id,tag:"component",attrs:{name:e.componentName(e.block.id)}},"component",e.block.attributes,!1)),a("a17-inputframe",{attrs:{size:"small",label:"",name:"block."+e.block.id}})],1):e._e()])},mg=[];const _g={name:"A17BlockEditorItem",props:{index:{type:Number,default:0},opened:{type:Boolean,default:!0},size:{type:String,default:""},block:{type:Object,default:()=>{}},withHandle:{type:Boolean,default:!0}},data(){return{visible:!1,hover:!1,withMoveDropdown:!0,withAddDropdown:!0}},filters:Me,computed:{titleFieldValue:function(){const e=this.blockFieldValue(this.block.titleField);return e?typeof e=="object"?e[this.currentLocale.value]:e:null},blockTitle:function(){const e=this.block.title||"",o=this.titleFieldValue||"",a=e&&o?" \u2014 ":"";return this.block.hideTitlePrefix?`${o}`:`${e}${a}${o}`},blockClasses(){return[this.visible?"block--open":"",this.hover?"block--focus":"",this.size?`block--${this.size}`:""]},moveDropdown(){return`moveBlock${this.index}Dropdown`},actionsDropdown(){return`action${this.block.id}Dropdown`},addDropdown(){return`add${this.block.id}Dropdown`},..._t({currentLocale:e=>e.language.active}),...jt(["fieldValueByName"])},watch:{opened(){this.visible=this.opened}},created(){this.block.ui&&this.block.ui.isNew&&this.toggleExpand()},methods:{toggleExpand(){this.visible=!this.visible},componentName(e){return"blocks["+e+"]"},blockFieldName:function(e){return e?`blocks[${this.block.id}][${e}]`:""},blockFieldValue:function(e){if(!e)return null;const o=this.blockFieldName(e);return this.fieldValueByName(o)}},beforeMount(){this.$slots["dropdown-numbers"]||(this.withMoveDropdown=!1),this.$slots["dropdown-add"]||(this.withAddDropdown=!1)}},js={};var wg=V(_g,hg,mg,!1,vg,"468006a2",null,null);function vg(e){for(let o in js)this[o]=js[o]}var Ql=function(){return wg.exports}(),tr={props:{editorName:{type:String,required:!0}},computed:{availableBlocks(){const e=this.editorName.split("|"),o=e[e.length-1];return this.getAvailableBlocks(o)},savedBlocks(){return this.blocks(this.editorName)},allSavedBlocks(){return this.used&&Object.keys(this.used).reduce((e,o)=>e.concat(this.used[o]),[])},hasBlockActive(){return Object.keys(this.activeBlock).length>0},..._t({activeBlock:e=>e.blocks.active,used:e=>e.blocks.blocks,editorNames:e=>e.blocks.editorNames}),...jt({getAvailableBlocks:"availableBlocks",blocks:"blocks"})},methods:{reorderBlocks(e){this.$store.commit(J.REORDER_BLOCKS,{editorName:this.editorName,value:e})},addBlock(e,o,a=-1){this.$store.commit(J.ADD_BLOCK,{editorName:o,block:{...e,type:e.type||e.component},index:a})},moveBlock({oldIndex:e,newIndex:o}){this.$store.commit(J.MOVE_BLOCK,{editorName:this.editorName,oldIndex:e,newIndex:o})},moveBlockToEditor(e,o,a,c){this.$store.dispatch(mt.MOVE_BLOCK_TO_EDITOR,{block:e,editorName:o,index:a,futureIndex:c,id:Date.now()})},cloneBlock({block:e,index:o}){this.$store.dispatch(mt.DUPLICATE_BLOCK,{editorName:this.editorName,futureIndex:o,block:e,id:Date.now()})}},render(){return this.$scopedSlots.default({availableBlocks:this.availableBlocks,savedBlocks:this.savedBlocks,reorderBlocks:this.reorderBlocks,moveBlock:this.moveBlock,editorNames:this.editorNames,hasBlockActive:this.hasBlockActive,allSavedBlocks:this.allSavedBlocks,activeBlock:this.activeBlock,addBlock:this.addBlock,moveBlockToEditor:this.moveBlockToEditor,cloneBlock:this.cloneBlock})}},er={props:{block:{type:Object},editorName:{type:String,required:!0}},computed:{blockIndex(){return this.block?this.getBlockIndex(this.block,this.editorName):0},isActive(){return this.block&&Object.keys(this.activeBlock).length>0?this.block.id===this.activeBlock.id:!1},..._t({activeBlock:e=>e.blocks.active}),...jt({getBlockIndex:"blockIndex"})},methods:{add(e,o=-1){this.$store.commit(J.ADD_BLOCK,{editorName:this.editorName,block:{id:this.setBlockID(),title:e.title,type:e.component,icon:e.icon,attributes:e.attributes},index:o})},edit(e=this.blockIndex){this.$store.commit(J.ACTIVATE_BLOCK,{editorName:this.editorName,index:e})},unEdit(){this.$store.commit(J.ACTIVATE_BLOCK,{editorName:this.editorName,index:-1})},move(e){this.blockIndex!==e&&this.$store.commit(J.MOVE_BLOCK,{editorName:this.editorName,oldIndex:this.blockIndex,newIndex:e})},duplicate(){const e=Object.assign({},this.block);this.$store.commit(J.DUPLICATE_BLOCK,{editorName:this.editorName,index:this.blockIndex,block:e,id:this.setBlockID()})},remove(){this.unEdit(),this.$store.commit(J.DELETE_BLOCK,{editorName:this.editorName,index:this.blockIndex})},setBlockID(){return Date.now()}},render(){return this.$scopedSlots.default({block:this.block,blockIndex:this.blockIndex,add:this.add,edit:this.edit,unEdit:this.unEdit,isActive:this.isActive,remove:this.remove,move:this.move,duplicate:this.duplicate})}},gg=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("a17-blocks-list",{attrs:{"editor-name":e.editorName},scopedSlots:e._u([{key:"default",fn:function(c){var m=c.savedBlocks,b=c.availableBlocks,E=c.moveBlock,B=c.moveBlockToEditor,R=c.cloneBlock;return[a("div",{staticClass:"blocks"},[a("draggable",{staticClass:"blocks__container",attrs:{value:m,group:"blocks",move:e.handleOnMove,options:e.dragOptions},on:{end:function(z){return e.handleOnEnd(E,B)}}},[a("transition-group",{attrs:{name:"draggable_list",tag:"div"}},e._l(m,function(z){return a("div",{key:z.id,staticClass:"blocks__item"},[a("a17-blockeditor-model",{attrs:{"editor-name":e.editorName,block:z},scopedSlots:e._u([{key:"default",fn:function(G){var Q=G.block,ct=G.blockIndex,ot=G.add,qt=G.edit,ue=G.move,st=G.remove,te=G.duplicate;return[b.length?a("a17-blockeditor-item",{ref:"blockList",refInFor:!0,attrs:{block:Q,index:ct,opened:e.opened},on:{expand:e.setOpened}},[e._l(b,function(lt){return[a("button",{key:lt.component,staticClass:"blocks__addButton",attrs:{slot:"dropdown-add",type:"button"},on:{click:function($t){return e.handleBlockAdd(ot,lt,ct+1)}},slot:"dropdown-add"},[a("span",{directives:[{name:"svg",rawName:"v-svg"}],staticClass:"blocks__icon",attrs:{symbol:lt.icon}}),a("span",{staticClass:"blocks__title"},[e._v(e._s(lt.title))])])]}),a("div",{attrs:{slot:"dropdown-action"},slot:"dropdown-action"},[e.opened?a("button",{attrs:{type:"button"},on:{click:function(lt){return e.collapseAllBlocks()}}},[e._v(" "+e._s(e.$trans("fields.block-editor.collapse-all","Collapse all"))+" ")]):a("button",{attrs:{type:"button"},on:{click:function(lt){return e.expandAllBlocks()}}},[e._v(" "+e._s(e.$trans("fields.block-editor.expand-all","Expand all"))+" ")]),e.editor&&!e.editorName.includes("|")?a("button",{attrs:{type:"button"},on:{click:function(lt){return e.openInEditor(qt,ct,e.editorName)}}},[e._v(" "+e._s(e.$trans("fields.block-editor.open-in-editor","Open in editor"))+" ")]):e._e(),a("button",{attrs:{type:"button"},on:{click:function(lt){return e.handleClone(R,ct,Q)}}},[e._v(" "+e._s(e.$trans("fields.block-editor.clone-block","Clone block"))+" ")]),a("button",{attrs:{type:"button"},on:{click:function(lt){return e.handleDuplicateBlock(te)}}},[e._v(" "+e._s(e.$trans("fields.block-editor.create-another","Create another"))+" ")]),a("button",{attrs:{type:"button"},on:{click:function(lt){return e.handleDeleteBlock(st)}}},[e._v(" "+e._s(e.$trans("fields.block-editor.delete","Delete"))+" ")])]),e._l(m.length,function(lt){return a("button",{key:lt,attrs:{slot:"dropdown-numbers",type:"button"},on:{click:function($t){return ue(lt-1)}},slot:"dropdown-numbers"},[e._v(e._s(lt)+" ")])})],2):e._e()]}}],null,!0)})],1)}),0)],1),a("div",{staticClass:"blocks__actions"},[b.length?a("a17-dropdown",{ref:"blocksDropdown",attrs:{position:"top-center",arrow:!0,offset:10,maxHeight:430}},[a("a17-button",{attrs:{size:"small",variant:"action"},on:{click:function(z){return e.$refs.blocksDropdown.toggle()}}},[e._v(e._s(e.trigger)+" ")]),a("div",{attrs:{slot:"dropdown__content"},slot:"dropdown__content"},[e._l(b,function(z){return[a("a17-blockeditor-model",{key:z.component,attrs:{"editor-name":e.editorName,block:z},scopedSlots:e._u([{key:"default",fn:function(G){var Q=G.add,ct=G.block;return[a("button",{key:z.component,staticClass:"blocks__addButton",attrs:{type:"button"},on:{click:function(ot){return e.handleBlockAdd(Q,ct)}}},[a("span",{directives:[{name:"svg",rawName:"v-svg"}],staticClass:"blocks__icon",attrs:{symbol:z.icon}}),a("span",{staticClass:"blocks__title"},[e._v(e._s(z.title))])])]}}],null,!0)})]})],2)],1):e._e(),e.editorName.includes("|")?e._e():a("div",{staticClass:"blocks__secondaryActions"},[e.editor?a("a",{staticClass:"f--link f--link-underlined--o",attrs:{href:"#"},on:{click:function(z){return z.preventDefault(),e.openEditor(-1,e.editorName)}}},[e._v(" "+e._s(e.$trans("fields.block-editor.open-in-editor","Open in editor"))+" ")]):e._e()])],1)],1)]}}])})},xg=[];const bg={name:"A17Blocks",components:{"a17-blockeditor-item":Ql,"a17-blockeditor-model":er,"a17-blocks-list":tr,draggable:bi},mixins:[yi,Xl],props:{trigger:{type:String,default:""},title:{type:String,default:""},editorName:{type:String,required:!0}},data(){return{opened:!0,handle:".block__handle"}},computed:{..._t({editor:e=>e.blocks.editor,editorNames:e=>e.blocks.editorNames}),...jt(["blocks","fieldsByBlockId","availableBlocks"])},methods:{setOpened:function(){this.$refs.blockList&&this.$refs.blockList.every(o=>!o.visible)&&(this.opened=!1)},collapseAllBlocks:function(){this.opened=!1},expandAllBlocks:function(){this.opened=!0},checkExpandBlocks(){this.$refs.blockList[this.$refs.blockList.length-1].toggleExpand()},handleOnMove(e){const{draggedContext:o,relatedContext:a}=e,{index:c,element:m,futureIndex:b}=o,{element:E}=a;this.nextMove={block:m,editorName:E.name,newIndex:b,index:c}},handleOnEnd(e,o){const{block:a,editorName:c,newIndex:m,index:b}=this.nextMove;a.name!==c?this.checkIfBlockTypeIsAvailable(c,a.type)&&o&&o(a,c,b,m):e&&e({oldIndex:b,newIndex:m})},handleClone(e,o,a){e&&e({block:a,index:o+1}),this.$nextTick(()=>{this.checkExpandBlocks()})},handleBlockAdd(e,o,a=-1){e(o,a),this.$nextTick(()=>{this.checkExpandBlocks()})},handleDuplicateBlock(e,o){e(o),this.$nextTick(()=>{this.checkExpandBlocks()})},handleDeleteBlock(e,o){this.$root.$refs.warningContentEditor?this.$root.$refs.warningContentEditor.open(()=>{e(o),this.$nextTick(()=>{this.checkExpandBlocks()})}):(e(o),this.$nextTick(()=>{this.checkExpandBlocks()}))},checkIfBlockTypeIsAvailable(e,o){return JSON.parse(JSON.stringify(this.availableBlocks(e))).map(m=>m.component).indexOf(o)!==-1},openInEditor(e,o,a){e(),this.openEditor(o,a)}},mounted(){this.$nextTick(function(){this.$refs.blockList&&this.blocks(this.editorName)&&this.blocks(this.editorName).length<4&&this.$refs.blockList.forEach(e=>e.toggleExpand())})}},tl={};var yg=V(bg,gg,xg,!1,Ig,"4af51b78",null,null);function Ig(e){for(let o in tl)this[o]=tl[o]}var kg=function(){return yg.exports}(),Eg=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("a17-modal",{ref:"standalone-"+e.endpointName,staticClass:"modal--browser",attrs:{mode:"medium","force-close":!0},on:{close:e.closeModal}},[a("div",{staticClass:"browser"},[a("div",{staticClass:"browser__frame"},[a("div",{ref:"form",staticClass:"browser__header"},[e.multiSources?a("div",{staticClass:"browser__sources"},[a("a17-vselect",{staticClass:"browser__sources-select",attrs:{name:"sources",selected:e.currentEndpoint,options:e.endpoints,required:!0},on:{change:e.changeBrowserSource}})],1):e._e(),a("div",{staticClass:"browser__search"},[a("a17-filter",{on:{submit:e.submitFilter}},[e.browserNote?a("div",{attrs:{slot:"additional-actions"},slot:"additional-actions"},[a("span",{staticClass:"browser__note f--small"},[e._v(" "+e._s(e.browserNote)+" ")])]):e._e()])],1)]),a("div",{staticClass:"browser__inner"},[a("div",{ref:"list",staticClass:"browser__list"},[a("a17-itemlist",{attrs:{items:e.fullItems,keysToCheck:["id","edit"],selectedItems:e.selectedItems},on:{change:e.updateSelectedItems}})],1)]),a("div",{staticClass:"browser__footer"},[a("a17-button",{attrs:{type:"button",variant:"action"},on:{click:e.saveAndClose}},[e._v(e._s(e.browserTitle))]),a("span",{staticClass:"browser__size-infos"},[e._v(e._s(e.selectedItems.length)+" / "+e._s(e.max))])],1)])])])},Ag=[];const Sg={name:"A17StandaloneBrowser",components:{"a17-filter":ew,"a17-itemlist":nw,"a17-modal":iw},props:{btnLabel:{type:String,default:"Insert"},btnMultiLabel:{type:String,default:"Insert files"},initialPage:{type:Number,default:1},open:{type:Boolean,default:!1},forRepeater:{type:Boolean,default:!1},endpoint:{type:Object,required:!0},max:{type:Number,default:0}},data(){return{maxPage:20,fullItems:[],listHeight:0,page:this.initialPage,endpoints:[],endpointName:null,browserTitle:"Select",browserNote:null,selected:[]}},computed:{currentEndpoint(){return this.endpoints.find(e=>e.value===this.endpoint.value)},multiSources(){return this.endpoints.length>1},selectedItems:{get(){return this.selected||[]},set(e){this.selected=e}}},watch:{open:function(e,o){e!==o&&(e?this.openModal():this.closeModal())}},methods:{openModal(){const e="standalone-"+this.endpointName;this.$refs[e].open()},closeModal(){const e="standalone-"+this.endpointName;this.$refs[e].close(),this.$emit("close")},updateSelectedItems(e){const o=this.multiSources?["id","endpointType"]:["id"];if(!this.fullItems.some(m=>o.every(b=>m[b]===e[b])))return;if(this.selectedItems.some(m=>o.every(b=>m[b]===e[b]))){const m=this.selectedItems.findIndex(E=>o.every(B=>E[B]===e[B]));if(m<0)return;const b=[...this.selectedItems];b.splice(m,1),this.selectedItems=b}else{if(this.max===1&&this.clearSelectedItems(),this.selectedItems.length>=this.max&&this.max>0)return;this.selectedItems=[...this.selectedItems,e]}},getFormData(e){let o=aw(e);return o?o.page=this.page:o={page:this.page},o.forRepeater=this.forRepeater,o},clearSelectedItems(){this.selectedItems=[]},clearFullItems(){this.fullItems.splice(0)},reloadList(e=!1){e&&(this.page=1);const o=this.$refs.form,a=this.getFormData(o);this.$http.get(this.endpoint.value,{params:a}).then(c=>{e&&this.clearFullItems(),this.fullItems.push(...c.data.data),this.$nextTick(()=>{this.listHeight!==this.$refs.list.scrollHeight&&(this.listHeight=this.$refs.list.scrollHeight,this.$refs.list.addEventListener("scroll",this.scrollToPaginate))})},function(c){})},submitFilter(){this.page=1,this.clearFullItems(),this.reloadList()},scrollToPaginate(){const e=this.$refs.list;e.scrollTop+e.clientHeight>this.listHeight-10&&(e.removeEventListener("scroll",this.scrollToPaginate),this.maxPage>this.page&&(this.page=this.page+1,this.reloadList()))},saveAndClose(){this.$emit("selected",this.selectedItems),this.closeModal()},changeBrowserSource(e){this.reloadList(!0)}},mounted(){this.openModal(),this.endpoints=[this.endpoint],this.reloadList()}},el={};var Cg=V(Sg,Eg,Ag,!1,Bg,"a5ff0ec0",null,null);function Bg(e){for(let o in el)this[o]=el[o]}var $g=function(){return Cg.exports}(),Pg=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("div",{staticClass:"content"},[a("draggable",{staticClass:"content__content",attrs:{options:e.dragOptions},model:{value:e.blocks,callback:function(c){e.blocks=c},expression:"blocks"}},[a("transition-group",{attrs:{name:"draggable_list",tag:"div"}},e._l(e.blocks,function(c,m){return a("div",{key:c.id,staticClass:"content__item"},[a("a17-blockeditor-item",{ref:"blockList",refInFor:!0,attrs:{block:c,index:m,withHandle:e.draggable,size:e.blockSize,opened:e.opened}},[e.hasRemainingBlocks?a("a17-button",{attrs:{slot:"block-actions",variant:"icon","data-action":""},on:{click:function(b){return e.duplicateBlock(m)}},slot:"block-actions"},[a("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"add"}})]):e._e(),a("div",{attrs:{slot:"dropdown-action"},slot:"dropdown-action"},[e.opened?a("button",{attrs:{type:"button"},on:{click:function(b){return e.collapseAllBlocks()}}},[e._v(" "+e._s(e.$trans("fields.block-editor.collapse-all","Collapse all"))+" ")]):a("button",{attrs:{type:"button"},on:{click:function(b){return e.expandAllBlocks()}}},[e._v(" "+e._s(e.$trans("fields.block-editor.expand-all","Expand all"))+" ")]),e.hasRemainingBlocks?a("button",{attrs:{type:"button"},on:{click:function(b){return e.duplicateBlock(m)}}},[e._v(" "+e._s(e.$trans("fields.block-editor.clone-block","Clone block"))+" ")]):e._e(),a("button",{attrs:{type:"button"},on:{click:function(b){return e.deleteBlock(m)}}},[e._v(" "+e._s(e.$trans("fields.block-editor.delete","Delete"))+" ")])])],1)],1)}),0)],1),a("div",{staticClass:"content__trigger"},[e.hasRemainingBlocks&&e.blockType.trigger&&e.allowCreate?a("a17-button",{class:e.triggerClass,attrs:{variant:e.triggerVariant},on:{click:function(c){return e.addBlock()}}},[e._v(" "+e._s(e.blockType.trigger)+" ")]):e._e(),e.hasRemainingBlocks&&e.browser?a("a17-button",{class:e.triggerClass,attrs:{variant:e.triggerVariant},on:{click:function(c){return e.openBrowser()}}},[e._v(" "+e._s(e.blockType.selectTrigger)+" ")]):e._e(),a("div",{staticClass:"content__note f--note f--small"},[e._t("default")],2)],1),e.browserIsOpen?a("a17-standalone-browser",{ref:"localbrowser",attrs:{endpoint:e.browser,"for-repeater":!0,max:e.max},on:{selected:e.addRepeatersFromSelection,close:function(c){e.browserIsOpen=!1}}}):e._e()],1)},Rg=[];const Mg={name:"A17Repeater",components:{A17StandaloneBrowser:$g,"a17-blockeditor-item":Ql,draggable:bi},mixins:[yi],props:{type:{type:String,required:!0},name:{type:String,required:!0},buttonAsLink:{type:Boolean,default:!1},browser:{type:Object,required:!1,default:null},relation:{type:String,required:!1},allowCreate:{type:Boolean,default:!0},max:{type:[Number,null],required:!1,default:null}},data:function(){return{opened:!0,browserIsOpen:!1,handle:".block__handle"}},computed:{triggerVariant:function(){return this.buttonAsLink?"aslink":this.inContentEditor?"outline":"action"},triggerClass:function(){return this.inContentEditor?"content__button":""},blockSize:function(){return this.inContentEditor?"small":""},inContentEditor:function(){return typeof this.$parent.repeaterName!="undefined"},hasRemainingBlocks:function(){let e=null;return this.max&&this.max>0?e=this.max:this.blockType.hasOwnProperty("max")&&(e=this.blockType.max),!e||e>this.blocks.length},blockType:function(){return this.availableBlocks[this.type]?this.availableBlocks[this.type]:{}},blocks:{get(){return this.savedBlocks.hasOwnProperty(this.name)?this.savedBlocks[this.name]||[]:[]},set(e){this.$store.commit(nt.REORDER_FORM_BLOCKS,{type:this.type,name:this.name,blocks:e})}},..._t({savedBlocks:e=>e.repeaters.repeaters,availableBlocks:e=>e.repeaters.availableRepeaters})},methods:{addBlock:function(){this.$store.commit(nt.ADD_FORM_BLOCK,{type:this.type,name:this.name})},addRepeatersFromSelection(e){this.$store.commit(nt.ADD_REPEATER_FROM_SELECTION,{type:this.type,name:this.name,selection:e,relation:this.relation})},duplicateBlock:function(e){this.$store.commit(nt.DUPLICATE_FORM_BLOCK,{type:this.type,name:this.name,index:e})},deleteBlock:function(e){this.$store.commit(nt.DELETE_FORM_BLOCK,{type:this.type,name:this.name,index:e})},collapseAllBlocks:function(){this.opened=!1},expandAllBlocks:function(){this.opened=!0},openBrowser:function(){this.browserIsOpen=!0}},mounted:function(){this.$nextTick(()=>{this.collapseAllBlocks()})}},nl={};var Tg=V(Mg,Pg,Rg,!1,Og,"4899d21c",null,null);function Og(e){for(let o in nl)this[o]=nl[o]}var Lg=function(){return Tg.exports}(),Dg=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("a17-inputframe",{attrs:{error:e.error,note:e.note,locale:e.locale,label:e.label,name:e.name,required:e.required},on:{localize:e.updateLocale}},[a("div",{staticClass:"form__field",class:e.textfieldClasses},[a("input",{attrs:{type:"search",placeholder:e.placeholder,name:e.name,id:e.name,disabled:e.disabled,required:e.required,readonly:e.readonly,autofocus:e.autofocus,autocomplete:e.autocomplete},domProps:{value:e.address},on:{focus:e.onFocus,blur:e.onBlur,input:e.onInput}}),e.showMap?a("div",{staticClass:"form__field--showMap"},[a("a",{attrs:{href:"#",type:"button"},on:{click:function(c){return c.preventDefault(),e.toggleMap(c)}}},[a("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"location"}}),a("span",{domProps:{innerHTML:e._s(e.mapMessage)}})])]):e._e(),a("input",{attrs:{type:"hidden",name:e.name+"__lat"},domProps:{value:e.lat}}),a("input",{attrs:{type:"hidden",name:e.name+"__lng"},domProps:{value:e.lng}})]),e.showMap?a("div",{directives:[{name:"show",rawName:"v-show",value:e.isMapOpen,expression:"isMapOpen"}],staticClass:"form__mapContainer"}):e._e()])},Ng=[];const gi={show:window.$trans("fields.map.show"),hide:window.$trans("fields.map.hide")},Fg="https://maps.googleapis.com/maps/api/js?libraries=places&key=",Ug=window[{}.VUE_APP_NAME].hasOwnProperty("APIKEYS")&&window[{}.VUE_APP_NAME].APIKEYS.hasOwnProperty("googleMapApi")?window[{}.VUE_APP_NAME].APIKEYS.googleMapApi:null,Vg={name:"A17Locationfield",mixins:[rw,Fl,Ul,ow],props:{type:{type:String,default:"text"},zoom:{type:Number,default:15},showMap:{type:Boolean,default:!0},openMap:{type:Boolean,default:!1},saveExtendedData:{type:Boolean,default:!1},autoDetectLatLngValue:{type:Boolean,default:!1},initialLat:{type:Number,default:null},initialLng:{type:Number,default:null}},data:function(){return{map:null,autocompletePlace:null,markers:[],address:"",boundingBox:[],types:[],beforeFocusAddress:"",lat:this.initialLat,lng:this.initialLng,focused:!1,isMapOpen:this.openMap,mapMessage:this.openMap?gi.hide:gi.show}},computed:{value:{get(){const e={latlng:this.lat+"|"+this.lng,address:this.address};return this.saveExtendedData&&(e.boundingBox=this.boundingBox,e.types=this.types),e},set(e){const o=e.latlng.split("|");this.lat=parseFloat(o[0]),this.lng=parseFloat(o[o.length-1]),this.address=e.address,this.saveExtendedData&&(this.boundingBox=e.boundingBox,this.types=e.types)}},textfieldClasses:function(){return{"s--focus":this.focused,"s--disabled":this.disabled}}},methods:{updateFromStore:function(e){if(!Ya(e,this.value)&&(this.value=e,this.clearMarkers(),this.address===""&&(this.lat=this.initialLat,this.lng=this.initialLng),this.lat&&this.lng&&this.map)){const o={lat:this.lat,lng:this.lng};this.addMarker(o),this.map.panTo(o)}},onFocus:function(e){this.focused=!0,this.beforeFocusAddress=this.address,this.$emit("focus")},onBlur:function(e){this.focused=!1,this.address===""&&(this.clearMarkers(),this.lat=this.initialLat,this.lng=this.initialLng),this.beforeFocusAddress!==this.address&&this.saveIntoStore(),this.$emit("blur")},onInput:function(e){const o=e.target.value;if(this.address=o,this.$emit("change",o),this.autoDetectLatLngValue){const a=o.match(/^(-?\d+(?:\.\d+)?),+ *(-?\d+(?:\.\d+)?)$/);a&&this.onLatLngEntered(a[1],a[2])}},onPlaceChanged:function(){const e=this.autocompletePlace.getPlace();if(this.clearMarkers(),this.clearLatLng(),e.geometry){const o=e.geometry.location;this.address=e.formatted_address,this.setLatLng(o),this.saveExtendedData&&(this.boundingBox=e.geometry.viewport,this.types=e.types),this.map&&(this.addMarker(o),this.map.panTo(o),this.map.setZoom(this.zoom))}this.beforeFocusAddress=this.address,this.saveIntoStore()},onClick:function(e){const o=e.latLng;this.clearMarkers(),this.clearLatLng(),this.address=[o.lat(),o.lng()].join(","),this.setLatLng(o),this.map&&this.addMarker(o),this.saveIntoStore()},onLatLngEntered:Ja(function(e,o){const a=new google.maps.LatLng(e,o);this.clearMarkers(),this.clearLatLng(),this.address=[a.lat(),a.lng()].join(","),this.setLatLng(a),this.map&&(this.addMarker(a),this.map.setCenter(a)),this.saveIntoStore()},600),clearMarkers:function(){for(let e=0;e<this.markers.length;e++)this.markers[e]&&this.markers[e].setMap(null);this.markers=[]},clearLatLng:function(){this.lat=0,this.lng=0},addMarker:function(e){const o=new google.maps.Marker({position:e,map:this.map});this.markers.push(o)},setLatLng:function(e){this.lat=e.lat(),this.lng=e.lng()},toggleMap:function(){this.isMapOpen=!this.isMapOpen,this.mapMessage=this.isMapOpen?gi.hide:gi.show,!this.map&&typeof google!="undefined"&&this.$nextTick(function(){this.initMap()})},initMap:function(){const e=this.lat+this.lng,o={zoom:e?this.zoom:1,center:new google.maps.LatLng(this.lat,this.lng),mapTypeControl:!1,panControl:!1,zoomControl:!1,streetViewControl:!1},a=document.createElement("div");a.className="form__map",this.$el.querySelector(".form__mapContainer").appendChild(a),this.map=new google.maps.Map(a,o),e&&this.addMarker(new google.maps.LatLng(this.lat,this.lng)),this.map.addListener("click",this.onClick)},initGeocoder:function(){const e=this;if(this.autocompletePlace=new google.maps.places.Autocomplete(this.$el.querySelector('input[type="search"]')),google.maps.event.addListener(this.autocompletePlace,"place_changed",this.onPlaceChanged),this.address===""&&this.lat&&this.lng){const o=new google.maps.Geocoder,a={lat:this.lat,lng:this.lng};o.geocode({location:a},function(c,m){m==="OK"?c[1]?e.address=c[1].formatted_address:console.error("Geocoding - No results found"):console.error("Geocoding - Geocoder failed due to: "+m)})}},initGoogleApi:function(){this.initGeocoder(),this.showMap&&this.isMapOpen&&this.initMap()}},mounted:function(){if(typeof google!="undefined")this.initGoogleApi();else{const e="google-map-api-script",o=Fg+Ug;sw(e,o,"text/javascript").then(()=>{this.initGoogleApi()})}},beforeDestroy:function(){typeof google!="undefined"&&google.maps.event.clearListeners(this.autocompletePlace,"place_changed",this.onPlaceChanged)}},il={};var Wg=V(Vg,Dg,Ng,!1,zg,"7c2c8a50",null,null);function zg(e){for(let o in il)this[o]=il[o]}var Kg=function(){return Wg.exports}(),Hg=lw,Gg=4;function qg(e){return Hg(e,Gg)}var al=qg,Yg=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("div",[e.keepAlive?[a("div",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}]},[e._t("default")],2)]:[e.open?a("div",[e._t("default")],2):e._e()]],2)},Zg=[];const Xg={name:"A17ConnectorField",props:{fieldName:{type:String,required:!0},requiredFieldValues:{default:""},inModal:{type:Boolean,default:!1},keepAlive:{type:Boolean,default:!1},isValueEqual:{type:Boolean,default:!0},isBrowser:{type:Boolean,default:!1},matchEmptyBrowser:{type:Boolean,default:!1}},computed:{storedValue:function(){return this.inModal?this.modalFieldValueByName(this.fieldName):this.isBrowser?this.selectedBrowser[this.fieldName]:this.fieldValueByName(this.fieldName)},...jt(["fieldValueByName","modalFieldValueByName"]),..._t({fields:e=>e.form.fields,modalFields:e=>e.form.modalFields,selectedBrowser:e=>e.browser.selected})},data:function(){return{open:!1}},watch:{storedValue:function(e){this.toggleVisibility(e)}},methods:{toggleVisibility:function(e){var c;if(this.isBrowser){const m=(c=e&&e.length)!=null?c:0;if(this.matchEmptyBrowser&&m===0){this.open=!0;return}this.open=this.matchEmptyBrowser?!1:m>0;return}const o=al(e),a=al(this.requiredFieldValues);Array.isArray(a)&&a.sort(),Array.isArray(o)&&o.sort(),this.isValueEqual?this.open=Array.isArray(a)?a.indexOf(o)!==-1:Ya(o,a):this.open=Array.isArray(a)?a.indexOf(o)===-1:!Ya(o,a)}},mounted:function(){const e=this;this.$nextTick(function(){e.toggleVisibility(this.storedValue)})}},rl={};var Jg=V(Xg,Yg,Zg,!1,Qg,null,null,null);function Qg(e){for(let o in rl)this[o]=rl[o]}var jg=function(){return Jg.exports}(),t0=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("div",{staticClass:"overlay",class:e.overlayClasses},[a("div",{staticClass:"overlay__window"},[a("header",{staticClass:"overlay__header"},[e.overlayTitle?a("span",[e._v(e._s(e.overlayTitle))]):e._e(),e.$slots.overlay__header?a("span",{staticClass:"overlay__header-slot"},[e._t("overlay__header")],2):e._e(),a("button",{staticClass:"overlay__close",attrs:{type:"button"},on:{click:e.hide}},[a("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"close_modal"}}),a("span",{staticClass:"overlay__closeLabel"},[e._v(e._s(e.$trans("overlay.close")))])])]),e.active?a("div",{directives:[{name:"show",rawName:"v-show",value:!e.hidden,expression:"!hidden"}],staticClass:"overlay__content"},[e._t("default")],2):e._e()])])},e0=[];const Ga=document.documentElement,n0=Qa.overlay,i0=Qa.modal,a0={name:"A17Overlay",props:{title:{type:String,default:""},revisionTitle:{type:String,default:function(){return this.$trans("previewer.revision-history")}},forceClose:{type:Boolean,default:!1},forceLock:{type:Boolean,default:!1},mode:{type:String,default:""},customClasses:{type:[String,Array],default:()=>[]}},data:function(){return{active:!1,hidden:!0,locked:!1}},computed:{toggleClasses(){const e=typeof this.customClasses=="string"?[this.customClasses]:this.customClasses;return[n0].concat(e)},activeRevision:function(){return Object.keys(this.currentRevision).length},overlayTitle:function(){return this.activeRevision?this.revisionTitle:this.title},overlayClasses:function(){return{"overlay--active":this.active,"overlay--hidden":this.hidden}},..._t({currentRevision:e=>e.revision.active})},methods:{open:function(){this.active&&!this.hidden||(this.active=!0,this.hidden=!1,this.toggleClasses.forEach(e=>Ga.classList.add(e)),window.addEventListener("keyup",this.keyPressed),this.$emit("open"))},mask:function(){this.toggleClasses.forEach(e=>Ga.classList.remove(e)),window.removeEventListener("keyup",this.keyPressed),this.$emit("close")},hide:function(){if(!!this.active&&!this.locked){if(this.forceClose){this.close();return}this.hidden=!0,this.mask()}},close:function(e){!this.active||this.locked||(this.active=!1,this.mask())},keyPressed:function(e){if(e.which===27||e.keyCode===27){if(Ga.classList.contains(i0))return;this.hide(),this.$emit("esc-key")}}},beforeDestroy:function(){this.$el.parentNode&&(this.active&&window.removeEventListener("keyup",this.keyPressed),this.$el.parentNode.removeChild(this.$el))}},ol={};var r0=V(a0,t0,e0,!1,o0,"5f30b70e",null,null);function o0(e){for(let o in ol)this[o]=ol[o]}var s0=function(){return r0.exports}(),l0=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("iframe",{staticClass:"previewerframe",style:{width:e.size>0?e.size+"px":""},attrs:{srcdoc:e.content,frameborder:"0"},on:{load:e.loadPreview}})},f0=[];const d0={name:"A17previewerFrame",props:{size:{type:Number,default:0},content:{type:String,default:""},scrollPosition:{type:Number,default:0}},data:function(){return{currentScroll:this.scrollPosition}},watch:{scrollPosition:function(e){this.$el.contentWindow.scrollTo(0,e)}},methods:{loadPreview:function(e){const o=this,a=e.target,c=a.contentDocument.querySelectorAll("a:not(.sf-dump-toggle),button");for(let m=0;m<c.length;m++)c[m].setAttribute("disabled","disabled"),c[m].style.pointerEvents="none",c[m].onclick=function(){return!1};a.contentDocument.addEventListener("scroll",function(m){const b=a.contentWindow.pageYOffset;b!==o.currentScroll&&(o.$emit("scrollDoc",b),o.currentScroll=b)}),this.$el.contentWindow.scrollTo(0,this.currentScroll)}}},sl={};var c0=V(d0,l0,f0,!1,u0,"4637e100",null,null);function u0(e){for(let o in sl)this[o]=sl[o]}var p0=function(){return c0.exports}(),h0=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("a17-overlay",{ref:"overlay",attrs:{title:e.$trans("previewer.title")}},[e.revisions.length?a("div",{staticClass:"previewer",class:{"previewer--loading":e.loading}},[e.activeRevision?a("a17-button",{staticClass:"previewer__restore",attrs:{variant:"warning",size:"small"},on:{click:e.restoreRevision}},[e._v(e._s(e.$trans("previewer.restore")))]):e._e(),!e.activeRevision&&e.editor?a("a17-button",{staticClass:"previewer__restore",attrs:{variant:"editor",size:"small"},on:{click:e.openEditor}},[a("span",{directives:[{name:"svg",rawName:"v-svg"}],staticClass:"hide--xsmall",attrs:{symbol:"editor"}}),e._v(e._s(e.$trans("previewer.editor")))]):e._e(),a("div",{staticClass:"previewer__frame"},[a("div",{staticClass:"previewer__inner"},[a("div",{staticClass:"previewer__nav"},[a("div",{staticClass:"previewer__revisions"},[e.slipScreen?a("span",{staticClass:"tag tag--revision"},[e._v(e._s(e.$trans("previewer.past-revision")))]):e._e(),a("a17-dropdown",{ref:"previewRevisionsDropdown",attrs:{position:"bottom-left",maxWidth:400,maxHeight:300}},[a("a17-button",{staticClass:"previewer__trigger",on:{click:function(c){return e.$refs.previewRevisionsDropdown.toggle()}}},[e.activeRevision?[e._v(" "+e._s(e._f("formatDate")(e.currentRevision.datetime))+" ("+e._s(e.currentRevision.author)+") "),a("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"dropdown_module"}})]:[e._v(" "+e._s(e.$trans("previewer.last-edit"))+" "),a("timeago",{attrs:{"auto-update":1,datetime:new Date(e.revisions[0].datetime)}}),e._v(" "),a("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"dropdown_module"}})]],2),a("div",{attrs:{slot:"dropdown__content"},slot:"dropdown__content"},e._l(e.revisions,function(c){return a("button",{key:c.id,staticClass:"previewerRevision",class:{"previewerRevision--active":e.currentRevision.id===c.id},attrs:{type:"button"},on:{click:function(m){return e.toggleRevision(c.id)}}},[a("span",{staticClass:"previewerRevision__author"},[e._v(e._s(c.author))]),a("span",{staticClass:"previewerRevision__datetime"},[c.label?a("span",{staticClass:"tag"},[e._v(e._s(c.label))]):e._e(),e._v(" "+e._s(e._f("formatDate")(c.datetime)))])])}),0)],1)],1),e.slipScreen?e._e():a("ul",{staticClass:"previewer__breakpoints"},e._l(e.breakpoints,function(c){return a("li",{key:c.size,staticClass:"previewer__breakpoint",class:{"s--active":e.activeBreakpoint===c.size}},[a("a",{attrs:{href:"#"},on:{click:function(m){return m.preventDefault(),e.resizePreview(c.size)}}},[a("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:c.name}})])])}),0),e.activeRevision?a("div",{staticClass:"previewer__compare"},[e.slipScreen?a("a",{attrs:{href:"#"},on:{click:function(c){return c.preventDefault(),e.singleView(c)}}},[a("span",{staticClass:"previewer__compareLabel"},[e._v(e._s(e.$trans("previewer.single-view")))]),e._v(" "),a("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"revision-single"}})]):a("a",{attrs:{href:"#"},on:{click:function(c){return c.preventDefault(),e.compareView(c)}}},[a("span",{staticClass:"previewer__compareLabel"},[e._v(e._s(e.$trans("previewer.compare-view")))]),e._v(" "),a("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"revision-compare"}})])]):e._e()]),a("div",{staticClass:"previewer__content"},[a("div",{staticClass:"previewer__iframe"},[a("a17-iframe",{attrs:{content:e.activeRevision?e.activeContent:e.currentContent,size:e.activeBreakpoint,scrollPosition:e.scrollPosition},on:{scrollDoc:e.setIframeScroll}})],1),e.slipScreen?a("div",{staticClass:"previewer__iframe"},[a("div",{staticClass:"previewer__iframeInfos"},[a("span",{staticClass:"tag tag--revision"},[e._v(e._s(e.$trans("previewer.current-revision")))]),e._v(e._s(e.$trans("previewer.unsaved")))]),a("a17-iframe",{attrs:{content:e.currentContent,scrollPosition:e.scrollPosition},on:{scrollDoc:e.setIframeScroll}})],1):e._e()])])])],1):e._e()])},m0=[];const _0={name:"A17Previewer",components:{"a17-iframe":p0},data:function(){return{loadedCurrent:!1,slipScreen:!1,activeBreakpoint:1280,lastActiveBreakpoint:1280,scrollPosition:0,breakpoints:[{size:1280,name:"preview-desktop"},{size:1024,name:"preview-tablet-h"},{size:768,name:"preview-tablet-v"},{size:320,name:"preview-mobile"}]}},filters:Me,computed:{activeRevision:function(){return Object.keys(this.currentRevision).length},..._t({editor:e=>e.blocks.editor,loading:e=>e.revision.loading,currentRevision:e=>e.revision.active,activeContent:e=>e.revision.activeContent,currentContent:e=>e.revision.currentContent,revisions:e=>e.revision.all,restoreRevisionUrl:e=>e.form.restoreUrl})},methods:{open:function(e=0){const o=this;this.loadedCurrent=!1,this.activeBreakpoint=1280,this.lastActiveBreakpoint=1280;function a(){o.$refs.overlay&&o.$refs.overlay.open(),o.singleView()}e?this.previewRevision(e,function(){a()}):this.previewCurrent(function(){a()})},close:function(){this.$refs.overlay.close()},openEditor:function(){const e=this.$root.$refs;e.preview&&e.preview.close(),e.editor&&e.editor.open()},restoreRevision:function(){window.location.href=this.restoreRevisionUrl+"?revisionId="+this.currentRevision.id},resizePreview:function(e){this.activeBreakpoint=parseInt(e),this.lastActiveBreakpoint=parseInt(e)},previewCurrent:function(e){this.$store.commit(Ht.UPDATE_REV,0),this.loadCurrent(e)},loadCurrent:function(e){if(this.loadedCurrent){e&&typeof e=="function"&&e();return}this.loadedCurrent=!0,this.$store.dispatch(mt.GET_CURRENT).then(()=>{e&&typeof e=="function"&&e()},o=>{this.$store.commit(nt.SET_FORM_ERRORS,o.response.data),this.$store.commit(En.SET_NOTIF,{message:"Your submission could not be validated, please fix and retry",variant:"error"})})},toggleRevision:function(e){if(this.activeRevision&&this.currentRevision.id===e){this.singleView(),this.previewCurrent();return}this.previewRevision(e)},previewRevision:function(e,o){this.$store.commit(Ht.UPDATE_REV,e),this.$store.dispatch(mt.GET_REVISION).then(()=>{o&&typeof o=="function"&&o()},a=>{this.$store.commit(En.SET_NOTIF,{message:"Invalid revision.",variant:"error"})})},compareView:function(){this.activeBreakpoint=0,this.slipScreen=!0,this.activeRevision&&this.loadCurrent()},singleView:function(){this.activeBreakpoint=this.lastActiveBreakpoint,this.slipScreen=!1},setIframeScroll:function(e){this.scrollPosition=e}}},ll={};var w0=V(_0,h0,m0,!1,v0,"a1761140",null,null);function v0(e){for(let o in ll)this[o]=ll[o]}var g0=function(){return w0.exports}(),x0=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("div",{staticClass:"editorSidebar__item"},[a("div",{staticClass:"editorSidebar__title"},[a("div",{staticClass:"editorSidebar__blockTitle"},[a("a17-dropdown",{ref:"blockDropdown",staticClass:"f--small",attrs:{position:"bottom-left",maxHeight:270}},[a("span",{staticClass:"editorSidebar__counter f--tiny",on:{click:e.toggleBlockDropdown}},[e._v(e._s(e.blockIndex+1))]),a("div",{attrs:{slot:"dropdown__content"},slot:"dropdown__content"},e._l(e.blocksLength,function(c){return a("button",{key:c,attrs:{type:"button"},on:{click:function(m){return e.moveBlock(c-1)}}},[e._v(" "+e._s(c)+" ")])}),0)]),e._v(" "+e._s(e.block.title)+" ")],1),a("span",[a("a",{staticClass:"f--small f--note f--underlined",attrs:{href:"#"},on:{click:function(c){return c.preventDefault(),e.deleteBlock(c)}}},[e._v(e._s(e.$trans("editor.delete")))])])]),a("div",{staticClass:"editorSidebar__body"},[a("a17-inputframe",{attrs:{label:"",name:"block."+e.block.id}}),[a(""+e.block.type,e._b({key:"`editor_${block.type}_${block.id}`",tag:"component",attrs:{name:"blocks["+e.block.id+"]"}},"component",e.setBlockAttributes(e.block.attributes),!1))]],2)])},b0=[];const y0={name:"A17EditorSidebarBlockItem",mixins:[Yl],methods:{setBlockAttributes(e){return{keepAlive:!0,...e}}}},fl={};var I0=V(y0,x0,b0,!1,k0,"53a05d26",null,null);function k0(e){for(let o in fl)this[o]=fl[o]}var E0=function(){return I0.exports}(),A0=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("div",{staticClass:"editorSidebar__listItems"},[a("draggable",{staticClass:"editorSidebar__blocks",class:e.editorSidebarClasses,attrs:{options:{group:{name:"editorBlocks",pull:"clone",put:!1},handle:".editorSidebar__button"}},model:{value:e.blocks,callback:function(c){e.blocks=c},expression:"blocks"}},e._l(e.blocks,function(c){return a("div",{key:c.component,staticClass:"editorSidebar__button",attrs:{"data-title":c.title,"data-icon":c.icon,"data-component":c.component}},[a("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:e.iconSymbol(c.icon)}}),a("span",{staticClass:"editorSidebar__buttonLabel"},[e._v(e._s(c.title))])])}),0)],1)},S0=[];const C0={name:"A17EditorSidebarBlockList",props:{blocks:{type:Array,default:()=>[]},inFieldset:{type:Boolean,default:!1}},mixins:[yi],components:{draggable:bi},computed:{editorSidebarClasses(){return{"editorSidebar__blocks--in-fieldset":this.inFieldset}}},methods:{iconSymbol:function(e){return this.hasLgIconVariation(e)?`${e}-lg`:e},hasLgIconVariation:function(e){return Boolean(document.querySelector(`#icon--${e}-lg`))}}},dl={};var B0=V(C0,A0,S0,!1,$0,"3cf6ff23",null,null);function $0(e){for(let o in dl)this[o]=dl[o]}var P0=function(){return B0.exports}(),R0=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("div",{staticClass:"editorSidebar"},[a("div",{directives:[{name:"show",rawName:"v-show",value:e.hasBlockActive,expression:"hasBlockActive"}]},[a("a17-blocks-list",{attrs:{"editor-name":e.editorName},scopedSlots:e._u([{key:"default",fn:function(c){var m=c.allSavedBlocks;return[a("div",{staticClass:"editorSidebar__edit-list"},e._l(m,function(b){return a("a17-blockeditor-model",{key:b.id,attrs:{block:b,"editor-name":e.editorName},scopedSlots:e._u([{key:"default",fn:function(E){var B=E.block,R=E.isActive,z=E.blockIndex,G=E.move,Q=E.remove,ct=E.unEdit;return[a("div",{staticClass:"editorSidebar__edit-block"},[a("a17-sidebar-block-item",{directives:[{name:"show",rawName:"v-show",value:R,expression:"isActive"}],attrs:{block:B,blockIndex:z,blocksLength:m.length},on:{"block:move":G,"block:delete":function(ot){return e.deleteBlock(Q)}}}),a("div",{staticClass:"editorSidebar__actions"},[a("a17-button",{attrs:{variant:"action"},on:{click:function(ot){return e.saveBlock(ct,z)}}},[e._v(" "+e._s(e.$trans("editor.done"))+" ")]),a("a17-button",{attrs:{variant:"secondary"},on:{click:function(ot){return e.cancelBlock(ct,z)}}},[e._v(" "+e._s(e.$trans("editor.cancel"))+" ")])],1)],1)]}}],null,!0)})}),1)]}}])})],1),e.hasBlockActive?e._e():[a("div",{staticClass:"editorSidebar__list"},[a("a17-sidebar-block-list",{attrs:{blocks:e.blocks}})],1),a("div",{staticClass:"editorSidebar__actions"},[e.isSubmitDisabled(e.submitOptions[0])?a("a17-button",{attrs:{variant:"validate",disabled:!0}},[e._v(e._s(e.submitOptions[0].text))]):a("a17-button",{attrs:{name:e.submitOptions[0].name,variant:"validate"},on:{click:function(c){return e.saveForm(e.submitOptions[0].name)}}},[e._v(e._s(e.submitOptions[0].text))])],1)]],2)},M0=[];const T0={name:"A17editorSidebar",props:{hasBlockActive:{type:Boolean,default:!1},activeBlock:{type:Object,default:()=>{}},editorName:{type:String,required:!0},editorNames:{type:Array,default:()=>[]}},components:{"a17-sidebar-block-item":E0,"a17-sidebar-block-list":P0,"a17-blocks-list":tr,"a17-blockeditor-model":er},mixins:[Zl],computed:{submitOptions(){return this.$store.getters.getSubmitOptions}},methods:{isSubmitDisabled:function(e){return e.hasOwnProperty("disabled")?e.disabled===!0:!1},saveForm(e){this.$store.commit(ht.UPDATE_SAVE_TYPE,e),this.$root.submitForm&&this.$root.submitForm()}}},cl={};var O0=V(T0,R0,M0,!1,L0,"c508d52a",null,null);function L0(e){for(let o in cl)this[o]=cl[o]}var D0=function(){return O0.exports}(),N0=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("div",{staticClass:"editorIframe"},[e.preview===""?a("div",{staticClass:"editorIframe__empty"},[e._v(" "+e._s(e.title)+" ")]):[e.sandbox?a("iframe",{ref:"frame",attrs:{srcdoc:e.preview,sandbox:e.sandboxOptions,scrolling:"no"},on:{load:e.loadedPreview}}):a("iframe",{ref:"frame",attrs:{srcdoc:e.preview,scrolling:"no"},on:{load:e.loadedPreview}})]],2)},F0=[];const U0={name:"A17editorIframe",props:{block:{type:Object,default:function(){return{}}}},computed:{preview(){return this.previewsById(this.block.id)||""},title(){return this.block.title||""},sandboxOptions(){return typeof this.sandbox=="boolean"?"allow-same-origin allow-top-navigation allow-scripts":this.sandbox.join(" ")},...jt(["previewsById"])},inject:["sandbox"],methods:{loadedPreview(){this.$refs.frame&&this.$refs.frame.srcdoc&&(this.$emit("loaded",this.$refs.frame),this.resize())},resize(){if(!this.$refs.frame)return;const e=this.$refs.frame.contentWindow.document.body;e.style.overflow="hidden";const o=window.getComputedStyle(e),a=o.getPropertyValue("margin-top"),c=o.getPropertyValue("margin-bottom"),m=e.scrollHeight+parseInt(a)+parseInt(c);window.requestAnimationFrame(()=>{this.$refs.frame.height=m+"px"})}},mounted(){window.addEventListener("resize",this.resize)},beforeDestroy(){window.removeEventListener("resize",this.resize)}},ul={};var V0=V(U0,N0,F0,!1,W0,"70b0929a",null,null);function W0(e){for(let o in ul)this[o]=ul[o]}var z0=function(){return V0.exports}(),K0=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("div",{staticClass:"editorPreview__item",class:e.previewBlockItemClasses,on:{mousedown:function(c){c.stopPropagation()}}},[a("div",{staticClass:"editorPreview__frame"},[a("a17-editor-iframe",{ref:"blockIframe",attrs:{block:e.block},on:{loaded:e.iframeLoaded}})],1),a("div",{staticClass:"editorPreview__protector editorPreview__dragger",on:{click:function(c){return c.preventDefault(),e.handleBlockPreviewClick(c)}}}),a("div",{staticClass:"editorPreview__header"},[a("a17-buttonbar",{attrs:{variant:"visible"}},[e.blocksLength>1?a("a17-dropdown",{ref:"blockDropdown",staticClass:"f--small",attrs:{position:"bottom-left",maxHeight:270},on:{open:e.handleDropDownOpen,close:e.handleDropDownClose}},[a("button",{attrs:{type:"button"},on:{click:function(c){return e.toggleBlockDropdown(e.blockIndex)}}},[a("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"drag"}})]),a("div",{attrs:{slot:"dropdown__content"},slot:"dropdown__content"},e._l(e.blocksLength,function(c){return a("button",{key:c,attrs:{type:"button"},on:{click:function(m){return e.moveBlock(c-1)}}},[e._v(" "+e._s(c)+" ")])}),0)]):e._e(),a("button",{attrs:{type:"button"},on:{click:e.deleteBlock}},[a("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"trash"}})])],1)],1)])},H0=[];const G0={name:"A17EditorPreviewBlockItem",props:{isBlockActive:{type:Boolean,default:!1}},mixins:[Yl],components:{"a17-editor-iframe":z0},data(){return{dropdownOpen:!1}},computed:{previewBlockItemClasses(){return{"editorPreview__item--active":this.isBlockActive,"editorPreview__item--dropdown-open":this.dropdownOpen}}},methods:{handleBlockPreviewClick(){this.isBlockActive?this.unselectBlock():this.selectBlock()},handleDropDownOpen(){this.dropdownOpen=!0},handleDropDownClose(){this.dropdownOpen=!1},iframeLoaded(){!this.isBlockActive||this.$nextTick(()=>{this.$emit("scroll-to",this.$el.offsetTop)})}},beforeDestroy(){this.unselectBlock()}},pl={};var q0=V(G0,K0,H0,!1,Y0,"2a30a643",null,null);function Y0(e){for(let o in pl)this[o]=pl[o]}var Z0=function(){return q0.exports}(),X0=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("a17-blockeditor-model",{attrs:{"editor-name":e.editorName},scopedSlots:e._u([{key:"default",fn:function(c){var m=c.add,b=c.edit,E=c.unEdit;return[a("div",{staticClass:"editorPreview",class:e.previewClass,style:e.previewStyle,on:{mousedown:function(B){return e._unselectBlock(E)}}},[e.blocks.length?e._e():a("div",{staticClass:"editorPreview__empty"},[a("b",[e._v(e._s(e.$trans("previewer.drag-and-drop","Drag and drop content from the left navigation")))])]),a("draggable",{ref:"previewContent",staticClass:"editorPreview__content",attrs:{value:e.blocks,options:{group:"editorBlocks",handle:e.handle}},on:{add:function(B){return e.onAdd(m,b,B)},update:e.onUpdate}},[e._l(e.blocks,function(B){return[a("a17-blockeditor-model",{key:B.id,attrs:{block:B,"editor-name":e.editorName},scopedSlots:e._u([{key:"default",fn:function(R){var z=R.block,G=R.isActive,Q=R.blockIndex,ct=R.move,ot=R.remove,qt=R.edit,ue=R.unEdit;return[a("a17-editor-block-preview",{key:B.id,ref:z.id,refInFor:!0,attrs:{block:z,blockIndex:Q,blocksLength:e.blocks.length,isBlockActive:G},on:{"block:select":function(st){return e._selectBlock(qt,Q)},"block:unselect":function(st){return e._unselectBlock(ue,Q)},"block:move":ct,"block:delete":function(st){return e._deleteBlock(ot)},"scroll-to":e.scrollToActive}})]}}],null,!0)})]})],2),e.loading?a("a17-spinner",{attrs:{visible:!0}},[e._v(e._s(e.$trans("fields.block-editor.loading","Loading"))+"\u2026 ")]):e._e()],1)]}}])})},J0=[];const Q0={name:"A17editorPreview",props:{bgColor:{type:String,default:"#FFFFFF"},hasBlockActive:{props:{type:Boolean,default:!1}}},mixins:[yi,Zl],components:{draggable:bi,"a17-editor-block-preview":Z0,"a17-blockeditor-model":er,"a17-spinner":zl},data(){return{loading:!1,blockSelectIndex:-1,handle:".editorPreview__dragger"}},computed:{previewClass(){return{"editorPreview--dark":fw(this.bgColor).getBrightness()<180,"editorPreview--loading":this.loading}},previewStyle(){return{"background-color":this.bgColor}}},methods:{onAdd(e,o,a){const{item:c}=a,m={};m.title=c.getAttribute("data-title"),m.component=c.getAttribute("data-component"),m.icon=c.getAttribute("data-icon");const b=Math.max(0,a.newIndex);this.addAndEditBlock(e,o,{block:m,index:b}),this._selectBlock(null,b)},onUpdate({oldIndex:e,newIndex:o}){this.$emit("blocks:move",{oldIndex:e,newIndex:o})},_selectBlock(e=null,o){e&&this.selectBlock(e,o),this.blockSelectIndex!==o&&(this.unSubscribe(),this.blockSelectIndex=o,this._unSubscribeInternal=this.$store.subscribe(a=>{Ns.REFRESH_BLOCK_PREVIEW.includes(a.type)&&(Ns.REFRESH_BLOCK_PREVIEW_ALL.includes(a.type)?this.getAllPreviews():this.getPreview(o))}))},_unselectBlock(e,o=this.blockSelectIndex){this.unSubscribe(),this.getPreview(o),this.unselectBlock(e,o),this.blockSelectIndex=-1},_deleteBlock(e){this.unSubscribe(),this.deleteBlock(e)},unSubscribe(){!this._unSubscribeInternal||(this._unSubscribeInternal(),this._unSubscribeInternal=null)},getAllPreviews(){this.loading=!0,this.$store.dispatch(mt.GET_ALL_PREVIEWS,{editorName:this.editorName}).then(()=>{this.$nextTick(()=>{this.loading=!1})})},getPreview(e=-1){this.loading=!0,this.$store.dispatch(mt.GET_PREVIEW,{editorName:this.editorName,index:e}).then(()=>{this.$nextTick(()=>{this.loading=!1})})},scrollToActive(e){this.$refs.previewContent.$el.scrollTop=Math.max(0,e-20)},resizeAllIframes(){!this.$refs.blockPreview||this.$refs.blockPreview.forEach(e=>{e.$refs.blockIframe.resize()})},_resize:Ja(function(){this.resizeAllIframes()},200),init(){window.addEventListener("resize",this._resize)},dispose(){window.removeEventListener("resize",this._resize)}},mounted(){this.init(),this.$nextTick(()=>{this.getAllPreviews()})},beforeDestroy(){this.dispose()},watch:{editorName(){this.unSubscribe(),this.getAllPreviews()},hasBlockActive(e){e||(this.unSubscribe(),this.blockSelectIndex=-1)}}},hl={};var j0=V(Q0,X0,J0,!1,tx,"679583f6",null,null);function tx(e){for(let o in hl)this[o]=hl[o]}var ex=function(){return j0.exports}(),nx=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("a17-overlay",{ref:"overlay",attrs:{title:e.$trans("editor.title"),customClasses:e.htmlEditorClass},on:{close:e.close},scopedSlots:e._u([e.editorNames.length>1?{key:"overlay__header",fn:function(){return[a("a17-dropdown",{ref:"editorDropdown",attrs:{position:"bottom-left",maxWidth:400,maxHeight:300}},[a("a17-button",{staticClass:"editorDropdown__trigger",on:{click:function(c){return e.$refs.editorDropdown.toggle()}}},[e._v(" "+e._s(e.currentEditorLabel)+" "),a("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"dropdown_module"}})]),a("div",{attrs:{slot:"dropdown__content"},slot:"dropdown__content"},e._l(e.editorNames,function(c){return a("button",{key:c.value,staticClass:"editorDropdown",attrs:{type:"button"},on:{click:function(m){return e.updateEditorName(c.value)}}},[e._v(" "+e._s(c.label)+" ")])}),0)],1)]},proxy:!0}:null],null,!0)},[a("a17-blocks-list",{attrs:{"editor-name":e.editorName},scopedSlots:e._u([{key:"default",fn:function(c){var m=c.availableBlocks,b=c.hasBlockActive,E=c.savedBlocks,B=c.editorNames,R=c.moveBlock;return[a("div",{staticClass:"editor"},[e.revisions.length?a("a17-button",{staticClass:"editor__leave",attrs:{variant:"editor",size:"small"},on:{click:e.openPreview}},[a("span",{directives:[{name:"svg",rawName:"v-svg"}],staticClass:"hide--xsmall",attrs:{symbol:"preview"}}),e._v(e._s(e.$trans("fields.block-editor.preview","Preview"))+" ")]):e._e(),a("div",{staticClass:"editor__frame"},[a("div",{staticClass:"editor__inner"},[a("div",{ref:"sidebar",staticClass:"editor__sidebar"},[a("a17-editorsidebar",{attrs:{"editor-name":e.editorName,hasBlockActive:b,editorNames:B,blocks:m},on:{"editorName:update":e.updateEditorName}},[e._v(" "+e._s(e.$trans("fields.block-editor.add-content","Add content"))+" ")])],1),a("div",{staticClass:"editor__resizer",on:{mousedown:e.resize}},[a("span")]),a("div",{staticClass:"editor__preview"},[e.editorOpen?a("a17-editorpreview",{ref:"previews",attrs:{"editor-name":e.editorName,blocks:E,hasBlockActive:b,sandbox:e.previewSandbox,bgColor:e.bgColor},on:{"blocks:move":R}}):e._e()],1)])])],1)]}}])})],1)},ix=[];const ax={name:"A17Editor",components:{"a17-editorsidebar":D0,"a17-editorpreview":ex,"a17-blocks-list":tr},props:{bgColor:{type:String,default:"#FFFFFF"},previewSandbox:{type:[Boolean,Array],default:!0}},data(){return{editorName:null,editorOpen:!1,htmlEditorClass:Qa.editor}},computed:{currentEditorLabel(){const e=this.editorNames&&this.editorNames.find(o=>o.value===this.editorName);return e&&e.label},..._t({revisions:e=>e.revision.all,editorNamesBase:e=>e.blocks.editorNames}),...jt(["blocks"]),editorNames(){return this.editorNamesBase.filter(e=>e.nested===!1)}},provide(){return{sandbox:this.previewSandbox}},methods:{initEditorName(){if(!this.editorName){const e=this.editorNames[0]&&this.editorNames[0].value;this.updateEditorName(e)}},updateEditorName(e){this.editorName!==e&&(this.editorName=e)},open(e,o=!1){o&&this.updateEditorName(o),this.editorOpen=!0,this.$refs.overlay.open()},close(){this.editorOpen=!1},resize(){window.addEventListener("mousemove",this.resizeSidebar,!1),window.addEventListener("mouseup",this.stopResizeSidebar,!1)},resizeSidebar(e){const o=this.$refs.sidebar,a=window.innerWidth;o&&(o.style.width=(e.clientX-o.offsetLeft)/a*100+"%")},stopResizeSidebar(){window.removeEventListener("mousemove",this.resizeSidebar,!1),window.removeEventListener("mouseup",this.stopResizeSidebar,!1),this.$refs.previews.resizeAllIframes()},openPreview(){this.$root.$refs.preview&&this.$root.$refs.preview.open()}},created(){this.initEditorName()}},ml={};var rx=V(ax,nx,ix,!1,ox,"21e4e83e",null,null);function ox(e){for(let o in ml)this[o]=ml[o]}var sx=function(){return rx.exports}(),lx=function(){var e=this,o=e.$createElement,a=e._self._c||o;return a("a17-modal",{ref:"modal",staticClass:"modal--form",attrs:{title:e.modalTitle,forceClose:!0}},[a("form",{attrs:{action:e.formCreate},on:{submit:function(c){return c.preventDefault(),e.submit(c)}}},[e._t("default"),a("a17-modal-validation",{attrs:{"is-disable":!0}})],2)])},fx=[];const dx={name:"A17ModalAdd",mixins:[Gl],props:{name:{type:String,default:""},modalTitle:{type:String,default:"Add new"},formCreate:{type:String,default:"#"}},components:{"a17-modal-validation":ja},methods:{open:function(){this.$refs.modal&&this.$refs.modal.open()},submit:function(){if(this.isSubmitPrevented){this.shouldRetrySubmitWhenAllowed=!0;return}if(this._isSubmitting)return;this._isSubmitting=!0;const e=this;this.$store.commit(nt.UPDATE_FORM_LOADING,!0);const o=document.activeElement.name;this.$nextTick(function(){this.$store.dispatch(mt.CREATE_FORM_IN_MODAL,{name:this.name,endpoint:this.formCreate,method:"post"}).then(()=>{e.$refs.modal&&e.$refs.modal.close(),e.$nextTick(function(){e.$store.commit(En.SET_NOTIF,{message:"Your content has been added",variant:"success"}),o==="create-another"&&e.$refs.modal&&e.$refs.modal.open()})},a=>{e.$store.commit(En.SET_NOTIF,{message:"Your content can not be added, please retry",variant:"error"})})})}}},_l={};var cx=V(dx,lx,fx,!1,ux,null,null,null);function ux(e){for(let o in _l)this[o]=_l[o]}var px=function(){return cx.exports}();const hx={withPublicationToggle:window[{}.VUE_APP_NAME].STORE.publication.withPublicationToggle||!1,published:window[{}.VUE_APP_NAME].STORE.publication.published||!1,publishSubmit:window[{}.VUE_APP_NAME].STORE.publication.published||!window[{}.VUE_APP_NAME].STORE.publication.withPublicationToggle?"update":"live",publishedLabel:window[{}.VUE_APP_NAME].STORE.publication.publishedLabel||"Live",draftLabel:window[{}.VUE_APP_NAME].STORE.publication.draftLabel||"Draft",expiredLabel:window[{}.VUE_APP_NAME].STORE.publication.expiredLabel||"Expired",scheduledLabel:window[{}.VUE_APP_NAME].STORE.publication.scheduledLabel||"Scheduled",withPublicationTimeframe:window[{}.VUE_APP_NAME].STORE.publication.withPublicationTimeframe||!1,startDate:window[{}.VUE_APP_NAME].STORE.publication.startDate||null,endDate:window[{}.VUE_APP_NAME].STORE.publication.endDate||null,visibility:window[{}.VUE_APP_NAME].STORE.publication.visibility||!1,reviewProcess:window[{}.VUE_APP_NAME].STORE.publication.reviewProcess||[],userInfo:window[{}.VUE_APP_NAME].STORE.publication.userInfo||null,createWithoutModal:window[{}.VUE_APP_NAME].STORE.publication.createWithoutModal||!1,hasUnsavedChanges:!1,saveType:void 0,visibilityOptions:[{value:"public",label:"Public"},{value:"private",label:"Private"}],submitDisableMessage:window[{}.VUE_APP_NAME].STORE.publication.submitDisableMessage||"",submitOptions:window[{}.VUE_APP_NAME].STORE.publication.submitOptions||{draft:[{name:"save",text:window.$trans("publisher.save","Save as draft"),disabled:!1},{name:"save-close",text:window.$trans("publisher.save-close","Save as draft and close"),disabled:!1},{name:"save-new",text:window.$trans("publisher.save-new","Save as draft and create new"),disabled:!1},{name:"cancel",text:window.$trans("publisher.cancel","Cancel"),disabled:!1}],live:[{name:"publish",text:window.$trans("publisher.publish","Publish"),disabled:!1},{name:"publish-close",text:window.$trans("publisher.publish-close","Publish and close"),disabled:!1},{name:"publish-new",text:window.$trans("publisher.publish-new","Publish and create new"),disabled:!1},{name:"cancel",text:window.$trans("publisher.cancel","Cancel"),disabled:!1}],update:[{name:"update",text:window.$trans("publisher.update","Update"),disabled:!1},{name:"update-close",text:window.$trans("publisher.update-close","Update and close"),disabled:!1},{name:"update-new",text:window.$trans("publisher.update-new","Update and create new"),disabled:!1},{name:"cancel",text:window.$trans("publisher.cancel","Cancel"),disabled:!1}]}},mx={reviewProcessComplete:e=>e.reviewProcess.filter(o=>o.checked),getSubmitOptions:e=>e.published||!e.withPublicationToggle?e.submitOptions[e.publishSubmit]:e.submitOptions.draft,isEnabledSubmitOption:(e,o)=>a=>{let c=!0,m={};const b=o.getSubmitOptions.filter(E=>E.name===a);return b.length&&(m=b[0]),m.hasOwnProperty("disabled")&&(c=!m.disabled),c},getSaveType:(e,o)=>e.saveType||o.getSubmitOptions[0].name},_x={[ht.UPDATE_PUBLISH_START_DATE](e,o){e.startDate=o},[ht.UPDATE_PUBLISH_END_DATE](e,o){e.endDate=o},[ht.UPDATE_PUBLISH_STATE](e,o){e.published=o},[ht.UPDATE_PUBLISH_SUBMIT](e){e.publishSubmit=e.published||!e.withPublicationToggle?"update":"live"},[ht.UPDATE_PUBLISH_VISIBILITY](e,o){e.visibility=o},[ht.UPDATE_REVIEW_PROCESS](e,o){let a="",c=-1;o.length&&(a=o[o.length-1],e.reviewProcess.forEach(function(m,b){m.value===a&&(c=b)})),e.reviewProcess.forEach(function(m,b){m.checked=b<=c,m.disabled=!(b===c||b===c+1)})},[ht.UPDATE_SAVE_TYPE](e,o){e.saveType=o},[ht.UPDATE_HAS_UNSAVED_CHANGES](e,o){e.hasUnsavedChanges=o}};var wx={state:hx,getters:mx,mutations:_x},vx={getBlockPreview(e,o,a,c){Kl.post(e,o).then(function(m){a&&typeof a=="function"&&a(m.data)},function(m){Hl("CONTENT",{message:"Block preview request error.",value:m}),c&&typeof c=="function"&&c(m)})}};const gx={loading:!1,editor:window[{}.VUE_APP_NAME].STORE.form.editor||!1,editorNames:window[{}.VUE_APP_NAME].STORE.form.editorNames||[],available:window[{}.VUE_APP_NAME].STORE.form.availableBlocks||{},blocks:window[{}.VUE_APP_NAME].STORE.form.blocks||{},previews:window[{}.VUE_APP_NAME].STORE.form.previews||{},active:{}},xx={previewsById:e=>o=>e.previews[o]?e.previews[o]:"",blocks:e=>o=>e.blocks[o]||[],availableBlocks:e=>o=>e.available[o]||[],blockIndex:(e,o)=>(a,c)=>o.blocks(c).findIndex(m=>m.id===a.id)},bx=()=>Date.now(),yx={[J.ADD_BLOCK](e,{block:o,index:a,editorName:c}){const m=e.blocks[c]||[],b={...o,id:bx(),name:c};b.twillUi={},b.twillUi.isNew=!0,a>-1?m.splice(a,0,b):m.push(b),F.set(e.blocks,c,m)},[J.MOVE_BLOCK](e,{editorName:o,newIndex:a,oldIndex:c}){const m=e.blocks[o]||[];if(a>=m.length){let b=a-m.length;for(;b--+1;)m.push(void 0)}m.splice(a,0,m.splice(c,1)[0]),F.set(e.blocks,o,m)},[J.DELETE_BLOCK](e,{editorName:o,index:a}){const c=e.blocks[o][a].id,m=e.blocks[o]||[];c&&F.delete(e.previews,c),m.splice(a,1),F.set(e.blocks,o,m)},[J.DUPLICATE_BLOCK](e,{editorName:o,index:a,block:c,id:m}){const b=e.blocks[o]||[];b.splice(a,0,{...c,id:m,name:o}),F.set(e.blocks,o,b)},[J.REORDER_BLOCKS](e,{editorName:o,value:a}){F.set(e.blocks,o,a)},[J.ACTIVATE_BLOCK](e,{editorName:o,index:a}){e.blocks[o]&&e.blocks[o][a]?e.active={...e.blocks[o][a]}:e.active={}},[J.ADD_BLOCK_PREVIEW](e,o){F.set(e.previews,o.id,o.html)},[J.UPDATE_PREVIEW_LOADING](e,o){e.loading=!e.loading}},wl=(e,o,a,c)=>{if(e&&e.hasOwnProperty("id")){const m=dw(e,a);a.language.all.length>1&&(m.activeLanguage=a.language.active.value),cw(m)?(o(J.ADD_BLOCK_PREVIEW,{id:e.id,html:""}),c&&typeof c=="function"&&c()):vx.getBlockPreview(a.form.blockPreviewUrl,m,b=>{o(J.ADD_BLOCK_PREVIEW,{id:e.id,html:b}),c&&typeof c=="function"&&c()},b=>{})}},Ix={[mt.GET_PREVIEW]({commit:e,state:o,rootState:a},{editorName:c,index:m=-1}){let b=o.blocks[c]&&m>=0?{...o.blocks[c][m]}:{};o.active&&o.active.hasOwnProperty("id")&&m===-1&&(b={...o.active}),wl(b,e,a)},[mt.GET_ALL_PREVIEWS]({commit:e,state:o,rootState:a},{editorName:c}){if(o.blocks[c]&&o.blocks[c].length>0&&!o.loading){e(J.UPDATE_PREVIEW_LOADING,!0);let m=0;const b=o.blocks[c].length;Object.values(o.blocks[c]).forEach(E=>{wl(E,e,a,()=>{m++,m===b&&e(J.UPDATE_PREVIEW_LOADING,!0)})})}},async[mt.DUPLICATE_BLOCK]({commit:e,state:o,rootState:a},{editorName:c,futureIndex:m,block:b,id:E}){e(J.DUPLICATE_BLOCK,{editorName:c,index:m,block:b,id:E})},async[mt.MOVE_BLOCK_TO_EDITOR]({commit:e,dispatch:o},{editorName:a,index:c,block:m,futureIndex:b,id:E}){await o(mt.DUPLICATE_BLOCK,{editorName:a,futureIndex:b,block:m,id:E}),e(J.DELETE_BLOCK,{editorName:m.name,index:c})}};var kx={state:gx,getters:xx,mutations:yx,actions:Ix},vl={getRevisionContent(e,o,a,c){Kl.put(e,o).then(function(m){a&&typeof a=="function"&&a(m.data)},function(m){Hl("REVISION",{message:"Preview request error.",value:m}),c&&typeof c=="function"&&c(m)})}};const Ex={loading:!1,active:{},activeContent:"",currentContent:"",all:window[{}.VUE_APP_NAME].STORE.revisions||[]},Ax={},Sx={[Ht.LOADING_REV](e){e.loading=!0},[Ht.UPDATE_REV](e,o){function a(m){return m.id===o}const c=e.all.findIndex(a);c!==-1?e.active=e.all[c]:e.active={}},[Ht.UPDATE_REV_CONTENT](e,o){e.loading=!1,e.activeContent=o},[Ht.UPDATE_REV_CURRENT_CONTENT](e,o){e.loading=!1,e.currentContent=o},[Ht.UPDATE_REV_ALL](e,o){e.all=o}},Cx={[mt.GET_CURRENT]({commit:e,rootState:o}){return new Promise((a,c)=>{e(Ht.LOADING_REV);const m=uw(o);o.language.all.length>1&&(m.activeLanguage=o.language.active.value),vl.getRevisionContent(o.form.previewUrl,m,b=>{e(Ht.UPDATE_REV_CURRENT_CONTENT,b),a()},b=>{c(b)})})},[mt.GET_REVISION]({commit:e,state:o,rootState:a}){return new Promise((c,m)=>{e(Ht.LOADING_REV);let b=0;Object.keys(o.active).length===0?b=o.all[0].id:b=o.active.id;const E={revisionId:b};a.language.all.length>1&&(E.activeLanguage=a.language.active.value),vl.getRevisionContent(a.form.previewUrl,E,B=>{e(Ht.UPDATE_REV_CONTENT,B),c()},B=>{m(B)})})}};var Bx={state:Ex,getters:Ax,actions:Cx,mutations:Sx};const $x={repeaters:window[{}.VUE_APP_NAME].STORE.form.repeaters||{},availableRepeaters:window[{}.VUE_APP_NAME].STORE.form.availableRepeaters||{}},Px={repeatersByBlockId:e=>o=>{const a=Object.keys(e.repeaters).filter(m=>m.startsWith(`blocks-${o}`)),c={};return a.forEach(m=>c[m]=e.repeaters[m]),c}};function qa(){return Date.now()}const Rx={[nt.ADD_FORM_BLOCK](e,o){const a=o.name,c=o.type,m={},b=e.availableRepeaters[c],E=!e.repeaters[a];if(!!b)if(m.id=qa(),m.type=b.component,m.title=b.title,m.twillUi={},m.twillUi.isNew=!0,E){const B={};B[a]=[],B[a].push(m),e.repeaters=Object.assign({},e.repeaters,B)}else e.repeaters[a].push(m)},[nt.ADD_REPEATER_FROM_SELECTION](e,o){const a=o.name,c=o.type,m=e.availableRepeaters[c],b=!e.repeaters[a];if(!m)return;const E={};E[a]=[],o.selection.forEach(B=>{const R={};R.id=qa(),R.type=m.component,R.title=m.title,R.repeater_target_id=B.id;const z=[];for(const G in B.repeaterFields)B.repeaterFields.hasOwnProperty(G)&&z.push({name:`blocks[${R.id}][${G}]`,value:B.repeaterFields[G]});this.commit(nt.ADD_FORM_FIELDS,z),b?E[a].push(R):e.repeaters[a].push(R)}),b&&(e.repeaters=Object.assign({},e.repeaters,E))},[nt.DELETE_FORM_BLOCK](e,o){e.repeaters[o.name].splice(o.index,1)},[nt.DUPLICATE_FORM_BLOCK](e,o){const a=Object.assign({},e.repeaters[o.name][o.index]);a.id=qa(),a.twillUi={},a.twillUi.isNew=!0,e.repeaters[o.name].splice(o.index+1,0,a)},[nt.REORDER_FORM_BLOCKS](e,o){const a={};a[o.name]=o.blocks,e.repeaters=Object.assign({},e.repeaters,a)},[nt.ADD_REPEATERS](e,{repeaters:o}){e.repeaters=Object.assign({},e.repeaters,o)}},Mx={async[mt.DUPLICATE_BLOCK]({commit:e,getters:o},{block:a,id:c}){const m={...o.repeatersByBlockId(a.id)},b=Object.keys(m),E={};b.forEach(R=>E[R.replace(a.id,c)]=[...m[R]]);const B=[];Object.keys(E).forEach(R=>{E[R].forEach((z,G)=>{const Q=Date.now(),ct=[...o.fieldsByBlockId(z.id)];E[R][G]={...E[R][G],id:Q},ct.forEach(ot=>{B.push({name:ot.name.replace(z.id,Q),value:ot.value})})})}),e(nt.ADD_REPEATERS,{repeaters:E}),e(nt.ADD_FORM_FIELDS,B)}};var Tx={state:$x,getters:Px,mutations:Rx,actions:Mx};const Ox={active:window[{}.VUE_APP_NAME].STORE.parentId||0,all:window[{}.VUE_APP_NAME].STORE.parents||[]},Lx={},Dx={[ql.UPDATE_PARENT](e,o){o?e.active=o:e.active=0}};var Nx={state:Ox,getters:Lx,mutations:Dx};const Fx={groups:window[{}.VUE_APP_NAME].STORE.groups||[],groupUserMapping:window[{}.VUE_APP_NAME].STORE.groupUserMapping||[]};var Ux={state:Fx},Za={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(e,o){(function(){var a,c="4.17.21",m=200,b="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",E="Expected a function",B="Invalid `variable` option passed into `_.template`",R="__lodash_hash_undefined__",z=500,G="__lodash_placeholder__",Q=1,ct=2,ot=4,qt=1,ue=2,st=1,te=2,lt=4,$t=8,Oe=16,Yt=32,Le=64,ee=128,tn=256,ki=512,jl=30,tf="...",ef=800,nf=16,ir=1,af=2,rf=3,Ie=1/0,pe=9007199254740991,of=17976931348623157e292,An=0/0,Zt=4294967295,sf=Zt-1,lf=Zt>>>1,ff=[["ary",ee],["bind",st],["bindKey",te],["curry",$t],["curryRight",Oe],["flip",ki],["partial",Yt],["partialRight",Le],["rearg",tn]],De="[object Arguments]",Sn="[object Array]",df="[object AsyncFunction]",en="[object Boolean]",nn="[object Date]",cf="[object DOMException]",Cn="[object Error]",Bn="[object Function]",ar="[object GeneratorFunction]",Ft="[object Map]",an="[object Number]",uf="[object Null]",ne="[object Object]",rr="[object Promise]",pf="[object Proxy]",rn="[object RegExp]",Ut="[object Set]",on="[object String]",$n="[object Symbol]",hf="[object Undefined]",sn="[object WeakMap]",mf="[object WeakSet]",ln="[object ArrayBuffer]",Ne="[object DataView]",Ei="[object Float32Array]",Ai="[object Float64Array]",Si="[object Int8Array]",Ci="[object Int16Array]",Bi="[object Int32Array]",$i="[object Uint8Array]",Pi="[object Uint8ClampedArray]",Ri="[object Uint16Array]",Mi="[object Uint32Array]",_f=/\b__p \+= '';/g,wf=/\b(__p \+=) '' \+/g,vf=/(__e\(.*?\)|\b__t\)) \+\n'';/g,or=/&(?:amp|lt|gt|quot|#39);/g,sr=/[&<>"']/g,gf=RegExp(or.source),xf=RegExp(sr.source),bf=/<%-([\s\S]+?)%>/g,yf=/<%([\s\S]+?)%>/g,lr=/<%=([\s\S]+?)%>/g,If=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,kf=/^\w*$/,Ef=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ti=/[\\^$.*+?()[\]{}|]/g,Af=RegExp(Ti.source),Oi=/^\s+/,Sf=/\s/,Cf=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Bf=/\{\n\/\* \[wrapped with (.+)\] \*/,$f=/,? & /,Pf=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Rf=/[()=,{}\[\]\/\s]/,Mf=/\\(\\)?/g,Tf=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,fr=/\w*$/,Of=/^[-+]0x[0-9a-f]+$/i,Lf=/^0b[01]+$/i,Df=/^\[object .+?Constructor\]$/,Nf=/^0o[0-7]+$/i,Ff=/^(?:0|[1-9]\d*)$/,Uf=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Pn=/($^)/,Vf=/['\n\r\u2028\u2029\\]/g,Rn="\\ud800-\\udfff",Wf="\\u0300-\\u036f",zf="\\ufe20-\\ufe2f",Kf="\\u20d0-\\u20ff",dr=Wf+zf+Kf,cr="\\u2700-\\u27bf",ur="a-z\\xdf-\\xf6\\xf8-\\xff",Hf="\\xac\\xb1\\xd7\\xf7",Gf="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",qf="\\u2000-\\u206f",Yf=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",pr="A-Z\\xc0-\\xd6\\xd8-\\xde",hr="\\ufe0e\\ufe0f",mr=Hf+Gf+qf+Yf,Li="['\u2019]",Zf="["+Rn+"]",_r="["+mr+"]",Mn="["+dr+"]",wr="\\d+",Xf="["+cr+"]",vr="["+ur+"]",gr="[^"+Rn+mr+wr+cr+ur+pr+"]",Di="\\ud83c[\\udffb-\\udfff]",Jf="(?:"+Mn+"|"+Di+")",xr="[^"+Rn+"]",Ni="(?:\\ud83c[\\udde6-\\uddff]){2}",Fi="[\\ud800-\\udbff][\\udc00-\\udfff]",Fe="["+pr+"]",br="\\u200d",yr="(?:"+vr+"|"+gr+")",Qf="(?:"+Fe+"|"+gr+")",Ir="(?:"+Li+"(?:d|ll|m|re|s|t|ve))?",kr="(?:"+Li+"(?:D|LL|M|RE|S|T|VE))?",Er=Jf+"?",Ar="["+hr+"]?",jf="(?:"+br+"(?:"+[xr,Ni,Fi].join("|")+")"+Ar+Er+")*",td="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",ed="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Sr=Ar+Er+jf,nd="(?:"+[Xf,Ni,Fi].join("|")+")"+Sr,id="(?:"+[xr+Mn+"?",Mn,Ni,Fi,Zf].join("|")+")",ad=RegExp(Li,"g"),rd=RegExp(Mn,"g"),Ui=RegExp(Di+"(?="+Di+")|"+id+Sr,"g"),od=RegExp([Fe+"?"+vr+"+"+Ir+"(?="+[_r,Fe,"$"].join("|")+")",Qf+"+"+kr+"(?="+[_r,Fe+yr,"$"].join("|")+")",Fe+"?"+yr+"+"+Ir,Fe+"+"+kr,ed,td,wr,nd].join("|"),"g"),sd=RegExp("["+br+Rn+dr+hr+"]"),ld=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,fd=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],dd=-1,Y={};Y[Ei]=Y[Ai]=Y[Si]=Y[Ci]=Y[Bi]=Y[$i]=Y[Pi]=Y[Ri]=Y[Mi]=!0,Y[De]=Y[Sn]=Y[ln]=Y[en]=Y[Ne]=Y[nn]=Y[Cn]=Y[Bn]=Y[Ft]=Y[an]=Y[ne]=Y[rn]=Y[Ut]=Y[on]=Y[sn]=!1;var q={};q[De]=q[Sn]=q[ln]=q[Ne]=q[en]=q[nn]=q[Ei]=q[Ai]=q[Si]=q[Ci]=q[Bi]=q[Ft]=q[an]=q[ne]=q[rn]=q[Ut]=q[on]=q[$n]=q[$i]=q[Pi]=q[Ri]=q[Mi]=!0,q[Cn]=q[Bn]=q[sn]=!1;var cd={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},ud={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},pd={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},hd={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},md=parseFloat,_d=parseInt,Cr=typeof kn=="object"&&kn&&kn.Object===Object&&kn,wd=typeof self=="object"&&self&&self.Object===Object&&self,ft=Cr||wd||Function("return this")(),Vi=o&&!o.nodeType&&o,ke=Vi&&!0&&e&&!e.nodeType&&e,Br=ke&&ke.exports===Vi,Wi=Br&&Cr.process,Pt=function(){try{var p=ke&&ke.require&&ke.require("util").types;return p||Wi&&Wi.binding&&Wi.binding("util")}catch{}}(),$r=Pt&&Pt.isArrayBuffer,Pr=Pt&&Pt.isDate,Rr=Pt&&Pt.isMap,Mr=Pt&&Pt.isRegExp,Tr=Pt&&Pt.isSet,Or=Pt&&Pt.isTypedArray;function kt(p,w,_){switch(_.length){case 0:return p.call(w);case 1:return p.call(w,_[0]);case 2:return p.call(w,_[0],_[1]);case 3:return p.call(w,_[0],_[1],_[2])}return p.apply(w,_)}function vd(p,w,_,I){for(var $=-1,U=p==null?0:p.length;++$<U;){var it=p[$];w(I,it,_(it),p)}return I}function Rt(p,w){for(var _=-1,I=p==null?0:p.length;++_<I&&w(p[_],_,p)!==!1;);return p}function gd(p,w){for(var _=p==null?0:p.length;_--&&w(p[_],_,p)!==!1;);return p}function Lr(p,w){for(var _=-1,I=p==null?0:p.length;++_<I;)if(!w(p[_],_,p))return!1;return!0}function he(p,w){for(var _=-1,I=p==null?0:p.length,$=0,U=[];++_<I;){var it=p[_];w(it,_,p)&&(U[$++]=it)}return U}function Tn(p,w){var _=p==null?0:p.length;return!!_&&Ue(p,w,0)>-1}function zi(p,w,_){for(var I=-1,$=p==null?0:p.length;++I<$;)if(_(w,p[I]))return!0;return!1}function Z(p,w){for(var _=-1,I=p==null?0:p.length,$=Array(I);++_<I;)$[_]=w(p[_],_,p);return $}function me(p,w){for(var _=-1,I=w.length,$=p.length;++_<I;)p[$+_]=w[_];return p}function Ki(p,w,_,I){var $=-1,U=p==null?0:p.length;for(I&&U&&(_=p[++$]);++$<U;)_=w(_,p[$],$,p);return _}function xd(p,w,_,I){var $=p==null?0:p.length;for(I&&$&&(_=p[--$]);$--;)_=w(_,p[$],$,p);return _}function Hi(p,w){for(var _=-1,I=p==null?0:p.length;++_<I;)if(w(p[_],_,p))return!0;return!1}var bd=Gi("length");function yd(p){return p.split("")}function Id(p){return p.match(Pf)||[]}function Dr(p,w,_){var I;return _(p,function($,U,it){if(w($,U,it))return I=U,!1}),I}function On(p,w,_,I){for(var $=p.length,U=_+(I?1:-1);I?U--:++U<$;)if(w(p[U],U,p))return U;return-1}function Ue(p,w,_){return w===w?Od(p,w,_):On(p,Nr,_)}function kd(p,w,_,I){for(var $=_-1,U=p.length;++$<U;)if(I(p[$],w))return $;return-1}function Nr(p){return p!==p}function Fr(p,w){var _=p==null?0:p.length;return _?Yi(p,w)/_:An}function Gi(p){return function(w){return w==null?a:w[p]}}function qi(p){return function(w){return p==null?a:p[w]}}function Ur(p,w,_,I,$){return $(p,function(U,it,H){_=I?(I=!1,U):w(_,U,it,H)}),_}function Ed(p,w){var _=p.length;for(p.sort(w);_--;)p[_]=p[_].value;return p}function Yi(p,w){for(var _,I=-1,$=p.length;++I<$;){var U=w(p[I]);U!==a&&(_=_===a?U:_+U)}return _}function Zi(p,w){for(var _=-1,I=Array(p);++_<p;)I[_]=w(_);return I}function Ad(p,w){return Z(w,function(_){return[_,p[_]]})}function Vr(p){return p&&p.slice(0,Hr(p)+1).replace(Oi,"")}function Et(p){return function(w){return p(w)}}function Xi(p,w){return Z(w,function(_){return p[_]})}function fn(p,w){return p.has(w)}function Wr(p,w){for(var _=-1,I=p.length;++_<I&&Ue(w,p[_],0)>-1;);return _}function zr(p,w){for(var _=p.length;_--&&Ue(w,p[_],0)>-1;);return _}function Sd(p,w){for(var _=p.length,I=0;_--;)p[_]===w&&++I;return I}var Cd=qi(cd),Bd=qi(ud);function $d(p){return"\\"+hd[p]}function Pd(p,w){return p==null?a:p[w]}function Ve(p){return sd.test(p)}function Rd(p){return ld.test(p)}function Md(p){for(var w,_=[];!(w=p.next()).done;)_.push(w.value);return _}function Ji(p){var w=-1,_=Array(p.size);return p.forEach(function(I,$){_[++w]=[$,I]}),_}function Kr(p,w){return function(_){return p(w(_))}}function _e(p,w){for(var _=-1,I=p.length,$=0,U=[];++_<I;){var it=p[_];(it===w||it===G)&&(p[_]=G,U[$++]=_)}return U}function Ln(p){var w=-1,_=Array(p.size);return p.forEach(function(I){_[++w]=I}),_}function Td(p){var w=-1,_=Array(p.size);return p.forEach(function(I){_[++w]=[I,I]}),_}function Od(p,w,_){for(var I=_-1,$=p.length;++I<$;)if(p[I]===w)return I;return-1}function Ld(p,w,_){for(var I=_+1;I--;)if(p[I]===w)return I;return I}function We(p){return Ve(p)?Nd(p):bd(p)}function Vt(p){return Ve(p)?Fd(p):yd(p)}function Hr(p){for(var w=p.length;w--&&Sf.test(p.charAt(w)););return w}var Dd=qi(pd);function Nd(p){for(var w=Ui.lastIndex=0;Ui.test(p);)++w;return w}function Fd(p){return p.match(Ui)||[]}function Ud(p){return p.match(od)||[]}var Vd=function p(w){w=w==null?ft:ze.defaults(ft.Object(),w,ze.pick(ft,fd));var _=w.Array,I=w.Date,$=w.Error,U=w.Function,it=w.Math,H=w.Object,Qi=w.RegExp,Wd=w.String,Mt=w.TypeError,Dn=_.prototype,zd=U.prototype,Ke=H.prototype,Nn=w["__core-js_shared__"],Fn=zd.toString,K=Ke.hasOwnProperty,Kd=0,Gr=function(){var t=/[^.]+$/.exec(Nn&&Nn.keys&&Nn.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Un=Ke.toString,Hd=Fn.call(H),Gd=ft._,qd=Qi("^"+Fn.call(K).replace(Ti,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Vn=Br?w.Buffer:a,we=w.Symbol,Wn=w.Uint8Array,qr=Vn?Vn.allocUnsafe:a,zn=Kr(H.getPrototypeOf,H),Yr=H.create,Zr=Ke.propertyIsEnumerable,Kn=Dn.splice,Xr=we?we.isConcatSpreadable:a,dn=we?we.iterator:a,Ee=we?we.toStringTag:a,Hn=function(){try{var t=$e(H,"defineProperty");return t({},"",{}),t}catch{}}(),Yd=w.clearTimeout!==ft.clearTimeout&&w.clearTimeout,Zd=I&&I.now!==ft.Date.now&&I.now,Xd=w.setTimeout!==ft.setTimeout&&w.setTimeout,Gn=it.ceil,qn=it.floor,ji=H.getOwnPropertySymbols,Jd=Vn?Vn.isBuffer:a,Jr=w.isFinite,Qd=Dn.join,jd=Kr(H.keys,H),at=it.max,ut=it.min,tc=I.now,ec=w.parseInt,Qr=it.random,nc=Dn.reverse,ta=$e(w,"DataView"),cn=$e(w,"Map"),ea=$e(w,"Promise"),He=$e(w,"Set"),un=$e(w,"WeakMap"),pn=$e(H,"create"),Yn=un&&new un,Ge={},ic=Pe(ta),ac=Pe(cn),rc=Pe(ea),oc=Pe(He),sc=Pe(un),Zn=we?we.prototype:a,hn=Zn?Zn.valueOf:a,jr=Zn?Zn.toString:a;function l(t){if(j(t)&&!P(t)&&!(t instanceof D)){if(t instanceof Tt)return t;if(K.call(t,"__wrapped__"))return es(t)}return new Tt(t)}var qe=function(){function t(){}return function(n){if(!X(n))return{};if(Yr)return Yr(n);t.prototype=n;var i=new t;return t.prototype=a,i}}();function Xn(){}function Tt(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=a}l.templateSettings={escape:bf,evaluate:yf,interpolate:lr,variable:"",imports:{_:l}},l.prototype=Xn.prototype,l.prototype.constructor=l,Tt.prototype=qe(Xn.prototype),Tt.prototype.constructor=Tt;function D(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Zt,this.__views__=[]}function lc(){var t=new D(this.__wrapped__);return t.__actions__=xt(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=xt(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=xt(this.__views__),t}function fc(){if(this.__filtered__){var t=new D(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function dc(){var t=this.__wrapped__.value(),n=this.__dir__,i=P(t),r=n<0,s=i?t.length:0,f=yu(0,s,this.__views__),d=f.start,u=f.end,h=u-d,v=r?u:d-1,g=this.__iteratees__,x=g.length,y=0,k=ut(h,this.__takeCount__);if(!i||!r&&s==h&&k==h)return ko(t,this.__actions__);var S=[];t:for(;h--&&y<k;){v+=n;for(var T=-1,C=t[v];++T<x;){var L=g[T],N=L.iteratee,Ct=L.type,gt=N(C);if(Ct==af)C=gt;else if(!gt){if(Ct==ir)continue t;break t}}S[y++]=C}return S}D.prototype=qe(Xn.prototype),D.prototype.constructor=D;function Ae(t){var n=-1,i=t==null?0:t.length;for(this.clear();++n<i;){var r=t[n];this.set(r[0],r[1])}}function cc(){this.__data__=pn?pn(null):{},this.size=0}function uc(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}function pc(t){var n=this.__data__;if(pn){var i=n[t];return i===R?a:i}return K.call(n,t)?n[t]:a}function hc(t){var n=this.__data__;return pn?n[t]!==a:K.call(n,t)}function mc(t,n){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=pn&&n===a?R:n,this}Ae.prototype.clear=cc,Ae.prototype.delete=uc,Ae.prototype.get=pc,Ae.prototype.has=hc,Ae.prototype.set=mc;function ie(t){var n=-1,i=t==null?0:t.length;for(this.clear();++n<i;){var r=t[n];this.set(r[0],r[1])}}function _c(){this.__data__=[],this.size=0}function wc(t){var n=this.__data__,i=Jn(n,t);if(i<0)return!1;var r=n.length-1;return i==r?n.pop():Kn.call(n,i,1),--this.size,!0}function vc(t){var n=this.__data__,i=Jn(n,t);return i<0?a:n[i][1]}function gc(t){return Jn(this.__data__,t)>-1}function xc(t,n){var i=this.__data__,r=Jn(i,t);return r<0?(++this.size,i.push([t,n])):i[r][1]=n,this}ie.prototype.clear=_c,ie.prototype.delete=wc,ie.prototype.get=vc,ie.prototype.has=gc,ie.prototype.set=xc;function ae(t){var n=-1,i=t==null?0:t.length;for(this.clear();++n<i;){var r=t[n];this.set(r[0],r[1])}}function bc(){this.size=0,this.__data__={hash:new Ae,map:new(cn||ie),string:new Ae}}function yc(t){var n=fi(this,t).delete(t);return this.size-=n?1:0,n}function Ic(t){return fi(this,t).get(t)}function kc(t){return fi(this,t).has(t)}function Ec(t,n){var i=fi(this,t),r=i.size;return i.set(t,n),this.size+=i.size==r?0:1,this}ae.prototype.clear=bc,ae.prototype.delete=yc,ae.prototype.get=Ic,ae.prototype.has=kc,ae.prototype.set=Ec;function Se(t){var n=-1,i=t==null?0:t.length;for(this.__data__=new ae;++n<i;)this.add(t[n])}function Ac(t){return this.__data__.set(t,R),this}function Sc(t){return this.__data__.has(t)}Se.prototype.add=Se.prototype.push=Ac,Se.prototype.has=Sc;function Wt(t){var n=this.__data__=new ie(t);this.size=n.size}function Cc(){this.__data__=new ie,this.size=0}function Bc(t){var n=this.__data__,i=n.delete(t);return this.size=n.size,i}function $c(t){return this.__data__.get(t)}function Pc(t){return this.__data__.has(t)}function Rc(t,n){var i=this.__data__;if(i instanceof ie){var r=i.__data__;if(!cn||r.length<m-1)return r.push([t,n]),this.size=++i.size,this;i=this.__data__=new ae(r)}return i.set(t,n),this.size=i.size,this}Wt.prototype.clear=Cc,Wt.prototype.delete=Bc,Wt.prototype.get=$c,Wt.prototype.has=Pc,Wt.prototype.set=Rc;function to(t,n){var i=P(t),r=!i&&Re(t),s=!i&&!r&&ye(t),f=!i&&!r&&!s&&Je(t),d=i||r||s||f,u=d?Zi(t.length,Wd):[],h=u.length;for(var v in t)(n||K.call(t,v))&&!(d&&(v=="length"||s&&(v=="offset"||v=="parent")||f&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||le(v,h)))&&u.push(v);return u}function eo(t){var n=t.length;return n?t[ua(0,n-1)]:a}function Mc(t,n){return di(xt(t),Ce(n,0,t.length))}function Tc(t){return di(xt(t))}function na(t,n,i){(i!==a&&!zt(t[n],i)||i===a&&!(n in t))&&re(t,n,i)}function mn(t,n,i){var r=t[n];(!(K.call(t,n)&&zt(r,i))||i===a&&!(n in t))&&re(t,n,i)}function Jn(t,n){for(var i=t.length;i--;)if(zt(t[i][0],n))return i;return-1}function Oc(t,n,i,r){return ve(t,function(s,f,d){n(r,s,i(s),d)}),r}function no(t,n){return t&&Jt(n,rt(n),t)}function Lc(t,n){return t&&Jt(n,yt(n),t)}function re(t,n,i){n=="__proto__"&&Hn?Hn(t,n,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[n]=i}function ia(t,n){for(var i=-1,r=n.length,s=_(r),f=t==null;++i<r;)s[i]=f?a:Da(t,n[i]);return s}function Ce(t,n,i){return t===t&&(i!==a&&(t=t<=i?t:i),n!==a&&(t=t>=n?t:n)),t}function Ot(t,n,i,r,s,f){var d,u=n&Q,h=n&ct,v=n&ot;if(i&&(d=s?i(t,r,s,f):i(t)),d!==a)return d;if(!X(t))return t;var g=P(t);if(g){if(d=ku(t),!u)return xt(t,d)}else{var x=pt(t),y=x==Bn||x==ar;if(ye(t))return So(t,u);if(x==ne||x==De||y&&!s){if(d=h||y?{}:Go(t),!u)return h?pu(t,Lc(d,t)):uu(t,no(d,t))}else{if(!q[x])return s?t:{};d=Eu(t,x,u)}}f||(f=new Wt);var k=f.get(t);if(k)return k;f.set(t,d),bs(t)?t.forEach(function(C){d.add(Ot(C,n,i,C,t,f))}):gs(t)&&t.forEach(function(C,L){d.set(L,Ot(C,n,i,L,t,f))});var S=v?h?Ia:ya:h?yt:rt,T=g?a:S(t);return Rt(T||t,function(C,L){T&&(L=C,C=t[L]),mn(d,L,Ot(C,n,i,L,t,f))}),d}function Dc(t){var n=rt(t);return function(i){return io(i,t,n)}}function io(t,n,i){var r=i.length;if(t==null)return!r;for(t=H(t);r--;){var s=i[r],f=n[s],d=t[s];if(d===a&&!(s in t)||!f(d))return!1}return!0}function ao(t,n,i){if(typeof t!="function")throw new Mt(E);return yn(function(){t.apply(a,i)},n)}function _n(t,n,i,r){var s=-1,f=Tn,d=!0,u=t.length,h=[],v=n.length;if(!u)return h;i&&(n=Z(n,Et(i))),r?(f=zi,d=!1):n.length>=m&&(f=fn,d=!1,n=new Se(n));t:for(;++s<u;){var g=t[s],x=i==null?g:i(g);if(g=r||g!==0?g:0,d&&x===x){for(var y=v;y--;)if(n[y]===x)continue t;h.push(g)}else f(n,x,r)||h.push(g)}return h}var ve=Ro(Xt),ro=Ro(ra,!0);function Nc(t,n){var i=!0;return ve(t,function(r,s,f){return i=!!n(r,s,f),i}),i}function Qn(t,n,i){for(var r=-1,s=t.length;++r<s;){var f=t[r],d=n(f);if(d!=null&&(u===a?d===d&&!St(d):i(d,u)))var u=d,h=f}return h}function Fc(t,n,i,r){var s=t.length;for(i=M(i),i<0&&(i=-i>s?0:s+i),r=r===a||r>s?s:M(r),r<0&&(r+=s),r=i>r?0:Is(r);i<r;)t[i++]=n;return t}function oo(t,n){var i=[];return ve(t,function(r,s,f){n(r,s,f)&&i.push(r)}),i}function dt(t,n,i,r,s){var f=-1,d=t.length;for(i||(i=Su),s||(s=[]);++f<d;){var u=t[f];n>0&&i(u)?n>1?dt(u,n-1,i,r,s):me(s,u):r||(s[s.length]=u)}return s}var aa=Mo(),so=Mo(!0);function Xt(t,n){return t&&aa(t,n,rt)}function ra(t,n){return t&&so(t,n,rt)}function jn(t,n){return he(n,function(i){return fe(t[i])})}function Be(t,n){n=xe(n,t);for(var i=0,r=n.length;t!=null&&i<r;)t=t[Qt(n[i++])];return i&&i==r?t:a}function lo(t,n,i){var r=n(t);return P(t)?r:me(r,i(t))}function wt(t){return t==null?t===a?hf:uf:Ee&&Ee in H(t)?bu(t):Tu(t)}function oa(t,n){return t>n}function Uc(t,n){return t!=null&&K.call(t,n)}function Vc(t,n){return t!=null&&n in H(t)}function Wc(t,n,i){return t>=ut(n,i)&&t<at(n,i)}function sa(t,n,i){for(var r=i?zi:Tn,s=t[0].length,f=t.length,d=f,u=_(f),h=1/0,v=[];d--;){var g=t[d];d&&n&&(g=Z(g,Et(n))),h=ut(g.length,h),u[d]=!i&&(n||s>=120&&g.length>=120)?new Se(d&&g):a}g=t[0];var x=-1,y=u[0];t:for(;++x<s&&v.length<h;){var k=g[x],S=n?n(k):k;if(k=i||k!==0?k:0,!(y?fn(y,S):r(v,S,i))){for(d=f;--d;){var T=u[d];if(!(T?fn(T,S):r(t[d],S,i)))continue t}y&&y.push(S),v.push(k)}}return v}function zc(t,n,i,r){return Xt(t,function(s,f,d){n(r,i(s),f,d)}),r}function wn(t,n,i){n=xe(n,t),t=Xo(t,n);var r=t==null?t:t[Qt(Dt(n))];return r==null?a:kt(r,t,i)}function fo(t){return j(t)&&wt(t)==De}function Kc(t){return j(t)&&wt(t)==ln}function Hc(t){return j(t)&&wt(t)==nn}function vn(t,n,i,r,s){return t===n?!0:t==null||n==null||!j(t)&&!j(n)?t!==t&&n!==n:Gc(t,n,i,r,vn,s)}function Gc(t,n,i,r,s,f){var d=P(t),u=P(n),h=d?Sn:pt(t),v=u?Sn:pt(n);h=h==De?ne:h,v=v==De?ne:v;var g=h==ne,x=v==ne,y=h==v;if(y&&ye(t)){if(!ye(n))return!1;d=!0,g=!1}if(y&&!g)return f||(f=new Wt),d||Je(t)?zo(t,n,i,r,s,f):gu(t,n,h,i,r,s,f);if(!(i&qt)){var k=g&&K.call(t,"__wrapped__"),S=x&&K.call(n,"__wrapped__");if(k||S){var T=k?t.value():t,C=S?n.value():n;return f||(f=new Wt),s(T,C,i,r,f)}}return y?(f||(f=new Wt),xu(t,n,i,r,s,f)):!1}function qc(t){return j(t)&&pt(t)==Ft}function la(t,n,i,r){var s=i.length,f=s,d=!r;if(t==null)return!f;for(t=H(t);s--;){var u=i[s];if(d&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++s<f;){u=i[s];var h=u[0],v=t[h],g=u[1];if(d&&u[2]){if(v===a&&!(h in t))return!1}else{var x=new Wt;if(r)var y=r(v,g,h,t,n,x);if(!(y===a?vn(g,v,qt|ue,r,x):y))return!1}}return!0}function co(t){if(!X(t)||Bu(t))return!1;var n=fe(t)?qd:Df;return n.test(Pe(t))}function Yc(t){return j(t)&&wt(t)==rn}function Zc(t){return j(t)&&pt(t)==Ut}function Xc(t){return j(t)&&_i(t.length)&&!!Y[wt(t)]}function uo(t){return typeof t=="function"?t:t==null?It:typeof t=="object"?P(t)?mo(t[0],t[1]):ho(t):Ts(t)}function fa(t){if(!bn(t))return jd(t);var n=[];for(var i in H(t))K.call(t,i)&&i!="constructor"&&n.push(i);return n}function Jc(t){if(!X(t))return Mu(t);var n=bn(t),i=[];for(var r in t)r=="constructor"&&(n||!K.call(t,r))||i.push(r);return i}function da(t,n){return t<n}function po(t,n){var i=-1,r=bt(t)?_(t.length):[];return ve(t,function(s,f,d){r[++i]=n(s,f,d)}),r}function ho(t){var n=Ea(t);return n.length==1&&n[0][2]?Yo(n[0][0],n[0][1]):function(i){return i===t||la(i,t,n)}}function mo(t,n){return Sa(t)&&qo(n)?Yo(Qt(t),n):function(i){var r=Da(i,t);return r===a&&r===n?Na(i,t):vn(n,r,qt|ue)}}function ti(t,n,i,r,s){t!==n&&aa(n,function(f,d){if(s||(s=new Wt),X(f))Qc(t,n,d,i,ti,r,s);else{var u=r?r(Ba(t,d),f,d+"",t,n,s):a;u===a&&(u=f),na(t,d,u)}},yt)}function Qc(t,n,i,r,s,f,d){var u=Ba(t,i),h=Ba(n,i),v=d.get(h);if(v){na(t,i,v);return}var g=f?f(u,h,i+"",t,n,d):a,x=g===a;if(x){var y=P(h),k=!y&&ye(h),S=!y&&!k&&Je(h);g=h,y||k||S?P(u)?g=u:tt(u)?g=xt(u):k?(x=!1,g=So(h,!0)):S?(x=!1,g=Co(h,!0)):g=[]:In(h)||Re(h)?(g=u,Re(u)?g=ks(u):(!X(u)||fe(u))&&(g=Go(h))):x=!1}x&&(d.set(h,g),s(g,h,r,f,d),d.delete(h)),na(t,i,g)}function _o(t,n){var i=t.length;if(!!i)return n+=n<0?i:0,le(n,i)?t[n]:a}function wo(t,n,i){n.length?n=Z(n,function(f){return P(f)?function(d){return Be(d,f.length===1?f[0]:f)}:f}):n=[It];var r=-1;n=Z(n,Et(A()));var s=po(t,function(f,d,u){var h=Z(n,function(v){return v(f)});return{criteria:h,index:++r,value:f}});return Ed(s,function(f,d){return cu(f,d,i)})}function jc(t,n){return vo(t,n,function(i,r){return Na(t,r)})}function vo(t,n,i){for(var r=-1,s=n.length,f={};++r<s;){var d=n[r],u=Be(t,d);i(u,d)&&gn(f,xe(d,t),u)}return f}function tu(t){return function(n){return Be(n,t)}}function ca(t,n,i,r){var s=r?kd:Ue,f=-1,d=n.length,u=t;for(t===n&&(n=xt(n)),i&&(u=Z(t,Et(i)));++f<d;)for(var h=0,v=n[f],g=i?i(v):v;(h=s(u,g,h,r))>-1;)u!==t&&Kn.call(u,h,1),Kn.call(t,h,1);return t}function go(t,n){for(var i=t?n.length:0,r=i-1;i--;){var s=n[i];if(i==r||s!==f){var f=s;le(s)?Kn.call(t,s,1):ma(t,s)}}return t}function ua(t,n){return t+qn(Qr()*(n-t+1))}function eu(t,n,i,r){for(var s=-1,f=at(Gn((n-t)/(i||1)),0),d=_(f);f--;)d[r?f:++s]=t,t+=i;return d}function pa(t,n){var i="";if(!t||n<1||n>pe)return i;do n%2&&(i+=t),n=qn(n/2),n&&(t+=t);while(n);return i}function O(t,n){return $a(Zo(t,n,It),t+"")}function nu(t){return eo(Qe(t))}function iu(t,n){var i=Qe(t);return di(i,Ce(n,0,i.length))}function gn(t,n,i,r){if(!X(t))return t;n=xe(n,t);for(var s=-1,f=n.length,d=f-1,u=t;u!=null&&++s<f;){var h=Qt(n[s]),v=i;if(h==="__proto__"||h==="constructor"||h==="prototype")return t;if(s!=d){var g=u[h];v=r?r(g,h,u):a,v===a&&(v=X(g)?g:le(n[s+1])?[]:{})}mn(u,h,v),u=u[h]}return t}var xo=Yn?function(t,n){return Yn.set(t,n),t}:It,au=Hn?function(t,n){return Hn(t,"toString",{configurable:!0,enumerable:!1,value:Ua(n),writable:!0})}:It;function ru(t){return di(Qe(t))}function Lt(t,n,i){var r=-1,s=t.length;n<0&&(n=-n>s?0:s+n),i=i>s?s:i,i<0&&(i+=s),s=n>i?0:i-n>>>0,n>>>=0;for(var f=_(s);++r<s;)f[r]=t[r+n];return f}function ou(t,n){var i;return ve(t,function(r,s,f){return i=n(r,s,f),!i}),!!i}function ei(t,n,i){var r=0,s=t==null?r:t.length;if(typeof n=="number"&&n===n&&s<=lf){for(;r<s;){var f=r+s>>>1,d=t[f];d!==null&&!St(d)&&(i?d<=n:d<n)?r=f+1:s=f}return s}return ha(t,n,It,i)}function ha(t,n,i,r){var s=0,f=t==null?0:t.length;if(f===0)return 0;n=i(n);for(var d=n!==n,u=n===null,h=St(n),v=n===a;s<f;){var g=qn((s+f)/2),x=i(t[g]),y=x!==a,k=x===null,S=x===x,T=St(x);if(d)var C=r||S;else v?C=S&&(r||y):u?C=S&&y&&(r||!k):h?C=S&&y&&!k&&(r||!T):k||T?C=!1:C=r?x<=n:x<n;C?s=g+1:f=g}return ut(f,sf)}function bo(t,n){for(var i=-1,r=t.length,s=0,f=[];++i<r;){var d=t[i],u=n?n(d):d;if(!i||!zt(u,h)){var h=u;f[s++]=d===0?0:d}}return f}function yo(t){return typeof t=="number"?t:St(t)?An:+t}function At(t){if(typeof t=="string")return t;if(P(t))return Z(t,At)+"";if(St(t))return jr?jr.call(t):"";var n=t+"";return n=="0"&&1/t==-Ie?"-0":n}function ge(t,n,i){var r=-1,s=Tn,f=t.length,d=!0,u=[],h=u;if(i)d=!1,s=zi;else if(f>=m){var v=n?null:wu(t);if(v)return Ln(v);d=!1,s=fn,h=new Se}else h=n?[]:u;t:for(;++r<f;){var g=t[r],x=n?n(g):g;if(g=i||g!==0?g:0,d&&x===x){for(var y=h.length;y--;)if(h[y]===x)continue t;n&&h.push(x),u.push(g)}else s(h,x,i)||(h!==u&&h.push(x),u.push(g))}return u}function ma(t,n){return n=xe(n,t),t=Xo(t,n),t==null||delete t[Qt(Dt(n))]}function Io(t,n,i,r){return gn(t,n,i(Be(t,n)),r)}function ni(t,n,i,r){for(var s=t.length,f=r?s:-1;(r?f--:++f<s)&&n(t[f],f,t););return i?Lt(t,r?0:f,r?f+1:s):Lt(t,r?f+1:0,r?s:f)}function ko(t,n){var i=t;return i instanceof D&&(i=i.value()),Ki(n,function(r,s){return s.func.apply(s.thisArg,me([r],s.args))},i)}function _a(t,n,i){var r=t.length;if(r<2)return r?ge(t[0]):[];for(var s=-1,f=_(r);++s<r;)for(var d=t[s],u=-1;++u<r;)u!=s&&(f[s]=_n(f[s]||d,t[u],n,i));return ge(dt(f,1),n,i)}function Eo(t,n,i){for(var r=-1,s=t.length,f=n.length,d={};++r<s;){var u=r<f?n[r]:a;i(d,t[r],u)}return d}function wa(t){return tt(t)?t:[]}function va(t){return typeof t=="function"?t:It}function xe(t,n){return P(t)?t:Sa(t,n)?[t]:ts(W(t))}var su=O;function be(t,n,i){var r=t.length;return i=i===a?r:i,!n&&i>=r?t:Lt(t,n,i)}var Ao=Yd||function(t){return ft.clearTimeout(t)};function So(t,n){if(n)return t.slice();var i=t.length,r=qr?qr(i):new t.constructor(i);return t.copy(r),r}function ga(t){var n=new t.constructor(t.byteLength);return new Wn(n).set(new Wn(t)),n}function lu(t,n){var i=n?ga(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}function fu(t){var n=new t.constructor(t.source,fr.exec(t));return n.lastIndex=t.lastIndex,n}function du(t){return hn?H(hn.call(t)):{}}function Co(t,n){var i=n?ga(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function Bo(t,n){if(t!==n){var i=t!==a,r=t===null,s=t===t,f=St(t),d=n!==a,u=n===null,h=n===n,v=St(n);if(!u&&!v&&!f&&t>n||f&&d&&h&&!u&&!v||r&&d&&h||!i&&h||!s)return 1;if(!r&&!f&&!v&&t<n||v&&i&&s&&!r&&!f||u&&i&&s||!d&&s||!h)return-1}return 0}function cu(t,n,i){for(var r=-1,s=t.criteria,f=n.criteria,d=s.length,u=i.length;++r<d;){var h=Bo(s[r],f[r]);if(h){if(r>=u)return h;var v=i[r];return h*(v=="desc"?-1:1)}}return t.index-n.index}function $o(t,n,i,r){for(var s=-1,f=t.length,d=i.length,u=-1,h=n.length,v=at(f-d,0),g=_(h+v),x=!r;++u<h;)g[u]=n[u];for(;++s<d;)(x||s<f)&&(g[i[s]]=t[s]);for(;v--;)g[u++]=t[s++];return g}function Po(t,n,i,r){for(var s=-1,f=t.length,d=-1,u=i.length,h=-1,v=n.length,g=at(f-u,0),x=_(g+v),y=!r;++s<g;)x[s]=t[s];for(var k=s;++h<v;)x[k+h]=n[h];for(;++d<u;)(y||s<f)&&(x[k+i[d]]=t[s++]);return x}function xt(t,n){var i=-1,r=t.length;for(n||(n=_(r));++i<r;)n[i]=t[i];return n}function Jt(t,n,i,r){var s=!i;i||(i={});for(var f=-1,d=n.length;++f<d;){var u=n[f],h=r?r(i[u],t[u],u,i,t):a;h===a&&(h=t[u]),s?re(i,u,h):mn(i,u,h)}return i}function uu(t,n){return Jt(t,Aa(t),n)}function pu(t,n){return Jt(t,Ko(t),n)}function ii(t,n){return function(i,r){var s=P(i)?vd:Oc,f=n?n():{};return s(i,t,A(r,2),f)}}function Ye(t){return O(function(n,i){var r=-1,s=i.length,f=s>1?i[s-1]:a,d=s>2?i[2]:a;for(f=t.length>3&&typeof f=="function"?(s--,f):a,d&&vt(i[0],i[1],d)&&(f=s<3?a:f,s=1),n=H(n);++r<s;){var u=i[r];u&&t(n,u,r,f)}return n})}function Ro(t,n){return function(i,r){if(i==null)return i;if(!bt(i))return t(i,r);for(var s=i.length,f=n?s:-1,d=H(i);(n?f--:++f<s)&&r(d[f],f,d)!==!1;);return i}}function Mo(t){return function(n,i,r){for(var s=-1,f=H(n),d=r(n),u=d.length;u--;){var h=d[t?u:++s];if(i(f[h],h,f)===!1)break}return n}}function hu(t,n,i){var r=n&st,s=xn(t);function f(){var d=this&&this!==ft&&this instanceof f?s:t;return d.apply(r?i:this,arguments)}return f}function To(t){return function(n){n=W(n);var i=Ve(n)?Vt(n):a,r=i?i[0]:n.charAt(0),s=i?be(i,1).join(""):n.slice(1);return r[t]()+s}}function Ze(t){return function(n){return Ki(Rs(Ps(n).replace(ad,"")),t,"")}}function xn(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var i=qe(t.prototype),r=t.apply(i,n);return X(r)?r:i}}function mu(t,n,i){var r=xn(t);function s(){for(var f=arguments.length,d=_(f),u=f,h=Xe(s);u--;)d[u]=arguments[u];var v=f<3&&d[0]!==h&&d[f-1]!==h?[]:_e(d,h);if(f-=v.length,f<i)return Fo(t,n,ai,s.placeholder,a,d,v,a,a,i-f);var g=this&&this!==ft&&this instanceof s?r:t;return kt(g,this,d)}return s}function Oo(t){return function(n,i,r){var s=H(n);if(!bt(n)){var f=A(i,3);n=rt(n),i=function(u){return f(s[u],u,s)}}var d=t(n,i,r);return d>-1?s[f?n[d]:d]:a}}function Lo(t){return se(function(n){var i=n.length,r=i,s=Tt.prototype.thru;for(t&&n.reverse();r--;){var f=n[r];if(typeof f!="function")throw new Mt(E);if(s&&!d&&li(f)=="wrapper")var d=new Tt([],!0)}for(r=d?r:i;++r<i;){f=n[r];var u=li(f),h=u=="wrapper"?ka(f):a;h&&Ca(h[0])&&h[1]==(ee|$t|Yt|tn)&&!h[4].length&&h[9]==1?d=d[li(h[0])].apply(d,h[3]):d=f.length==1&&Ca(f)?d[u]():d.thru(f)}return function(){var v=arguments,g=v[0];if(d&&v.length==1&&P(g))return d.plant(g).value();for(var x=0,y=i?n[x].apply(this,v):g;++x<i;)y=n[x].call(this,y);return y}})}function ai(t,n,i,r,s,f,d,u,h,v){var g=n&ee,x=n&st,y=n&te,k=n&($t|Oe),S=n&ki,T=y?a:xn(t);function C(){for(var L=arguments.length,N=_(L),Ct=L;Ct--;)N[Ct]=arguments[Ct];if(k)var gt=Xe(C),Bt=Sd(N,gt);if(r&&(N=$o(N,r,s,k)),f&&(N=Po(N,f,d,k)),L-=Bt,k&&L<v){var et=_e(N,gt);return Fo(t,n,ai,C.placeholder,i,N,et,u,h,v-L)}var Kt=x?i:this,ce=y?Kt[t]:t;return L=N.length,u?N=Ou(N,u):S&&L>1&&N.reverse(),g&&h<L&&(N.length=h),this&&this!==ft&&this instanceof C&&(ce=T||xn(ce)),ce.apply(Kt,N)}return C}function Do(t,n){return function(i,r){return zc(i,t,n(r),{})}}function ri(t,n){return function(i,r){var s;if(i===a&&r===a)return n;if(i!==a&&(s=i),r!==a){if(s===a)return r;typeof i=="string"||typeof r=="string"?(i=At(i),r=At(r)):(i=yo(i),r=yo(r)),s=t(i,r)}return s}}function xa(t){return se(function(n){return n=Z(n,Et(A())),O(function(i){var r=this;return t(n,function(s){return kt(s,r,i)})})})}function oi(t,n){n=n===a?" ":At(n);var i=n.length;if(i<2)return i?pa(n,t):n;var r=pa(n,Gn(t/We(n)));return Ve(n)?be(Vt(r),0,t).join(""):r.slice(0,t)}function _u(t,n,i,r){var s=n&st,f=xn(t);function d(){for(var u=-1,h=arguments.length,v=-1,g=r.length,x=_(g+h),y=this&&this!==ft&&this instanceof d?f:t;++v<g;)x[v]=r[v];for(;h--;)x[v++]=arguments[++u];return kt(y,s?i:this,x)}return d}function No(t){return function(n,i,r){return r&&typeof r!="number"&&vt(n,i,r)&&(i=r=a),n=de(n),i===a?(i=n,n=0):i=de(i),r=r===a?n<i?1:-1:de(r),eu(n,i,r,t)}}function si(t){return function(n,i){return typeof n=="string"&&typeof i=="string"||(n=Nt(n),i=Nt(i)),t(n,i)}}function Fo(t,n,i,r,s,f,d,u,h,v){var g=n&$t,x=g?d:a,y=g?a:d,k=g?f:a,S=g?a:f;n|=g?Yt:Le,n&=~(g?Le:Yt),n&lt||(n&=~(st|te));var T=[t,n,s,k,x,S,y,u,h,v],C=i.apply(a,T);return Ca(t)&&Jo(C,T),C.placeholder=r,Qo(C,t,n)}function ba(t){var n=it[t];return function(i,r){if(i=Nt(i),r=r==null?0:ut(M(r),292),r&&Jr(i)){var s=(W(i)+"e").split("e"),f=n(s[0]+"e"+(+s[1]+r));return s=(W(f)+"e").split("e"),+(s[0]+"e"+(+s[1]-r))}return n(i)}}var wu=He&&1/Ln(new He([,-0]))[1]==Ie?function(t){return new He(t)}:za;function Uo(t){return function(n){var i=pt(n);return i==Ft?Ji(n):i==Ut?Td(n):Ad(n,t(n))}}function oe(t,n,i,r,s,f,d,u){var h=n&te;if(!h&&typeof t!="function")throw new Mt(E);var v=r?r.length:0;if(v||(n&=~(Yt|Le),r=s=a),d=d===a?d:at(M(d),0),u=u===a?u:M(u),v-=s?s.length:0,n&Le){var g=r,x=s;r=s=a}var y=h?a:ka(t),k=[t,n,i,r,s,g,x,f,d,u];if(y&&Ru(k,y),t=k[0],n=k[1],i=k[2],r=k[3],s=k[4],u=k[9]=k[9]===a?h?0:t.length:at(k[9]-v,0),!u&&n&($t|Oe)&&(n&=~($t|Oe)),!n||n==st)var S=hu(t,n,i);else n==$t||n==Oe?S=mu(t,n,u):(n==Yt||n==(st|Yt))&&!s.length?S=_u(t,n,i,r):S=ai.apply(a,k);var T=y?xo:Jo;return Qo(T(S,k),t,n)}function Vo(t,n,i,r){return t===a||zt(t,Ke[i])&&!K.call(r,i)?n:t}function Wo(t,n,i,r,s,f){return X(t)&&X(n)&&(f.set(n,t),ti(t,n,a,Wo,f),f.delete(n)),t}function vu(t){return In(t)?a:t}function zo(t,n,i,r,s,f){var d=i&qt,u=t.length,h=n.length;if(u!=h&&!(d&&h>u))return!1;var v=f.get(t),g=f.get(n);if(v&&g)return v==n&&g==t;var x=-1,y=!0,k=i&ue?new Se:a;for(f.set(t,n),f.set(n,t);++x<u;){var S=t[x],T=n[x];if(r)var C=d?r(T,S,x,n,t,f):r(S,T,x,t,n,f);if(C!==a){if(C)continue;y=!1;break}if(k){if(!Hi(n,function(L,N){if(!fn(k,N)&&(S===L||s(S,L,i,r,f)))return k.push(N)})){y=!1;break}}else if(!(S===T||s(S,T,i,r,f))){y=!1;break}}return f.delete(t),f.delete(n),y}function gu(t,n,i,r,s,f,d){switch(i){case Ne:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case ln:return!(t.byteLength!=n.byteLength||!f(new Wn(t),new Wn(n)));case en:case nn:case an:return zt(+t,+n);case Cn:return t.name==n.name&&t.message==n.message;case rn:case on:return t==n+"";case Ft:var u=Ji;case Ut:var h=r&qt;if(u||(u=Ln),t.size!=n.size&&!h)return!1;var v=d.get(t);if(v)return v==n;r|=ue,d.set(t,n);var g=zo(u(t),u(n),r,s,f,d);return d.delete(t),g;case $n:if(hn)return hn.call(t)==hn.call(n)}return!1}function xu(t,n,i,r,s,f){var d=i&qt,u=ya(t),h=u.length,v=ya(n),g=v.length;if(h!=g&&!d)return!1;for(var x=h;x--;){var y=u[x];if(!(d?y in n:K.call(n,y)))return!1}var k=f.get(t),S=f.get(n);if(k&&S)return k==n&&S==t;var T=!0;f.set(t,n),f.set(n,t);for(var C=d;++x<h;){y=u[x];var L=t[y],N=n[y];if(r)var Ct=d?r(N,L,y,n,t,f):r(L,N,y,t,n,f);if(!(Ct===a?L===N||s(L,N,i,r,f):Ct)){T=!1;break}C||(C=y=="constructor")}if(T&&!C){var gt=t.constructor,Bt=n.constructor;gt!=Bt&&"constructor"in t&&"constructor"in n&&!(typeof gt=="function"&&gt instanceof gt&&typeof Bt=="function"&&Bt instanceof Bt)&&(T=!1)}return f.delete(t),f.delete(n),T}function se(t){return $a(Zo(t,a,as),t+"")}function ya(t){return lo(t,rt,Aa)}function Ia(t){return lo(t,yt,Ko)}var ka=Yn?function(t){return Yn.get(t)}:za;function li(t){for(var n=t.name+"",i=Ge[n],r=K.call(Ge,n)?i.length:0;r--;){var s=i[r],f=s.func;if(f==null||f==t)return s.name}return n}function Xe(t){var n=K.call(l,"placeholder")?l:t;return n.placeholder}function A(){var t=l.iteratee||Va;return t=t===Va?uo:t,arguments.length?t(arguments[0],arguments[1]):t}function fi(t,n){var i=t.__data__;return Cu(n)?i[typeof n=="string"?"string":"hash"]:i.map}function Ea(t){for(var n=rt(t),i=n.length;i--;){var r=n[i],s=t[r];n[i]=[r,s,qo(s)]}return n}function $e(t,n){var i=Pd(t,n);return co(i)?i:a}function bu(t){var n=K.call(t,Ee),i=t[Ee];try{t[Ee]=a;var r=!0}catch{}var s=Un.call(t);return r&&(n?t[Ee]=i:delete t[Ee]),s}var Aa=ji?function(t){return t==null?[]:(t=H(t),he(ji(t),function(n){return Zr.call(t,n)}))}:Ka,Ko=ji?function(t){for(var n=[];t;)me(n,Aa(t)),t=zn(t);return n}:Ka,pt=wt;(ta&&pt(new ta(new ArrayBuffer(1)))!=Ne||cn&&pt(new cn)!=Ft||ea&&pt(ea.resolve())!=rr||He&&pt(new He)!=Ut||un&&pt(new un)!=sn)&&(pt=function(t){var n=wt(t),i=n==ne?t.constructor:a,r=i?Pe(i):"";if(r)switch(r){case ic:return Ne;case ac:return Ft;case rc:return rr;case oc:return Ut;case sc:return sn}return n});function yu(t,n,i){for(var r=-1,s=i.length;++r<s;){var f=i[r],d=f.size;switch(f.type){case"drop":t+=d;break;case"dropRight":n-=d;break;case"take":n=ut(n,t+d);break;case"takeRight":t=at(t,n-d);break}}return{start:t,end:n}}function Iu(t){var n=t.match(Bf);return n?n[1].split($f):[]}function Ho(t,n,i){n=xe(n,t);for(var r=-1,s=n.length,f=!1;++r<s;){var d=Qt(n[r]);if(!(f=t!=null&&i(t,d)))break;t=t[d]}return f||++r!=s?f:(s=t==null?0:t.length,!!s&&_i(s)&&le(d,s)&&(P(t)||Re(t)))}function ku(t){var n=t.length,i=new t.constructor(n);return n&&typeof t[0]=="string"&&K.call(t,"index")&&(i.index=t.index,i.input=t.input),i}function Go(t){return typeof t.constructor=="function"&&!bn(t)?qe(zn(t)):{}}function Eu(t,n,i){var r=t.constructor;switch(n){case ln:return ga(t);case en:case nn:return new r(+t);case Ne:return lu(t,i);case Ei:case Ai:case Si:case Ci:case Bi:case $i:case Pi:case Ri:case Mi:return Co(t,i);case Ft:return new r;case an:case on:return new r(t);case rn:return fu(t);case Ut:return new r;case $n:return du(t)}}function Au(t,n){var i=n.length;if(!i)return t;var r=i-1;return n[r]=(i>1?"& ":"")+n[r],n=n.join(i>2?", ":" "),t.replace(Cf,`{
/* [wrapped with `+n+`] */
`)}function Su(t){return P(t)||Re(t)||!!(Xr&&t&&t[Xr])}function le(t,n){var i=typeof t;return n=n==null?pe:n,!!n&&(i=="number"||i!="symbol"&&Ff.test(t))&&t>-1&&t%1==0&&t<n}function vt(t,n,i){if(!X(i))return!1;var r=typeof n;return(r=="number"?bt(i)&&le(n,i.length):r=="string"&&n in i)?zt(i[n],t):!1}function Sa(t,n){if(P(t))return!1;var i=typeof t;return i=="number"||i=="symbol"||i=="boolean"||t==null||St(t)?!0:kf.test(t)||!If.test(t)||n!=null&&t in H(n)}function Cu(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function Ca(t){var n=li(t),i=l[n];if(typeof i!="function"||!(n in D.prototype))return!1;if(t===i)return!0;var r=ka(i);return!!r&&t===r[0]}function Bu(t){return!!Gr&&Gr in t}var $u=Nn?fe:Ha;function bn(t){var n=t&&t.constructor,i=typeof n=="function"&&n.prototype||Ke;return t===i}function qo(t){return t===t&&!X(t)}function Yo(t,n){return function(i){return i==null?!1:i[t]===n&&(n!==a||t in H(i))}}function Pu(t){var n=hi(t,function(r){return i.size===z&&i.clear(),r}),i=n.cache;return n}function Ru(t,n){var i=t[1],r=n[1],s=i|r,f=s<(st|te|ee),d=r==ee&&i==$t||r==ee&&i==tn&&t[7].length<=n[8]||r==(ee|tn)&&n[7].length<=n[8]&&i==$t;if(!(f||d))return t;r&st&&(t[2]=n[2],s|=i&st?0:lt);var u=n[3];if(u){var h=t[3];t[3]=h?$o(h,u,n[4]):u,t[4]=h?_e(t[3],G):n[4]}return u=n[5],u&&(h=t[5],t[5]=h?Po(h,u,n[6]):u,t[6]=h?_e(t[5],G):n[6]),u=n[7],u&&(t[7]=u),r&ee&&(t[8]=t[8]==null?n[8]:ut(t[8],n[8])),t[9]==null&&(t[9]=n[9]),t[0]=n[0],t[1]=s,t}function Mu(t){var n=[];if(t!=null)for(var i in H(t))n.push(i);return n}function Tu(t){return Un.call(t)}function Zo(t,n,i){return n=at(n===a?t.length-1:n,0),function(){for(var r=arguments,s=-1,f=at(r.length-n,0),d=_(f);++s<f;)d[s]=r[n+s];s=-1;for(var u=_(n+1);++s<n;)u[s]=r[s];return u[n]=i(d),kt(t,this,u)}}function Xo(t,n){return n.length<2?t:Be(t,Lt(n,0,-1))}function Ou(t,n){for(var i=t.length,r=ut(n.length,i),s=xt(t);r--;){var f=n[r];t[r]=le(f,i)?s[f]:a}return t}function Ba(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}var Jo=jo(xo),yn=Xd||function(t,n){return ft.setTimeout(t,n)},$a=jo(au);function Qo(t,n,i){var r=n+"";return $a(t,Au(r,Lu(Iu(r),i)))}function jo(t){var n=0,i=0;return function(){var r=tc(),s=nf-(r-i);if(i=r,s>0){if(++n>=ef)return arguments[0]}else n=0;return t.apply(a,arguments)}}function di(t,n){var i=-1,r=t.length,s=r-1;for(n=n===a?r:n;++i<n;){var f=ua(i,s),d=t[f];t[f]=t[i],t[i]=d}return t.length=n,t}var ts=Pu(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(Ef,function(i,r,s,f){n.push(s?f.replace(Mf,"$1"):r||i)}),n});function Qt(t){if(typeof t=="string"||St(t))return t;var n=t+"";return n=="0"&&1/t==-Ie?"-0":n}function Pe(t){if(t!=null){try{return Fn.call(t)}catch{}try{return t+""}catch{}}return""}function Lu(t,n){return Rt(ff,function(i){var r="_."+i[0];n&i[1]&&!Tn(t,r)&&t.push(r)}),t.sort()}function es(t){if(t instanceof D)return t.clone();var n=new Tt(t.__wrapped__,t.__chain__);return n.__actions__=xt(t.__actions__),n.__index__=t.__index__,n.__values__=t.__values__,n}function Du(t,n,i){(i?vt(t,n,i):n===a)?n=1:n=at(M(n),0);var r=t==null?0:t.length;if(!r||n<1)return[];for(var s=0,f=0,d=_(Gn(r/n));s<r;)d[f++]=Lt(t,s,s+=n);return d}function Nu(t){for(var n=-1,i=t==null?0:t.length,r=0,s=[];++n<i;){var f=t[n];f&&(s[r++]=f)}return s}function Fu(){var t=arguments.length;if(!t)return[];for(var n=_(t-1),i=arguments[0],r=t;r--;)n[r-1]=arguments[r];return me(P(i)?xt(i):[i],dt(n,1))}var Uu=O(function(t,n){return tt(t)?_n(t,dt(n,1,tt,!0)):[]}),Vu=O(function(t,n){var i=Dt(n);return tt(i)&&(i=a),tt(t)?_n(t,dt(n,1,tt,!0),A(i,2)):[]}),Wu=O(function(t,n){var i=Dt(n);return tt(i)&&(i=a),tt(t)?_n(t,dt(n,1,tt,!0),a,i):[]});function zu(t,n,i){var r=t==null?0:t.length;return r?(n=i||n===a?1:M(n),Lt(t,n<0?0:n,r)):[]}function Ku(t,n,i){var r=t==null?0:t.length;return r?(n=i||n===a?1:M(n),n=r-n,Lt(t,0,n<0?0:n)):[]}function Hu(t,n){return t&&t.length?ni(t,A(n,3),!0,!0):[]}function Gu(t,n){return t&&t.length?ni(t,A(n,3),!0):[]}function qu(t,n,i,r){var s=t==null?0:t.length;return s?(i&&typeof i!="number"&&vt(t,n,i)&&(i=0,r=s),Fc(t,n,i,r)):[]}function ns(t,n,i){var r=t==null?0:t.length;if(!r)return-1;var s=i==null?0:M(i);return s<0&&(s=at(r+s,0)),On(t,A(n,3),s)}function is(t,n,i){var r=t==null?0:t.length;if(!r)return-1;var s=r-1;return i!==a&&(s=M(i),s=i<0?at(r+s,0):ut(s,r-1)),On(t,A(n,3),s,!0)}function as(t){var n=t==null?0:t.length;return n?dt(t,1):[]}function Yu(t){var n=t==null?0:t.length;return n?dt(t,Ie):[]}function Zu(t,n){var i=t==null?0:t.length;return i?(n=n===a?1:M(n),dt(t,n)):[]}function Xu(t){for(var n=-1,i=t==null?0:t.length,r={};++n<i;){var s=t[n];r[s[0]]=s[1]}return r}function rs(t){return t&&t.length?t[0]:a}function Ju(t,n,i){var r=t==null?0:t.length;if(!r)return-1;var s=i==null?0:M(i);return s<0&&(s=at(r+s,0)),Ue(t,n,s)}function Qu(t){var n=t==null?0:t.length;return n?Lt(t,0,-1):[]}var ju=O(function(t){var n=Z(t,wa);return n.length&&n[0]===t[0]?sa(n):[]}),tp=O(function(t){var n=Dt(t),i=Z(t,wa);return n===Dt(i)?n=a:i.pop(),i.length&&i[0]===t[0]?sa(i,A(n,2)):[]}),ep=O(function(t){var n=Dt(t),i=Z(t,wa);return n=typeof n=="function"?n:a,n&&i.pop(),i.length&&i[0]===t[0]?sa(i,a,n):[]});function np(t,n){return t==null?"":Qd.call(t,n)}function Dt(t){var n=t==null?0:t.length;return n?t[n-1]:a}function ip(t,n,i){var r=t==null?0:t.length;if(!r)return-1;var s=r;return i!==a&&(s=M(i),s=s<0?at(r+s,0):ut(s,r-1)),n===n?Ld(t,n,s):On(t,Nr,s,!0)}function ap(t,n){return t&&t.length?_o(t,M(n)):a}var rp=O(os);function os(t,n){return t&&t.length&&n&&n.length?ca(t,n):t}function op(t,n,i){return t&&t.length&&n&&n.length?ca(t,n,A(i,2)):t}function sp(t,n,i){return t&&t.length&&n&&n.length?ca(t,n,a,i):t}var lp=se(function(t,n){var i=t==null?0:t.length,r=ia(t,n);return go(t,Z(n,function(s){return le(s,i)?+s:s}).sort(Bo)),r});function fp(t,n){var i=[];if(!(t&&t.length))return i;var r=-1,s=[],f=t.length;for(n=A(n,3);++r<f;){var d=t[r];n(d,r,t)&&(i.push(d),s.push(r))}return go(t,s),i}function Pa(t){return t==null?t:nc.call(t)}function dp(t,n,i){var r=t==null?0:t.length;return r?(i&&typeof i!="number"&&vt(t,n,i)?(n=0,i=r):(n=n==null?0:M(n),i=i===a?r:M(i)),Lt(t,n,i)):[]}function cp(t,n){return ei(t,n)}function up(t,n,i){return ha(t,n,A(i,2))}function pp(t,n){var i=t==null?0:t.length;if(i){var r=ei(t,n);if(r<i&&zt(t[r],n))return r}return-1}function hp(t,n){return ei(t,n,!0)}function mp(t,n,i){return ha(t,n,A(i,2),!0)}function _p(t,n){var i=t==null?0:t.length;if(i){var r=ei(t,n,!0)-1;if(zt(t[r],n))return r}return-1}function wp(t){return t&&t.length?bo(t):[]}function vp(t,n){return t&&t.length?bo(t,A(n,2)):[]}function gp(t){var n=t==null?0:t.length;return n?Lt(t,1,n):[]}function xp(t,n,i){return t&&t.length?(n=i||n===a?1:M(n),Lt(t,0,n<0?0:n)):[]}function bp(t,n,i){var r=t==null?0:t.length;return r?(n=i||n===a?1:M(n),n=r-n,Lt(t,n<0?0:n,r)):[]}function yp(t,n){return t&&t.length?ni(t,A(n,3),!1,!0):[]}function Ip(t,n){return t&&t.length?ni(t,A(n,3)):[]}var kp=O(function(t){return ge(dt(t,1,tt,!0))}),Ep=O(function(t){var n=Dt(t);return tt(n)&&(n=a),ge(dt(t,1,tt,!0),A(n,2))}),Ap=O(function(t){var n=Dt(t);return n=typeof n=="function"?n:a,ge(dt(t,1,tt,!0),a,n)});function Sp(t){return t&&t.length?ge(t):[]}function Cp(t,n){return t&&t.length?ge(t,A(n,2)):[]}function Bp(t,n){return n=typeof n=="function"?n:a,t&&t.length?ge(t,a,n):[]}function Ra(t){if(!(t&&t.length))return[];var n=0;return t=he(t,function(i){if(tt(i))return n=at(i.length,n),!0}),Zi(n,function(i){return Z(t,Gi(i))})}function ss(t,n){if(!(t&&t.length))return[];var i=Ra(t);return n==null?i:Z(i,function(r){return kt(n,a,r)})}var $p=O(function(t,n){return tt(t)?_n(t,n):[]}),Pp=O(function(t){return _a(he(t,tt))}),Rp=O(function(t){var n=Dt(t);return tt(n)&&(n=a),_a(he(t,tt),A(n,2))}),Mp=O(function(t){var n=Dt(t);return n=typeof n=="function"?n:a,_a(he(t,tt),a,n)}),Tp=O(Ra);function Op(t,n){return Eo(t||[],n||[],mn)}function Lp(t,n){return Eo(t||[],n||[],gn)}var Dp=O(function(t){var n=t.length,i=n>1?t[n-1]:a;return i=typeof i=="function"?(t.pop(),i):a,ss(t,i)});function ls(t){var n=l(t);return n.__chain__=!0,n}function Np(t,n){return n(t),t}function ci(t,n){return n(t)}var Fp=se(function(t){var n=t.length,i=n?t[0]:0,r=this.__wrapped__,s=function(f){return ia(f,t)};return n>1||this.__actions__.length||!(r instanceof D)||!le(i)?this.thru(s):(r=r.slice(i,+i+(n?1:0)),r.__actions__.push({func:ci,args:[s],thisArg:a}),new Tt(r,this.__chain__).thru(function(f){return n&&!f.length&&f.push(a),f}))});function Up(){return ls(this)}function Vp(){return new Tt(this.value(),this.__chain__)}function Wp(){this.__values__===a&&(this.__values__=ys(this.value()));var t=this.__index__>=this.__values__.length,n=t?a:this.__values__[this.__index__++];return{done:t,value:n}}function zp(){return this}function Kp(t){for(var n,i=this;i instanceof Xn;){var r=es(i);r.__index__=0,r.__values__=a,n?s.__wrapped__=r:n=r;var s=r;i=i.__wrapped__}return s.__wrapped__=t,n}function Hp(){var t=this.__wrapped__;if(t instanceof D){var n=t;return this.__actions__.length&&(n=new D(this)),n=n.reverse(),n.__actions__.push({func:ci,args:[Pa],thisArg:a}),new Tt(n,this.__chain__)}return this.thru(Pa)}function Gp(){return ko(this.__wrapped__,this.__actions__)}var qp=ii(function(t,n,i){K.call(t,i)?++t[i]:re(t,i,1)});function Yp(t,n,i){var r=P(t)?Lr:Nc;return i&&vt(t,n,i)&&(n=a),r(t,A(n,3))}function Zp(t,n){var i=P(t)?he:oo;return i(t,A(n,3))}var Xp=Oo(ns),Jp=Oo(is);function Qp(t,n){return dt(ui(t,n),1)}function jp(t,n){return dt(ui(t,n),Ie)}function th(t,n,i){return i=i===a?1:M(i),dt(ui(t,n),i)}function fs(t,n){var i=P(t)?Rt:ve;return i(t,A(n,3))}function ds(t,n){var i=P(t)?gd:ro;return i(t,A(n,3))}var eh=ii(function(t,n,i){K.call(t,i)?t[i].push(n):re(t,i,[n])});function nh(t,n,i,r){t=bt(t)?t:Qe(t),i=i&&!r?M(i):0;var s=t.length;return i<0&&(i=at(s+i,0)),wi(t)?i<=s&&t.indexOf(n,i)>-1:!!s&&Ue(t,n,i)>-1}var ih=O(function(t,n,i){var r=-1,s=typeof n=="function",f=bt(t)?_(t.length):[];return ve(t,function(d){f[++r]=s?kt(n,d,i):wn(d,n,i)}),f}),ah=ii(function(t,n,i){re(t,i,n)});function ui(t,n){var i=P(t)?Z:po;return i(t,A(n,3))}function rh(t,n,i,r){return t==null?[]:(P(n)||(n=n==null?[]:[n]),i=r?a:i,P(i)||(i=i==null?[]:[i]),wo(t,n,i))}var oh=ii(function(t,n,i){t[i?0:1].push(n)},function(){return[[],[]]});function sh(t,n,i){var r=P(t)?Ki:Ur,s=arguments.length<3;return r(t,A(n,4),i,s,ve)}function lh(t,n,i){var r=P(t)?xd:Ur,s=arguments.length<3;return r(t,A(n,4),i,s,ro)}function fh(t,n){var i=P(t)?he:oo;return i(t,mi(A(n,3)))}function dh(t){var n=P(t)?eo:nu;return n(t)}function ch(t,n,i){(i?vt(t,n,i):n===a)?n=1:n=M(n);var r=P(t)?Mc:iu;return r(t,n)}function uh(t){var n=P(t)?Tc:ru;return n(t)}function ph(t){if(t==null)return 0;if(bt(t))return wi(t)?We(t):t.length;var n=pt(t);return n==Ft||n==Ut?t.size:fa(t).length}function hh(t,n,i){var r=P(t)?Hi:ou;return i&&vt(t,n,i)&&(n=a),r(t,A(n,3))}var mh=O(function(t,n){if(t==null)return[];var i=n.length;return i>1&&vt(t,n[0],n[1])?n=[]:i>2&&vt(n[0],n[1],n[2])&&(n=[n[0]]),wo(t,dt(n,1),[])}),pi=Zd||function(){return ft.Date.now()};function _h(t,n){if(typeof n!="function")throw new Mt(E);return t=M(t),function(){if(--t<1)return n.apply(this,arguments)}}function cs(t,n,i){return n=i?a:n,n=t&&n==null?t.length:n,oe(t,ee,a,a,a,a,n)}function us(t,n){var i;if(typeof n!="function")throw new Mt(E);return t=M(t),function(){return--t>0&&(i=n.apply(this,arguments)),t<=1&&(n=a),i}}var Ma=O(function(t,n,i){var r=st;if(i.length){var s=_e(i,Xe(Ma));r|=Yt}return oe(t,r,n,i,s)}),ps=O(function(t,n,i){var r=st|te;if(i.length){var s=_e(i,Xe(ps));r|=Yt}return oe(n,r,t,i,s)});function hs(t,n,i){n=i?a:n;var r=oe(t,$t,a,a,a,a,a,n);return r.placeholder=hs.placeholder,r}function ms(t,n,i){n=i?a:n;var r=oe(t,Oe,a,a,a,a,a,n);return r.placeholder=ms.placeholder,r}function _s(t,n,i){var r,s,f,d,u,h,v=0,g=!1,x=!1,y=!0;if(typeof t!="function")throw new Mt(E);n=Nt(n)||0,X(i)&&(g=!!i.leading,x="maxWait"in i,f=x?at(Nt(i.maxWait)||0,n):f,y="trailing"in i?!!i.trailing:y);function k(et){var Kt=r,ce=s;return r=s=a,v=et,d=t.apply(ce,Kt),d}function S(et){return v=et,u=yn(L,n),g?k(et):d}function T(et){var Kt=et-h,ce=et-v,Os=n-Kt;return x?ut(Os,f-ce):Os}function C(et){var Kt=et-h,ce=et-v;return h===a||Kt>=n||Kt<0||x&&ce>=f}function L(){var et=pi();if(C(et))return N(et);u=yn(L,T(et))}function N(et){return u=a,y&&r?k(et):(r=s=a,d)}function Ct(){u!==a&&Ao(u),v=0,r=h=s=u=a}function gt(){return u===a?d:N(pi())}function Bt(){var et=pi(),Kt=C(et);if(r=arguments,s=this,h=et,Kt){if(u===a)return S(h);if(x)return Ao(u),u=yn(L,n),k(h)}return u===a&&(u=yn(L,n)),d}return Bt.cancel=Ct,Bt.flush=gt,Bt}var wh=O(function(t,n){return ao(t,1,n)}),vh=O(function(t,n,i){return ao(t,Nt(n)||0,i)});function gh(t){return oe(t,ki)}function hi(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new Mt(E);var i=function(){var r=arguments,s=n?n.apply(this,r):r[0],f=i.cache;if(f.has(s))return f.get(s);var d=t.apply(this,r);return i.cache=f.set(s,d)||f,d};return i.cache=new(hi.Cache||ae),i}hi.Cache=ae;function mi(t){if(typeof t!="function")throw new Mt(E);return function(){var n=arguments;switch(n.length){case 0:return!t.call(this);case 1:return!t.call(this,n[0]);case 2:return!t.call(this,n[0],n[1]);case 3:return!t.call(this,n[0],n[1],n[2])}return!t.apply(this,n)}}function xh(t){return us(2,t)}var bh=su(function(t,n){n=n.length==1&&P(n[0])?Z(n[0],Et(A())):Z(dt(n,1),Et(A()));var i=n.length;return O(function(r){for(var s=-1,f=ut(r.length,i);++s<f;)r[s]=n[s].call(this,r[s]);return kt(t,this,r)})}),Ta=O(function(t,n){var i=_e(n,Xe(Ta));return oe(t,Yt,a,n,i)}),ws=O(function(t,n){var i=_e(n,Xe(ws));return oe(t,Le,a,n,i)}),yh=se(function(t,n){return oe(t,tn,a,a,a,n)});function Ih(t,n){if(typeof t!="function")throw new Mt(E);return n=n===a?n:M(n),O(t,n)}function kh(t,n){if(typeof t!="function")throw new Mt(E);return n=n==null?0:at(M(n),0),O(function(i){var r=i[n],s=be(i,0,n);return r&&me(s,r),kt(t,this,s)})}function Eh(t,n,i){var r=!0,s=!0;if(typeof t!="function")throw new Mt(E);return X(i)&&(r="leading"in i?!!i.leading:r,s="trailing"in i?!!i.trailing:s),_s(t,n,{leading:r,maxWait:n,trailing:s})}function Ah(t){return cs(t,1)}function Sh(t,n){return Ta(va(n),t)}function Ch(){if(!arguments.length)return[];var t=arguments[0];return P(t)?t:[t]}function Bh(t){return Ot(t,ot)}function $h(t,n){return n=typeof n=="function"?n:a,Ot(t,ot,n)}function Ph(t){return Ot(t,Q|ot)}function Rh(t,n){return n=typeof n=="function"?n:a,Ot(t,Q|ot,n)}function Mh(t,n){return n==null||io(t,n,rt(n))}function zt(t,n){return t===n||t!==t&&n!==n}var Th=si(oa),Oh=si(function(t,n){return t>=n}),Re=fo(function(){return arguments}())?fo:function(t){return j(t)&&K.call(t,"callee")&&!Zr.call(t,"callee")},P=_.isArray,Lh=$r?Et($r):Kc;function bt(t){return t!=null&&_i(t.length)&&!fe(t)}function tt(t){return j(t)&&bt(t)}function Dh(t){return t===!0||t===!1||j(t)&&wt(t)==en}var ye=Jd||Ha,Nh=Pr?Et(Pr):Hc;function Fh(t){return j(t)&&t.nodeType===1&&!In(t)}function Uh(t){if(t==null)return!0;if(bt(t)&&(P(t)||typeof t=="string"||typeof t.splice=="function"||ye(t)||Je(t)||Re(t)))return!t.length;var n=pt(t);if(n==Ft||n==Ut)return!t.size;if(bn(t))return!fa(t).length;for(var i in t)if(K.call(t,i))return!1;return!0}function Vh(t,n){return vn(t,n)}function Wh(t,n,i){i=typeof i=="function"?i:a;var r=i?i(t,n):a;return r===a?vn(t,n,a,i):!!r}function Oa(t){if(!j(t))return!1;var n=wt(t);return n==Cn||n==cf||typeof t.message=="string"&&typeof t.name=="string"&&!In(t)}function zh(t){return typeof t=="number"&&Jr(t)}function fe(t){if(!X(t))return!1;var n=wt(t);return n==Bn||n==ar||n==df||n==pf}function vs(t){return typeof t=="number"&&t==M(t)}function _i(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=pe}function X(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}function j(t){return t!=null&&typeof t=="object"}var gs=Rr?Et(Rr):qc;function Kh(t,n){return t===n||la(t,n,Ea(n))}function Hh(t,n,i){return i=typeof i=="function"?i:a,la(t,n,Ea(n),i)}function Gh(t){return xs(t)&&t!=+t}function qh(t){if($u(t))throw new $(b);return co(t)}function Yh(t){return t===null}function Zh(t){return t==null}function xs(t){return typeof t=="number"||j(t)&&wt(t)==an}function In(t){if(!j(t)||wt(t)!=ne)return!1;var n=zn(t);if(n===null)return!0;var i=K.call(n,"constructor")&&n.constructor;return typeof i=="function"&&i instanceof i&&Fn.call(i)==Hd}var La=Mr?Et(Mr):Yc;function Xh(t){return vs(t)&&t>=-pe&&t<=pe}var bs=Tr?Et(Tr):Zc;function wi(t){return typeof t=="string"||!P(t)&&j(t)&&wt(t)==on}function St(t){return typeof t=="symbol"||j(t)&&wt(t)==$n}var Je=Or?Et(Or):Xc;function Jh(t){return t===a}function Qh(t){return j(t)&&pt(t)==sn}function jh(t){return j(t)&&wt(t)==mf}var tm=si(da),em=si(function(t,n){return t<=n});function ys(t){if(!t)return[];if(bt(t))return wi(t)?Vt(t):xt(t);if(dn&&t[dn])return Md(t[dn]());var n=pt(t),i=n==Ft?Ji:n==Ut?Ln:Qe;return i(t)}function de(t){if(!t)return t===0?t:0;if(t=Nt(t),t===Ie||t===-Ie){var n=t<0?-1:1;return n*of}return t===t?t:0}function M(t){var n=de(t),i=n%1;return n===n?i?n-i:n:0}function Is(t){return t?Ce(M(t),0,Zt):0}function Nt(t){if(typeof t=="number")return t;if(St(t))return An;if(X(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=X(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=Vr(t);var i=Lf.test(t);return i||Nf.test(t)?_d(t.slice(2),i?2:8):Of.test(t)?An:+t}function ks(t){return Jt(t,yt(t))}function nm(t){return t?Ce(M(t),-pe,pe):t===0?t:0}function W(t){return t==null?"":At(t)}var im=Ye(function(t,n){if(bn(n)||bt(n)){Jt(n,rt(n),t);return}for(var i in n)K.call(n,i)&&mn(t,i,n[i])}),Es=Ye(function(t,n){Jt(n,yt(n),t)}),vi=Ye(function(t,n,i,r){Jt(n,yt(n),t,r)}),am=Ye(function(t,n,i,r){Jt(n,rt(n),t,r)}),rm=se(ia);function om(t,n){var i=qe(t);return n==null?i:no(i,n)}var sm=O(function(t,n){t=H(t);var i=-1,r=n.length,s=r>2?n[2]:a;for(s&&vt(n[0],n[1],s)&&(r=1);++i<r;)for(var f=n[i],d=yt(f),u=-1,h=d.length;++u<h;){var v=d[u],g=t[v];(g===a||zt(g,Ke[v])&&!K.call(t,v))&&(t[v]=f[v])}return t}),lm=O(function(t){return t.push(a,Wo),kt(As,a,t)});function fm(t,n){return Dr(t,A(n,3),Xt)}function dm(t,n){return Dr(t,A(n,3),ra)}function cm(t,n){return t==null?t:aa(t,A(n,3),yt)}function um(t,n){return t==null?t:so(t,A(n,3),yt)}function pm(t,n){return t&&Xt(t,A(n,3))}function hm(t,n){return t&&ra(t,A(n,3))}function mm(t){return t==null?[]:jn(t,rt(t))}function _m(t){return t==null?[]:jn(t,yt(t))}function Da(t,n,i){var r=t==null?a:Be(t,n);return r===a?i:r}function wm(t,n){return t!=null&&Ho(t,n,Uc)}function Na(t,n){return t!=null&&Ho(t,n,Vc)}var vm=Do(function(t,n,i){n!=null&&typeof n.toString!="function"&&(n=Un.call(n)),t[n]=i},Ua(It)),gm=Do(function(t,n,i){n!=null&&typeof n.toString!="function"&&(n=Un.call(n)),K.call(t,n)?t[n].push(i):t[n]=[i]},A),xm=O(wn);function rt(t){return bt(t)?to(t):fa(t)}function yt(t){return bt(t)?to(t,!0):Jc(t)}function bm(t,n){var i={};return n=A(n,3),Xt(t,function(r,s,f){re(i,n(r,s,f),r)}),i}function ym(t,n){var i={};return n=A(n,3),Xt(t,function(r,s,f){re(i,s,n(r,s,f))}),i}var Im=Ye(function(t,n,i){ti(t,n,i)}),As=Ye(function(t,n,i,r){ti(t,n,i,r)}),km=se(function(t,n){var i={};if(t==null)return i;var r=!1;n=Z(n,function(f){return f=xe(f,t),r||(r=f.length>1),f}),Jt(t,Ia(t),i),r&&(i=Ot(i,Q|ct|ot,vu));for(var s=n.length;s--;)ma(i,n[s]);return i});function Em(t,n){return Ss(t,mi(A(n)))}var Am=se(function(t,n){return t==null?{}:jc(t,n)});function Ss(t,n){if(t==null)return{};var i=Z(Ia(t),function(r){return[r]});return n=A(n),vo(t,i,function(r,s){return n(r,s[0])})}function Sm(t,n,i){n=xe(n,t);var r=-1,s=n.length;for(s||(s=1,t=a);++r<s;){var f=t==null?a:t[Qt(n[r])];f===a&&(r=s,f=i),t=fe(f)?f.call(t):f}return t}function Cm(t,n,i){return t==null?t:gn(t,n,i)}function Bm(t,n,i,r){return r=typeof r=="function"?r:a,t==null?t:gn(t,n,i,r)}var Cs=Uo(rt),Bs=Uo(yt);function $m(t,n,i){var r=P(t),s=r||ye(t)||Je(t);if(n=A(n,4),i==null){var f=t&&t.constructor;s?i=r?new f:[]:X(t)?i=fe(f)?qe(zn(t)):{}:i={}}return(s?Rt:Xt)(t,function(d,u,h){return n(i,d,u,h)}),i}function Pm(t,n){return t==null?!0:ma(t,n)}function Rm(t,n,i){return t==null?t:Io(t,n,va(i))}function Mm(t,n,i,r){return r=typeof r=="function"?r:a,t==null?t:Io(t,n,va(i),r)}function Qe(t){return t==null?[]:Xi(t,rt(t))}function Tm(t){return t==null?[]:Xi(t,yt(t))}function Om(t,n,i){return i===a&&(i=n,n=a),i!==a&&(i=Nt(i),i=i===i?i:0),n!==a&&(n=Nt(n),n=n===n?n:0),Ce(Nt(t),n,i)}function Lm(t,n,i){return n=de(n),i===a?(i=n,n=0):i=de(i),t=Nt(t),Wc(t,n,i)}function Dm(t,n,i){if(i&&typeof i!="boolean"&&vt(t,n,i)&&(n=i=a),i===a&&(typeof n=="boolean"?(i=n,n=a):typeof t=="boolean"&&(i=t,t=a)),t===a&&n===a?(t=0,n=1):(t=de(t),n===a?(n=t,t=0):n=de(n)),t>n){var r=t;t=n,n=r}if(i||t%1||n%1){var s=Qr();return ut(t+s*(n-t+md("1e-"+((s+"").length-1))),n)}return ua(t,n)}var Nm=Ze(function(t,n,i){return n=n.toLowerCase(),t+(i?$s(n):n)});function $s(t){return Fa(W(t).toLowerCase())}function Ps(t){return t=W(t),t&&t.replace(Uf,Cd).replace(rd,"")}function Fm(t,n,i){t=W(t),n=At(n);var r=t.length;i=i===a?r:Ce(M(i),0,r);var s=i;return i-=n.length,i>=0&&t.slice(i,s)==n}function Um(t){return t=W(t),t&&xf.test(t)?t.replace(sr,Bd):t}function Vm(t){return t=W(t),t&&Af.test(t)?t.replace(Ti,"\\$&"):t}var Wm=Ze(function(t,n,i){return t+(i?"-":"")+n.toLowerCase()}),zm=Ze(function(t,n,i){return t+(i?" ":"")+n.toLowerCase()}),Km=To("toLowerCase");function Hm(t,n,i){t=W(t),n=M(n);var r=n?We(t):0;if(!n||r>=n)return t;var s=(n-r)/2;return oi(qn(s),i)+t+oi(Gn(s),i)}function Gm(t,n,i){t=W(t),n=M(n);var r=n?We(t):0;return n&&r<n?t+oi(n-r,i):t}function qm(t,n,i){t=W(t),n=M(n);var r=n?We(t):0;return n&&r<n?oi(n-r,i)+t:t}function Ym(t,n,i){return i||n==null?n=0:n&&(n=+n),ec(W(t).replace(Oi,""),n||0)}function Zm(t,n,i){return(i?vt(t,n,i):n===a)?n=1:n=M(n),pa(W(t),n)}function Xm(){var t=arguments,n=W(t[0]);return t.length<3?n:n.replace(t[1],t[2])}var Jm=Ze(function(t,n,i){return t+(i?"_":"")+n.toLowerCase()});function Qm(t,n,i){return i&&typeof i!="number"&&vt(t,n,i)&&(n=i=a),i=i===a?Zt:i>>>0,i?(t=W(t),t&&(typeof n=="string"||n!=null&&!La(n))&&(n=At(n),!n&&Ve(t))?be(Vt(t),0,i):t.split(n,i)):[]}var jm=Ze(function(t,n,i){return t+(i?" ":"")+Fa(n)});function t_(t,n,i){return t=W(t),i=i==null?0:Ce(M(i),0,t.length),n=At(n),t.slice(i,i+n.length)==n}function e_(t,n,i){var r=l.templateSettings;i&&vt(t,n,i)&&(n=a),t=W(t),n=vi({},n,r,Vo);var s=vi({},n.imports,r.imports,Vo),f=rt(s),d=Xi(s,f),u,h,v=0,g=n.interpolate||Pn,x="__p += '",y=Qi((n.escape||Pn).source+"|"+g.source+"|"+(g===lr?Tf:Pn).source+"|"+(n.evaluate||Pn).source+"|$","g"),k="//# sourceURL="+(K.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++dd+"]")+`
`;t.replace(y,function(C,L,N,Ct,gt,Bt){return N||(N=Ct),x+=t.slice(v,Bt).replace(Vf,$d),L&&(u=!0,x+=`' +
__e(`+L+`) +
'`),gt&&(h=!0,x+=`';
`+gt+`;
__p += '`),N&&(x+=`' +
((__t = (`+N+`)) == null ? '' : __t) +
'`),v=Bt+C.length,C}),x+=`';
`;var S=K.call(n,"variable")&&n.variable;if(!S)x=`with (obj) {
`+x+`
}
`;else if(Rf.test(S))throw new $(B);x=(h?x.replace(_f,""):x).replace(wf,"$1").replace(vf,"$1;"),x="function("+(S||"obj")+`) {
`+(S?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(u?", __e = _.escape":"")+(h?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+x+`return __p
}`;var T=Ms(function(){return U(f,k+"return "+x).apply(a,d)});if(T.source=x,Oa(T))throw T;return T}function n_(t){return W(t).toLowerCase()}function i_(t){return W(t).toUpperCase()}function a_(t,n,i){if(t=W(t),t&&(i||n===a))return Vr(t);if(!t||!(n=At(n)))return t;var r=Vt(t),s=Vt(n),f=Wr(r,s),d=zr(r,s)+1;return be(r,f,d).join("")}function r_(t,n,i){if(t=W(t),t&&(i||n===a))return t.slice(0,Hr(t)+1);if(!t||!(n=At(n)))return t;var r=Vt(t),s=zr(r,Vt(n))+1;return be(r,0,s).join("")}function o_(t,n,i){if(t=W(t),t&&(i||n===a))return t.replace(Oi,"");if(!t||!(n=At(n)))return t;var r=Vt(t),s=Wr(r,Vt(n));return be(r,s).join("")}function s_(t,n){var i=jl,r=tf;if(X(n)){var s="separator"in n?n.separator:s;i="length"in n?M(n.length):i,r="omission"in n?At(n.omission):r}t=W(t);var f=t.length;if(Ve(t)){var d=Vt(t);f=d.length}if(i>=f)return t;var u=i-We(r);if(u<1)return r;var h=d?be(d,0,u).join(""):t.slice(0,u);if(s===a)return h+r;if(d&&(u+=h.length-u),La(s)){if(t.slice(u).search(s)){var v,g=h;for(s.global||(s=Qi(s.source,W(fr.exec(s))+"g")),s.lastIndex=0;v=s.exec(g);)var x=v.index;h=h.slice(0,x===a?u:x)}}else if(t.indexOf(At(s),u)!=u){var y=h.lastIndexOf(s);y>-1&&(h=h.slice(0,y))}return h+r}function l_(t){return t=W(t),t&&gf.test(t)?t.replace(or,Dd):t}var f_=Ze(function(t,n,i){return t+(i?" ":"")+n.toUpperCase()}),Fa=To("toUpperCase");function Rs(t,n,i){return t=W(t),n=i?a:n,n===a?Rd(t)?Ud(t):Id(t):t.match(n)||[]}var Ms=O(function(t,n){try{return kt(t,a,n)}catch(i){return Oa(i)?i:new $(i)}}),d_=se(function(t,n){return Rt(n,function(i){i=Qt(i),re(t,i,Ma(t[i],t))}),t});function c_(t){var n=t==null?0:t.length,i=A();return t=n?Z(t,function(r){if(typeof r[1]!="function")throw new Mt(E);return[i(r[0]),r[1]]}):[],O(function(r){for(var s=-1;++s<n;){var f=t[s];if(kt(f[0],this,r))return kt(f[1],this,r)}})}function u_(t){return Dc(Ot(t,Q))}function Ua(t){return function(){return t}}function p_(t,n){return t==null||t!==t?n:t}var h_=Lo(),m_=Lo(!0);function It(t){return t}function Va(t){return uo(typeof t=="function"?t:Ot(t,Q))}function __(t){return ho(Ot(t,Q))}function w_(t,n){return mo(t,Ot(n,Q))}var v_=O(function(t,n){return function(i){return wn(i,t,n)}}),g_=O(function(t,n){return function(i){return wn(t,i,n)}});function Wa(t,n,i){var r=rt(n),s=jn(n,r);i==null&&!(X(n)&&(s.length||!r.length))&&(i=n,n=t,t=this,s=jn(n,rt(n)));var f=!(X(i)&&"chain"in i)||!!i.chain,d=fe(t);return Rt(s,function(u){var h=n[u];t[u]=h,d&&(t.prototype[u]=function(){var v=this.__chain__;if(f||v){var g=t(this.__wrapped__),x=g.__actions__=xt(this.__actions__);return x.push({func:h,args:arguments,thisArg:t}),g.__chain__=v,g}return h.apply(t,me([this.value()],arguments))})}),t}function x_(){return ft._===this&&(ft._=Gd),this}function za(){}function b_(t){return t=M(t),O(function(n){return _o(n,t)})}var y_=xa(Z),I_=xa(Lr),k_=xa(Hi);function Ts(t){return Sa(t)?Gi(Qt(t)):tu(t)}function E_(t){return function(n){return t==null?a:Be(t,n)}}var A_=No(),S_=No(!0);function Ka(){return[]}function Ha(){return!1}function C_(){return{}}function B_(){return""}function $_(){return!0}function P_(t,n){if(t=M(t),t<1||t>pe)return[];var i=Zt,r=ut(t,Zt);n=A(n),t-=Zt;for(var s=Zi(r,n);++i<t;)n(i);return s}function R_(t){return P(t)?Z(t,Qt):St(t)?[t]:xt(ts(W(t)))}function M_(t){var n=++Kd;return W(t)+n}var T_=ri(function(t,n){return t+n},0),O_=ba("ceil"),L_=ri(function(t,n){return t/n},1),D_=ba("floor");function N_(t){return t&&t.length?Qn(t,It,oa):a}function F_(t,n){return t&&t.length?Qn(t,A(n,2),oa):a}function U_(t){return Fr(t,It)}function V_(t,n){return Fr(t,A(n,2))}function W_(t){return t&&t.length?Qn(t,It,da):a}function z_(t,n){return t&&t.length?Qn(t,A(n,2),da):a}var K_=ri(function(t,n){return t*n},1),H_=ba("round"),G_=ri(function(t,n){return t-n},0);function q_(t){return t&&t.length?Yi(t,It):0}function Y_(t,n){return t&&t.length?Yi(t,A(n,2)):0}return l.after=_h,l.ary=cs,l.assign=im,l.assignIn=Es,l.assignInWith=vi,l.assignWith=am,l.at=rm,l.before=us,l.bind=Ma,l.bindAll=d_,l.bindKey=ps,l.castArray=Ch,l.chain=ls,l.chunk=Du,l.compact=Nu,l.concat=Fu,l.cond=c_,l.conforms=u_,l.constant=Ua,l.countBy=qp,l.create=om,l.curry=hs,l.curryRight=ms,l.debounce=_s,l.defaults=sm,l.defaultsDeep=lm,l.defer=wh,l.delay=vh,l.difference=Uu,l.differenceBy=Vu,l.differenceWith=Wu,l.drop=zu,l.dropRight=Ku,l.dropRightWhile=Hu,l.dropWhile=Gu,l.fill=qu,l.filter=Zp,l.flatMap=Qp,l.flatMapDeep=jp,l.flatMapDepth=th,l.flatten=as,l.flattenDeep=Yu,l.flattenDepth=Zu,l.flip=gh,l.flow=h_,l.flowRight=m_,l.fromPairs=Xu,l.functions=mm,l.functionsIn=_m,l.groupBy=eh,l.initial=Qu,l.intersection=ju,l.intersectionBy=tp,l.intersectionWith=ep,l.invert=vm,l.invertBy=gm,l.invokeMap=ih,l.iteratee=Va,l.keyBy=ah,l.keys=rt,l.keysIn=yt,l.map=ui,l.mapKeys=bm,l.mapValues=ym,l.matches=__,l.matchesProperty=w_,l.memoize=hi,l.merge=Im,l.mergeWith=As,l.method=v_,l.methodOf=g_,l.mixin=Wa,l.negate=mi,l.nthArg=b_,l.omit=km,l.omitBy=Em,l.once=xh,l.orderBy=rh,l.over=y_,l.overArgs=bh,l.overEvery=I_,l.overSome=k_,l.partial=Ta,l.partialRight=ws,l.partition=oh,l.pick=Am,l.pickBy=Ss,l.property=Ts,l.propertyOf=E_,l.pull=rp,l.pullAll=os,l.pullAllBy=op,l.pullAllWith=sp,l.pullAt=lp,l.range=A_,l.rangeRight=S_,l.rearg=yh,l.reject=fh,l.remove=fp,l.rest=Ih,l.reverse=Pa,l.sampleSize=ch,l.set=Cm,l.setWith=Bm,l.shuffle=uh,l.slice=dp,l.sortBy=mh,l.sortedUniq=wp,l.sortedUniqBy=vp,l.split=Qm,l.spread=kh,l.tail=gp,l.take=xp,l.takeRight=bp,l.takeRightWhile=yp,l.takeWhile=Ip,l.tap=Np,l.throttle=Eh,l.thru=ci,l.toArray=ys,l.toPairs=Cs,l.toPairsIn=Bs,l.toPath=R_,l.toPlainObject=ks,l.transform=$m,l.unary=Ah,l.union=kp,l.unionBy=Ep,l.unionWith=Ap,l.uniq=Sp,l.uniqBy=Cp,l.uniqWith=Bp,l.unset=Pm,l.unzip=Ra,l.unzipWith=ss,l.update=Rm,l.updateWith=Mm,l.values=Qe,l.valuesIn=Tm,l.without=$p,l.words=Rs,l.wrap=Sh,l.xor=Pp,l.xorBy=Rp,l.xorWith=Mp,l.zip=Tp,l.zipObject=Op,l.zipObjectDeep=Lp,l.zipWith=Dp,l.entries=Cs,l.entriesIn=Bs,l.extend=Es,l.extendWith=vi,Wa(l,l),l.add=T_,l.attempt=Ms,l.camelCase=Nm,l.capitalize=$s,l.ceil=O_,l.clamp=Om,l.clone=Bh,l.cloneDeep=Ph,l.cloneDeepWith=Rh,l.cloneWith=$h,l.conformsTo=Mh,l.deburr=Ps,l.defaultTo=p_,l.divide=L_,l.endsWith=Fm,l.eq=zt,l.escape=Um,l.escapeRegExp=Vm,l.every=Yp,l.find=Xp,l.findIndex=ns,l.findKey=fm,l.findLast=Jp,l.findLastIndex=is,l.findLastKey=dm,l.floor=D_,l.forEach=fs,l.forEachRight=ds,l.forIn=cm,l.forInRight=um,l.forOwn=pm,l.forOwnRight=hm,l.get=Da,l.gt=Th,l.gte=Oh,l.has=wm,l.hasIn=Na,l.head=rs,l.identity=It,l.includes=nh,l.indexOf=Ju,l.inRange=Lm,l.invoke=xm,l.isArguments=Re,l.isArray=P,l.isArrayBuffer=Lh,l.isArrayLike=bt,l.isArrayLikeObject=tt,l.isBoolean=Dh,l.isBuffer=ye,l.isDate=Nh,l.isElement=Fh,l.isEmpty=Uh,l.isEqual=Vh,l.isEqualWith=Wh,l.isError=Oa,l.isFinite=zh,l.isFunction=fe,l.isInteger=vs,l.isLength=_i,l.isMap=gs,l.isMatch=Kh,l.isMatchWith=Hh,l.isNaN=Gh,l.isNative=qh,l.isNil=Zh,l.isNull=Yh,l.isNumber=xs,l.isObject=X,l.isObjectLike=j,l.isPlainObject=In,l.isRegExp=La,l.isSafeInteger=Xh,l.isSet=bs,l.isString=wi,l.isSymbol=St,l.isTypedArray=Je,l.isUndefined=Jh,l.isWeakMap=Qh,l.isWeakSet=jh,l.join=np,l.kebabCase=Wm,l.last=Dt,l.lastIndexOf=ip,l.lowerCase=zm,l.lowerFirst=Km,l.lt=tm,l.lte=em,l.max=N_,l.maxBy=F_,l.mean=U_,l.meanBy=V_,l.min=W_,l.minBy=z_,l.stubArray=Ka,l.stubFalse=Ha,l.stubObject=C_,l.stubString=B_,l.stubTrue=$_,l.multiply=K_,l.nth=ap,l.noConflict=x_,l.noop=za,l.now=pi,l.pad=Hm,l.padEnd=Gm,l.padStart=qm,l.parseInt=Ym,l.random=Dm,l.reduce=sh,l.reduceRight=lh,l.repeat=Zm,l.replace=Xm,l.result=Sm,l.round=H_,l.runInContext=p,l.sample=dh,l.size=ph,l.snakeCase=Jm,l.some=hh,l.sortedIndex=cp,l.sortedIndexBy=up,l.sortedIndexOf=pp,l.sortedLastIndex=hp,l.sortedLastIndexBy=mp,l.sortedLastIndexOf=_p,l.startCase=jm,l.startsWith=t_,l.subtract=G_,l.sum=q_,l.sumBy=Y_,l.template=e_,l.times=P_,l.toFinite=de,l.toInteger=M,l.toLength=Is,l.toLower=n_,l.toNumber=Nt,l.toSafeInteger=nm,l.toString=W,l.toUpper=i_,l.trim=a_,l.trimEnd=r_,l.trimStart=o_,l.truncate=s_,l.unescape=l_,l.uniqueId=M_,l.upperCase=f_,l.upperFirst=Fa,l.each=fs,l.eachRight=ds,l.first=rs,Wa(l,function(){var t={};return Xt(l,function(n,i){K.call(l.prototype,i)||(t[i]=n)}),t}(),{chain:!1}),l.VERSION=c,Rt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){l[t].placeholder=l}),Rt(["drop","take"],function(t,n){D.prototype[t]=function(i){i=i===a?1:at(M(i),0);var r=this.__filtered__&&!n?new D(this):this.clone();return r.__filtered__?r.__takeCount__=ut(i,r.__takeCount__):r.__views__.push({size:ut(i,Zt),type:t+(r.__dir__<0?"Right":"")}),r},D.prototype[t+"Right"]=function(i){return this.reverse()[t](i).reverse()}}),Rt(["filter","map","takeWhile"],function(t,n){var i=n+1,r=i==ir||i==rf;D.prototype[t]=function(s){var f=this.clone();return f.__iteratees__.push({iteratee:A(s,3),type:i}),f.__filtered__=f.__filtered__||r,f}}),Rt(["head","last"],function(t,n){var i="take"+(n?"Right":"");D.prototype[t]=function(){return this[i](1).value()[0]}}),Rt(["initial","tail"],function(t,n){var i="drop"+(n?"":"Right");D.prototype[t]=function(){return this.__filtered__?new D(this):this[i](1)}}),D.prototype.compact=function(){return this.filter(It)},D.prototype.find=function(t){return this.filter(t).head()},D.prototype.findLast=function(t){return this.reverse().find(t)},D.prototype.invokeMap=O(function(t,n){return typeof t=="function"?new D(this):this.map(function(i){return wn(i,t,n)})}),D.prototype.reject=function(t){return this.filter(mi(A(t)))},D.prototype.slice=function(t,n){t=M(t);var i=this;return i.__filtered__&&(t>0||n<0)?new D(i):(t<0?i=i.takeRight(-t):t&&(i=i.drop(t)),n!==a&&(n=M(n),i=n<0?i.dropRight(-n):i.take(n-t)),i)},D.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},D.prototype.toArray=function(){return this.take(Zt)},Xt(D.prototype,function(t,n){var i=/^(?:filter|find|map|reject)|While$/.test(n),r=/^(?:head|last)$/.test(n),s=l[r?"take"+(n=="last"?"Right":""):n],f=r||/^find/.test(n);!s||(l.prototype[n]=function(){var d=this.__wrapped__,u=r?[1]:arguments,h=d instanceof D,v=u[0],g=h||P(d),x=function(L){var N=s.apply(l,me([L],u));return r&&y?N[0]:N};g&&i&&typeof v=="function"&&v.length!=1&&(h=g=!1);var y=this.__chain__,k=!!this.__actions__.length,S=f&&!y,T=h&&!k;if(!f&&g){d=T?d:new D(this);var C=t.apply(d,u);return C.__actions__.push({func:ci,args:[x],thisArg:a}),new Tt(C,y)}return S&&T?t.apply(this,u):(C=this.thru(x),S?r?C.value()[0]:C.value():C)})}),Rt(["pop","push","shift","sort","splice","unshift"],function(t){var n=Dn[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);l.prototype[t]=function(){var s=arguments;if(r&&!this.__chain__){var f=this.value();return n.apply(P(f)?f:[],s)}return this[i](function(d){return n.apply(P(d)?d:[],s)})}}),Xt(D.prototype,function(t,n){var i=l[n];if(i){var r=i.name+"";K.call(Ge,r)||(Ge[r]=[]),Ge[r].push({name:n,func:i})}}),Ge[ai(a,te).name]=[{name:"wrapper",func:a}],D.prototype.clone=lc,D.prototype.reverse=fc,D.prototype.value=dc,l.prototype.at=Fp,l.prototype.chain=Up,l.prototype.commit=Vp,l.prototype.next=Wp,l.prototype.plant=Kp,l.prototype.reverse=Hp,l.prototype.toJSON=l.prototype.valueOf=l.prototype.value=Gp,l.prototype.first=l.prototype.head,dn&&(l.prototype[dn]=zp),l},ze=Vd();ke?((ke.exports=ze)._=ze,Vi._=ze):ft._=ze}).call(kn)})(Za,Za.exports);var xi=Za.exports;F.use(pw);F.use(hw);Gt.registerModule("form",mw);Gt.registerModule("publication",wx);Gt.registerModule("blocks",kx);Gt.registerModule("language",Ew);Gt.registerModule("revision",Bx);Gt.registerModule("browser",Iw);Gt.registerModule("repeaters",Tx);Gt.registerModule("parents",Nx);Gt.registerModule("attributes",xw);Gt.registerModule("permissions",Ux);F.component("a17-fieldset",bw);F.component("a17-publisher",sg);F.component("a17-title-editor",Xw);F.component("a17-blocks",kg);F.component("a17-page-nav",pg);F.component("a17-langswitcher",_w);F.component("a17-sticky-nav",Kw);F.component("a17-spinner",zl);F.component("a17-repeater",Lg);F.component("a17-browser",kw);F.component("a17-connectorfield",jg);F.component("a17-locationfield",Kg);F.component("a17-overlay",s0);F.component("a17-previewer",g0);F.component("a17-editor",sx);F.component("a17-modal-add",px);const nr=(e,o)=>F.options.components[e]?!1:F.component(e,o);typeof window[{}.VUE_APP_NAME].TWILL_BLOCKS_COMPONENTS!="undefined"&&window[{}.VUE_APP_NAME].TWILL_BLOCKS_COMPONENTS.map(e=>nr(e,{template:"#"+e,mixins:[Nw]}));const Ii=e=>`a17-${e.match(/\w+/)[0].replace(/([a-z])([A-Z])/g,"$1-$2").replace(/\s+/g,"-").toLowerCase()}`,gl=require.context("@/components/blocks/customs/",!1,/\.(js|vue)$/i);gl.keys().map(e=>{const o=Ii(e.replace(/customs\//,""));return nr(o,gl(e).default)});const xl=require.context("@/components/blocks/",!1,/\.(js|vue)$/i);xl.keys().map(e=>{const o=Ii(e);return nr(o,xl(e).default)});const bl=require.context("@/components/customs/",!0,/\.(js|vue)$/i);bl.keys().map(e=>{const o=Ii(e);return F.component(o,bl(e).default)});const yl=require.context("@/components/customs-vendor/",!0,/\.(js|vue)$/i);yl.keys().map(e=>{const o=Ii(e);return F.component(o,yl(e).default)});window[{}.VUE_APP_NAME].vm=window.vm=new F({store:Gt,el:"#app",mixins:[yw,Xl,Gl],data:function(){return{unSubscribe:function(){return null},isFormUpdated:!1}},computed:{..._t({loading:e=>e.form.loading,editor:e=>e.blocks.editor,isCustom:e=>e.form.isCustom}),...jt(["getSaveType","isEnabledSubmitOption"])},methods:{submitForm:function(){if(this.isSubmitPrevented){this.shouldRetrySubmitWhenAllowed=!0;return}this.loading||(this.isFormUpdated=!1,this.$store.commit(nt.UPDATE_FORM_LOADING,!0),this.unSubscribe(),this.$nextTick(()=>{const e=this.getSaveType||document.activeElement.name;this.isEnabledSubmitOption(e)?this.$store.dispatch(mt.SAVE_FORM,e).then(()=>{this.mutationsSubscribe()}):(this.$store.commit(nt.UPDATE_FORM_LOADING,!1),this.mutationsSubscribe())}))},confirmExit:function(e){if(!this.isFormUpdated||this.isCustom)window.event!==void 0?window.event.cancelBubble=!0:e.cancelBubble=!0;else return"message"},mutationsSubscribe:function(){this.unSubscribe=this.$store.subscribe((e,o)=>{Dw.includes(e.type)&&(this.isFormUpdated=!0,this.unSubscribe())})},watchForFormUpdates(e,o){const a=e==="form"&&(o==="fields"||o==="modalFields"),c=this.sortObjectArraysDeep(xi.cloneDeep(this.$store.state[e][o]),a);this.$store.watch(m=>m[e][o],m=>{const b=this.sortObjectArraysDeep(xi.cloneDeep(m),a);this.isFormUpdated=!xi.isEqual(c,b),this.$store.commit(ht.UPDATE_HAS_UNSAVED_CHANGES,this.isFormUpdated)},{deep:!0})},sortArrayByFirstKey(e){return xi.sortBy(e,o=>{if(typeof o=="object"){const a=Object.keys(o)[0];return o[a]}return o})},sortObjectArraysDeep(e,o=!1){return Array.isArray(e)&&o?e=this.sortArrayByFirstKey(e):Object.keys(e).forEach(a=>{Array.isArray(e[a])?o&&(e[a]=this.sortArrayByFirstKey(e[a])):typeof e[a]=="object"&&(e[a]=this.sortObjectArraysDeep(e[a]))}),e}},mounted:function(){window.onbeforeunload=this.confirmExit,this.$nextTick(()=>{this.watchForFormUpdates("mediaLibrary","selected"),this.watchForFormUpdates("form","fields"),this.watchForFormUpdates("form","modalFields"),this.watchForFormUpdates("blocks","blocks"),this.watchForFormUpdates("browser","selected"),this.watchForFormUpdates("repeaters","repeaters")})},beforeDestroy:function(){this.unSubscribe()},created:function(){ww()}});document.addEventListener("DOMContentLoaded",vw);
