import{U as _l,R as vl,r as gl,t as bl,u as xl,v as yl,S as Zi,w as Il,x as kl,y as El,z as Sl,B as Cl,C as Bl,E as Al,G as $l,H as Ll,I as Tl,J as zw,K as Kw,M as Os,f as F,O as Xi,P as Hw,n as W,Q as Rl,T as Ol,q as Gw,m as wt,b as jt,l as Re,p as Ms,W as ht,L as qw,X as Ml,Y as Pl,N as En,Z as Yw,F as nt,c as mt,d as xa,D as ya,a as Zw,_ as Xw,$ as Jw,a0 as Qw,a1 as jw,a2 as t_,a3 as qi,a4 as e_,a5 as n_,a6 as Ji,a7 as Ht,a8 as Dl,a9 as a_,e as Nl,g as Fl,aa as i_,ab as r_,ac as o_,ad as kn,h as s_,i as l_,s as Gt,j as d_,ae as f_,o as c_,k as u_}from"./form.af977733.js";import{a as Qi,b as p_,r as Ul,c as h_}from"./attributes.d3935126.js";import{a as m_}from"./Fieldset.3d54f463.js";import{V as Oe}from"./toggleVisibility.ff8a4ceb.js";import{F as w_}from"./index.735893e9.js";import{b as __,a as v_}from"./browser.5ebaed40.js";import{l as g_}from"./language.bdacb39e.js";const b_="addBlock",x_="moveBlock",y_="deleteBlock",I_="duplicateBlock",k_="reorderBlocks",E_="activateBlock",S_="addBlockPreview",C_="updateBlockPreviewLoading";var J={ADD_BLOCK:b_,MOVE_BLOCK:x_,DELETE_BLOCK:y_,DUPLICATE_BLOCK:I_,REORDER_BLOCKS:k_,ACTIVATE_BLOCK:E_,ADD_BLOCK_PREVIEW:S_,UPDATE_PREVIEW_LOADING:C_};const B_=[_l,vl,gl,bl,xl,yl,Zi,Il,kl,El,Sl,Cl,Bl,Al,$l,Ll,Tl],A_=[Zi];var Ps={REFRESH_BLOCK_PREVIEW:B_,REFRESH_BLOCK_PREVIEW_ALL:A_};const $_="updateParent";var Wl={UPDATE_PARENT:$_};const L_=[zw,_l,vl,gl,bl,xl,yl,Kw,Zi,Il,kl,El,Sl,Cl,Bl,Al,$l,Ll,Tl];var T_={props:{name:{type:String,required:!0},isOpen:{type:Boolean,default:!1}},data:function(){return{opened:this.isOpen}},methods:{open:function(){this.opened=!0},fieldName:function(e){return this.name+"["+e+"]"},repeaterName:function(e){return this.name.replace("[","-").replace("]","")+"|"+e},nestedEditorName:function(e){return this.name.replace("[","-").replace("]","")+"|"+e}}},Vl={props:{block:{type:Object,default:()=>{}},blockIndex:{type:Number,default:0},blocksLength:{type:Number,default:0}},methods:{selectBlock(){this.$emit("block:select")},unselectBlock(){this.$emit("block:unselect")},deleteBlock(){this.$emit("block:delete")},moveBlock(e){this.$emit("block:move",e)},toggleBlockDropdown(){this.blocksLength>1&&this.$refs.blockDropdown&&this.$refs.blockDropdown.toggle()}}},zl={props:{editorName:{type:String,required:!0},blocks:{type:Array,default:()=>[]},savedBlocksLength:{type:Number,default:0}},methods:{addAndEditBlock(e,o,{block:i,index:c}){window.TWILL.PREVSTATE=Os(this.$store.state),e(i,c),o(c)},saveBlock(e,o){window.TWILL.hasOwnProperty("PREVSTATE")&&delete window.TWILL.PREVSTATE,this.unselectBlock(e,o),this.$emit("block:save",o)},cancelBlock(e,o){window.TWILL.hasOwnProperty("PREVSTATE")&&(console.warn("Store - Restore previous Store state"),this.$store.replaceState(window.TWILL.PREVSTATE)),this.unselectBlock(e,o),this.$emit("block:cancel",o)},selectBlock(e,o){window.TWILL.PREVSTATE=Os(this.$store.state),e(),this.$emit("block:select",o)},unselectBlock(e,o){e(),window.TWILL.hasOwnProperty("PREVSTATE")&&delete window.TWILL.PREVSTATE,this.$emit("block:unselect",o)},moveBlock(e){this.$emit("block:move",e)},deleteBlock(e){this.$root.$refs.warningContentEditor?this.$root.$refs.warningContentEditor.open(()=>{e(),this.$emit("block:delete")}):(e(),this.$emit("block:delete"))}}},Kl={methods:{openEditor(e=-1,o=!1){this.$root.$refs.editor&&this.$root.$refs.editor.open(e,o)}}},R_=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("div",{staticClass:"stickyNav"},[i("div",{staticClass:"container"},[i("div",{staticClass:"stickyNav__nav"},[e.navItems.length>1?i("div",{staticClass:"stickyNav__links"},e._l(e.navItems,function(c,m){return i("a",{key:c.fieldset,class:{"s--on":c.active},attrs:{href:"#"},on:{click:function(x){return x.preventDefault(),e.scrollToFieldset(m)}}},[e._v(e._s(c.label))])}),0):e._e(),e._t("title")],2),i("div",{staticClass:"stickyNav__actions"},[e._t("actions")],2)])])},O_=[];const M_={name:"A17StickyNav",props:{items:{type:Array,default:function(){return[]}}},data:function(){return{lastScrollPos:0,topOffset:70,ticking:!1,navItems:this.items,clickedFieldset:-1,fieldset:[]}},methods:{getFieldsetPosition:function(){const e=this;this.lastScrollPos=window.pageYOffset,this.navItems.forEach(function(o,i){const c=e.fieldset[i],m=c?c.getBoundingClientRect().top+e.lastScrollPos:0;F.set(o,"position",m)})},setActiveItems:function(){const e=this;let o=0;this.navItems.forEach(function(i,c){const m=i.position-e.topOffset<e.lastScrollPos;F.set(i,"active",!1),m&&c>0&&(o=c)}),this.clickedFieldset>=0?F.set(e.navItems[e.clickedFieldset],"active",!0):F.set(e.navItems[o],"active",!0)},refresh:function(){const e=this;e.clickedFieldset=-1,this.getFieldsetPosition(),this.setActiveItems(),e.ticking=!1},_resize:Xi(function(){this.lastScrollPos=window.pageYOffset,this.refresh()},200),_scroll:function(){const e=this;this.lastScrollPos=window.pageYOffset,e.ticking||window.requestAnimationFrame(function(){e.refresh(),e.ticking=!1}),e.ticking=!0},scrollToFieldset:function(e){const o=this,i=this.navItems[e].position-this.topOffset+1;this.dispose(),this.clickedFieldset=e,this.getFieldsetPosition(),this.setActiveItems(),Hw({offset:i,easing:"easeOut",onComplete:function(){o.init()}})},init:function(){window.addEventListener("scroll",this._scroll),window.addEventListener("resize",this._resize)},dispose:function(){window.removeEventListener("scroll",this._scroll),window.removeEventListener("resize",this._resize)}},mounted:function(){const e=this;this.navItems.forEach(function(o,i){const c=document.querySelector("#"+o.fieldset);c?e.fieldset.push(c):e.fieldset.push(null)}),this.refresh(),this.init()},beforeDestroy:function(){this.dispose()}},Ds={};var P_=W(M_,R_,O_,!1,D_,"3fa1f7db",null,null);function D_(e){for(let o in Ds)this[o]=Ds[o]}var N_=function(){return P_.exports}(),F_=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("div",{staticClass:"titleEditor",class:e.titleEditorClasses},[i("div",{staticClass:"titleEditor__preview"},[i("h2",{staticClass:"titleEditor__title",class:{"titleEditor__title-only":!e.permalink}},[e.editableTitle?i("a",{staticClass:"titleEditor__title-wrapper",attrs:{href:"#"},on:{click:function(c){return c.preventDefault(),e.$refs.editModal.open()}}},[e.thumbnail?i("a17-avatar",{attrs:{name:e.title,thumbnail:e.thumbnail}}):e._e(),i("span",{staticClass:"titleEditor__title"},[i("span",{staticClass:"f--underlined--o"},[e._v(e._s(e.title))]),e._v(" "),i("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"edit"}})])],1):i("span",{staticClass:"titleEditor__title-wrapper"},[e.thumbnail?i("a17-avatar",{attrs:{name:e.title,thumbnail:e.thumbnail}}):e._e(),i("span",{staticClass:"titleEditor__title"},[e._v(" "+e._s(e.customTitle?e.customTitle:e.title)+" ")])],1)]),(e.permalink||e.customPermalink)&&!e.showModal?i("a",{staticClass:"titleEditor__permalink f--small",attrs:{href:e.fullUrl,target:"_blank"}},[i("span",{staticClass:"f--note f--external f--underlined--o"},[e._v(e._s(e._f("prettierUrl")(e.visibleUrl)))])]):e._e(),e.showModal?i("span",{staticClass:"titleEditor__permalink f--small f--note f--external f--underlined--o"},[e._v(e._s(e._f("prettierUrl")(e.visibleUrl)))]):e._e(),i("a17-modal",{ref:"editModal",staticClass:"modal--form",attrs:{title:e.modalTitle,forceLock:e.disabled}},[i("a17-langmanager",{attrs:{"control-publication":e.controlLanguagesPublication}}),i("form",{ref:"modalForm",attrs:{action:"#"},on:{submit:function(c){return c.preventDefault(),e.update(c)}}},[e._t("modal-form"),i("a17-modal-validation",{attrs:{mode:e.mode},on:{disable:e.lockModal}})],2)],1)],1),e._t("default")],2)},U_=[];const W_={name:"A17TitleEditor",mixins:[Rl,Ol],components:{"a17-avatar":Gw,"a17-modal-validation":Qi,"a17-langmanager":p_},props:{modalTitle:{type:String,default:function(){return this.$trans("modal.update.title")}},warningMessage:{type:String,default:"Missing title"},thumbnail:{type:String,default:""},showModal:{type:Boolean,default:!1},name:{default:"title"},editableTitle:{type:Boolean,default:!0},controlLanguagesPublication:{type:Boolean,default:!0},customTitle:{type:String,default:""},customPermalink:{type:String,default:""},localizedPermalinkbase:{type:String,default:""},localizedCustomPermalink:{type:String,default:""}},data:function(){return{disabled:!1}},mounted:function(){this.showModal&&this.$refs.editModal.open()},computed:{titleEditorClasses:function(){return{"titleEditor--error":this.error||this.title===this.warningMessage}},mode:function(){return this.showModal?"done":this.title.length>0?"update":"create"},fullUrl:function(){return this.customlink||this.baseUrl.replace("{language}",this.currentLocale.value).replace("{preview}/",this.published?"":"admin-preview/")+this.permalink},visibleUrl:function(){return this.customlink||this.baseUrl.replace("{language}",this.currentLocale.value).replace("{preview}/","")+this.permalink},title:function(){const e=this.fieldValueByName(this.name)?this.fieldValueByName(this.name):"";return(typeof e=="string"?e:e[this.currentLocale.value])||this.warningMessage},customlink:function(){const e=this.localizedCustomPermalink.length>0?JSON.parse(this.localizedCustomPermalink):{};return Object.keys(e).length>0?e[this.currentLocale.value]:this.customPermalink?this.customPermalink:!1},permalink:function(){const e=this.localizedPermalinkbase.length>0?JSON.parse(this.localizedPermalinkbase):{};return Object.keys(e).length>0?this.currentLocale.value in e?e[this.currentLocale.value].concat("/",this.fieldValueByName("slug")[this.currentLocale.value]):this.fieldValueByName("slug")[this.currentLocale.value]:this.fieldValueByName("slug")[this.currentLocale.value]},...wt({baseUrl:e=>e.form.baseUrl,currentLocale:e=>e.language.active,languages:e=>e.language.all,fields:e=>e.form.fields,published:e=>e.publication.published}),...jt(["fieldValueByName"])},filters:Re,methods:{update:function(){this.$refs.editModal.hide()},lockModal:function(e){this.disabled=e}}},Ns={};var V_=W(W_,F_,U_,!1,z_,"5776b723",null,null);function z_(e){for(let o in Ns)this[o]=Ns[o]}var K_=function(){return V_.exports}(),H_=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("div",{staticClass:"switcher",class:e.switcherClasses},[i("h4",{staticClass:"switcher__title"},[e._v(e._s(e.title))]),i("label",{staticClass:"switcher__button",attrs:{for:e.name+"_live"}},[e.isChecked?i("span",{staticClass:"switcher__label"},[e._v(e._s(e.formatTextEnabled))]):e._e(),e.isChecked?e._e():i("span",{staticClass:"switcher__label"},[e._v(e._s(e.formatTextDisabled))]),i("input",{directives:[{name:"model",rawName:"v-model",value:e.checkedValue,expression:"checkedValue"}],attrs:{type:"checkbox",disabled:e.disabled,name:e.name,id:e.name+"_live",value:"live"},domProps:{checked:Array.isArray(e.checkedValue)?e._i(e.checkedValue,"live")>-1:e.checkedValue},on:{change:function(c){var m=e.checkedValue,x=c.target,E=!!x.checked;if(Array.isArray(m)){var A="live",T=e._i(m,A);x.checked?T<0&&(e.checkedValue=m.concat([A])):T>-1&&(e.checkedValue=m.slice(0,T).concat(m.slice(T+1)))}else e.checkedValue=E}}}),i("span",{staticClass:"switcher__switcher"})])])},G_=[];const q_={name:"A17Toggle",props:{name:{type:String,default:""},title:{default:"Status"},disabled:{type:Boolean,default:!1},textEnabled:{type:String,default:"Live"},textDisabled:{type:String,default:"Draft"},textExpired:{type:String,default:"Expired"},textScheduled:{type:String,default:"Scheduled"}},filters:Re,computed:{switcherClasses:function(){return[this.isChecked?"switcher--active":"",this.formatTextEnabled?`switcher--${this.$options.filters.lowercase(this.formatTextEnabled)}`:""]},isChecked:function(){return this.published},formatTextEnabled:function(){const e=Ms(this.startDate,new Date),o=Ms(this.endDate,new Date);return this.endDate&&o<0?this.textExpired:this.startDate&&e>0?this.textScheduled:this.textEnabled},formatTextDisabled:function(){return this.textDisabled},checkedValue:{get:function(){return this.published},set:function(e){this.$store.commit(ht.UPDATE_PUBLISH_STATE,e),this.$emit("change",e)}},...wt({startDate:e=>e.publication.startDate,endDate:e=>e.publication.endDate,published:e=>e.publication.published})}},Fs={};var Y_=W(q_,H_,G_,!1,Z_,"3a916747",null,null);function Z_(e){for(let o in Fs)this[o]=Fs[o]}var X_=function(){return Y_.exports}(),J_=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("div",{staticClass:"accordion",class:e.visibilityClasses},[i("button",{staticClass:"accordion__trigger",attrs:{type:"button","aria-expanded":e.visible?"true":"false"},on:{click:e.onClickVisibility}},[e._t("accordion__title"),i("span",{staticClass:"accordion__value"},[e._t("accordion__value")],2),i("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"dropdown_module"}})],2),i("transition",{attrs:{css:!1,duration:275},on:{"before-enter":e.beforeEnter,"before-leave":e.beforeLeave,enter:e.enter,leave:e.leave}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.visible,expression:"visible"}],staticClass:"accordion__dropdown",attrs:{"aria-hidden":!e.visible}},[i("div",{staticClass:"accordion__list"},[e._t("default")],2)])])],1)},Q_=[];const j_={name:"A17Accordion",mixins:[Oe],watch:{open:function(){this.visible!==this.open&&(this.visible=this.open)}},methods:{getMaxHeight:function(){return Math.min(250,this.$el.querySelector(".accordion__list").clientHeight+1)},beforeEnter:function(e){e.style.maxHeight="0px"},enter:function(e,o){e.style.maxHeight=this.getMaxHeight()+"px"},beforeLeave:function(e,o){e.style.maxHeight=this.getMaxHeight()+"px"},leave:function(e,o){e.style.maxHeight="0px"}}},Us={};var tv=W(j_,J_,Q_,!1,ev,"43082274",null,null);function ev(e){for(let o in Us)this[o]=Us[o]}var je=function(){return tv.exports}(),nv=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("a17-accordion",{attrs:{open:e.open},on:{toggleVisibility:e.notifyOpen}},[i("span",{attrs:{slot:"accordion__title"},slot:"accordion__title"},[e._t("default")],2),i("div",{attrs:{slot:"accordion__value"},slot:"accordion__value"},[e._v(e._s(e.currentLabel))]),i("a17-radiogroup",{attrs:{name:e.name,radios:e.radios,initialValue:e.currentValue},on:{change:e.changeValue}})],1)},av=[];const iv={name:"A17Radioaccordion",components:{"a17-accordion":je},mixins:[Oe],props:{value:{default:""},title:{default:""},name:{default:""},radios:{default:function(){return[]}}},data:function(){return{currentValue:this.value}},computed:{currentLabel:function(){const e=this.radios.filter(this.isSameValue);return e.length?e[0].label:""}},methods:{isSameValue:function(e){return e.value===this.currentValue},changeValue:function(e){this.currentValue=e,this.$emit("change",e)},notifyOpen:function(e){this.$emit("open",e,this.$options.name)}}},Ws={};var rv=W(iv,nv,av,!1,ov,null,null,null);function ov(e){for(let o in Ws)this[o]=Ws[o]}var sv=function(){return rv.exports}(),lv=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("a17-accordion",{attrs:{open:e.open},on:{toggleVisibility:e.notifyOpen}},[i("span",{attrs:{slot:"accordion__title"},slot:"accordion__title"},[e._t("default")],2),i("div",{attrs:{slot:"accordion__value"},slot:"accordion__value"},[e._v(e._s(e.currentLabel))]),i("a17-checkboxgroup",{attrs:{name:e.name,options:e.currentOptions,selected:e.currentValue},on:{change:e.changeValue}})],1)},dv=[];const fv={name:"A17Reviewaccordion",components:{"a17-accordion":je},mixins:[Oe],props:{value:{default:function(){return[]}},title:{type:String,default:""},name:{type:String,default:""},options:{default:function(){return[]}}},data:function(){return{currentOptions:this.options,currentValue:this.value}},computed:{currentLabel:function(){let e="Pending approval";const o=this.currentValue[this.currentValue.length-1];return this.currentValue.length&&this.options.forEach(function(i){i.value===o&&(e=i.display)}),e}},methods:{changeValue:function(e){this.currentValue=e,this.$store.commit(ht.UPDATE_REVIEW_PROCESS,e)},notifyOpen:function(e){this.$emit("open",e,this.$options.name)}}},Vs={};var cv=W(fv,lv,dv,!1,uv,null,null,null);function uv(e){for(let o in Vs)this[o]=Vs[o]}var pv=function(){return cv.exports}(),hv=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("a17-accordion",{attrs:{open:e.open},on:{toggleVisibility:e.notifyOpen}},[i("span",{attrs:{slot:"accordion__title"},slot:"accordion__title"},[e._t("default")],2),i("div",{attrs:{slot:"accordion__value"},slot:"accordion__value"},[e._v(e._s(e.currentLabel))]),i("a17-checkboxgroup",{attrs:{name:e.name,options:e.options,selected:e.currentValue,min:1},on:{change:e.changeValue}})],1)},mv=[];const wv={name:"A17Checkboxaccordion",components:{"a17-accordion":je},mixins:[Oe],props:{value:{default:function(){return[]}},title:{type:String,default:""},name:{type:String,default:""},options:{default:function(){return[]}}},data:function(){return{currentValue:this.value}},watch:{value:function(e){this.currentValue=e}},computed:{currentLabel:function(){return this.currentValue.length+" "+this.$trans("publisher.languages-published")}},methods:{changeValue:function(e){this.currentValue=e,this.$store.commit(qw.PUBLISH_LANG,e)},notifyOpen:function(e){this.$emit("open",e,this.$options.name)}}},zs={};var _v=W(wv,hv,mv,!1,vv,null,null,null);function vv(e){for(let o in zs)this[o]=zs[o]}var gv=function(){return _v.exports}(),bv=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("a17-accordion",{attrs:{open:e.open},on:{toggleVisibility:e.notifyOpen}},[i("span",{attrs:{slot:"accordion__title"},slot:"accordion__title"},[e._t("default"),e._v(" "),i("span",{staticClass:"f--small f--note"},[e._v("("+e._s(e.revisions.length)+")")])],2),i("div",{attrs:{slot:"accordion__value"},slot:"accordion__value"},[e._v(e._s(e.$trans("publisher.last-edit"))+" "),i("timeago",{attrs:{"auto-update":1,datetime:new Date(e.revisions[0].datetime)}})],1),i("div",{staticClass:"revaccordion__scroller"},[i("ul",{staticClass:"revaccordion__list"},e._l(e.revisions,function(c){return i("li",{key:c.id,staticClass:"revaccordion__item"},[i("a",{attrs:{href:"#"},on:{click:function(m){return m.preventDefault(),e.openPreview(c.id)}}},[i("span",{staticClass:"revaccordion__author"},[e._v(e._s(c.author))]),i("span",{staticClass:"revaccordion__datetime"},[c.label?i("span",{staticClass:"tag"},[e._v(e._s(c.label))]):e._e(),e._v(" "+e._s(e._f("formatDate")(c.datetime))+" ")])])])}),0)])])},xv=[];const yv={name:"A17Revisions",components:{"a17-accordion":je},mixins:[Oe],props:{revisions:{default:function(){return[]}}},filters:Re,methods:{notifyOpen:function(e){this.$emit("open",e,this.$options.name)},openPreview:function(e){this.$root.$refs.preview&&this.$root.$refs.preview.open(parseInt(e))}}},Ks={};var Iv=W(yv,bv,xv,!1,kv,"ab3cc366",null,null);function kv(e){for(let o in Ks)this[o]=Ks[o]}var Ev=function(){return Iv.exports}(),Sv=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("a17-accordion",{attrs:{open:e.open},on:{toggleVisibility:e.notifyOpen}},[i("span",{attrs:{slot:"accordion__title"},slot:"accordion__title"},[e._t("default")],2),i("div",{attrs:{slot:"accordion__value"},slot:"accordion__value"},[e.startDate?[e._v(" "+e._s(e._f("formatDateWithFormat")(e.startDate,e.dateDisplayFormat))+" ")]:[e._v(" "+e._s(e.defaultStartDate)+" ")]],2),i("div",{staticClass:"accordion__fields"},[i("a17-datepicker",{attrs:{name:"publish_date","place-holder":e.$trans("publisher.start-date"),time_24hr:e.date_24h,altFormat:e.dateFormat,initialValue:e.startDate,maxDate:e.endDate,enableTime:!0,allowInput:!0,staticMode:!0,clear:!0},on:{open:e.openStartCalendar,close:e.closeCalendar,input:e.updateStartDate}}),i("a17-datepicker",{attrs:{name:"end_date","place-holder":e.$trans("publisher.end-date"),time_24hr:e.date_24h,altFormat:e.dateFormat,initialValue:e.endDate,minDate:e.startDate,enableTime:!0,allowInput:!0,staticMode:!0,clear:!0},on:{open:e.openEndCalendar,close:e.closeCalendar,input:e.updateEndDate}})],1)])},Cv=[];const Bv={name:"A17Pubaccordion",components:{"a17-accordion":je},mixins:[Oe],props:{defaultStartDate:{type:String,default:function(){return this.$trans("publisher.immediate")}},defaultEndDate:{type:String,default:""},dateDisplayFormat:{type:String,default:"MMM, DD, YYYY, "+Ml()},dateFormat:{type:String,default:null},date_24h:{type:Boolean,default:Pl()}},filters:Re,computed:{...wt({startDate:e=>e.publication.startDate,endDate:e=>e.publication.endDate})},methods:{updateStartDate:function(e){this.$store.commit(ht.UPDATE_PUBLISH_START_DATE,e)},updateEndDate:function(e){this.$store.commit(ht.UPDATE_PUBLISH_END_DATE,e)},notifyOpen:function(e){this.$emit("open",e,this.$options.name)},openCalendar:function(){setTimeout(function(){document.querySelectorAll(".accordion.s--open, .accordion.s--open .accordion__dropdown").forEach(function(o){o.style.overflow="visible"})},10)},openStartCalendar:function(){this.openCalendar()},openEndCalendar:function(){this.openCalendar()},closeCalendar:function(){document.querySelectorAll(".accordion.s--open, .accordion.s--open .accordion__dropdown").forEach(function(o){o.style.overflow=""})}}},Hs={};var Av=W(Bv,Sv,Cv,!1,$v,null,null,null);function $v(e){for(let o in Hs)this[o]=Hs[o]}var Lv=function(){return Av.exports}();function Hl(e,o){const i=[];function c(x){return Array(x+1).join(o)+" "}function m(x,E){x.forEach(function(A){const T={};if(T.value=A.id,A.edit&&(T.edit=A.edit),T.label=c(E)+A.name,i.push(T),A.children&&A.children.length){const z=E+1;m(A.children,z)}})}return m(e,0),i}var Tv=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("a17-accordion",{attrs:{open:e.open},on:{toggleVisibility:e.notifyOpen}},[i("span",{attrs:{slot:"accordion__title"},slot:"accordion__title"},[e._t("default")],2),i("div",{attrs:{slot:"accordion__value"},domProps:{innerHTML:e._s(e.currentLabel)},slot:"accordion__value"}),i("div",{staticClass:"accordion__fields"},[i("a17-select",{attrs:{name:"parent_id",options:e.options,selected:e.currentValue,size:"small"},on:{change:e.updateSelected}})],1)])},Rv=[];const Ov={name:"A17Parents",components:{"a17-accordion":je},mixins:[Oe],props:{value:{default:0},parents:{default:function(){return[]}}},computed:{currentLabel:function(){const e=this.options.filter(this.isSameValue);return e.length?e[0].label:""},options:function(){const e=Hl(this.parents,"&nbsp;&nbsp;&nbsp;"),o={value:0,label:"(No parent)"};return e.unshift(o),e},...wt({currentValue:e=>e.parents.active})},methods:{isSameValue:function(e){return e.value===this.currentValue},updateSelected:function(e){this.$store.commit(Wl.UPDATE_PARENT,e)},notifyOpen:function(e){this.$emit("open",e,this.$options.name)}}},Gs={};var Mv=W(Ov,Tv,Rv,!1,Pv,"5c82c6d8",null,null);function Pv(e){for(let o in Gs)this[o]=Gs[o]}var Dv=function(){return Mv.exports}(),Nv=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("div",{staticClass:"multibutton"},[i("a17-dropdown",{ref:"submitDown",attrs:{position:"bottom-right",width:"full",offset:0}},[e.isDisabled(e.options[0])?i("a17-button",{attrs:{type:"button",variant:"validate",disabled:!0}},[e._v(e._s(e.options[0].text))]):i("a17-button",{attrs:{type:e.type,name:e.options[0].name,variant:"validate"},on:{click:function(c){return e.buttonClicked(e.options[0].name)}}},[e._v(e._s(e.options[0].text))]),e.hasValidOptions?i("button",{staticClass:"multibutton__trigger",attrs:{type:"button"},on:{click:function(c){return e.$refs.submitDown.toggle()}}},[i("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"dropdown_module"}})]):e._e(),e.otherOptions.length?i("div",{attrs:{slot:"dropdown__content"},slot:"dropdown__content"},[i("ul",e._l(e.otherOptions,function(c){return i("li",{key:c.name},[e.isDisabled(c)?i("button",{attrs:{type:"button",disabled:""}},[e._v(e._s(c.text))]):i("button",{attrs:{type:e.type,name:c.name},on:{click:function(m){return e.buttonClicked(c.name)}}},[e._v(e._s(c.text))])])}),0)]):e._e()],1)],1)},Fv=[];const Uv={name:"A17Multibutton",props:{type:{default:"button"},message:{type:String,default:""},options:{default:function(){return[]}}},data:function(){return{}},computed:{otherOptions:function(){return this.options.length?this.options.slice(1):[]},hasValidOptions:function(){const e=this.options.filter(function(i){return!i.hasOwnProperty("disabled")||i.disabled===!1}),o=Boolean(e.length>0);return!o&&this.message&&this.$store.commit(En.SET_NOTIF,{message:this.message,variant:"success"}),o}},methods:{isDisabled:function(e){return e.hasOwnProperty("disabled")?e.disabled===!0:!1},buttonClicked:function(e){this.$emit("button-clicked",e)}}},qs={};var Wv=W(Uv,Nv,Fv,!1,Vv,"50a61eea",null,null);function Vv(e){for(let o in qs)this[o]=qs[o]}var zv=function(){return Wv.exports}(),Kv=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("div",{staticClass:"userInfo"},[i("div",{staticClass:"userInfo__content"},[e.userInfo.registered_at?i("div",{staticClass:"userInfo__item"},[i("div",{staticClass:"userInfo__row"},[i("span",{staticClass:"userInfo__row-cell"},[e._v("Registered at")]),i("span",{staticClass:"userInfo__row-cell userInfo__row-cell--value"},[e._v(e._s(e.userInfo.registered_at))])])]):e._e(),e.userInfo.last_login_at?i("div",{staticClass:"userInfo__item"},[i("div",{staticClass:"userInfo__row"},[i("span",{staticClass:"userInfo__row-cell"},[e._v("Last login at")]),i("span",{staticClass:"userInfo__row-cell userInfo__row-cell--value"},[e._v(e._s(e.userInfo.last_login_at))])])]):e._e(),e.userInfo.resend_registration_link?i("div",{staticClass:"userInfo__item"},[i("a",{staticClass:"userInfo__link",attrs:{href:e.userInfo.resend_registration_link,type:"submit"}},[i("span",{staticClass:"f--link-underlined--o"},[e._v("Resend registration email")])])]):e._e(),i("div",{staticClass:"userInfo__item"},[i("button",{staticClass:"userInfo__link",attrs:{type:"button"},on:{click:e.openPasswordModal}},[i("span",{staticClass:"f--link-underlined--o"},[e._v(e._s(e.userInfo.is_activated?"Reset password":"Register account now"))])])])]),i("a17-modal",{ref:"passwordModal",staticClass:"modal--form",attrs:{title:e.userInfo.is_activated?"Reset password for "+e.userInfo.user_name:"Register account for "+e.userInfo.user_name},on:{hide:e.hidePasswordModal}},[i("div",{staticClass:"userInfo__form-row"},[i("a17-textfield",{attrs:{name:"new_password",id:"new_password",fieldName:"new_password",inStore:"value",label:"New password",maxlength:50,note:"Must have at least 8 characters",required:"",type:"password"}})],1),e.userInfo.is_activated?i("div",{staticClass:"userInfo__form-row"},[i("a17-singlecheckbox",{attrs:{inStore:"value",name:"require_password_change",initialValue:!1,id:"require_password_change",fieldName:"require_password_change",label:"Require password change at next login"}})],1):e._e(),i("div",{staticClass:"userInfo__form-row"},[i("a17-modal-validation",{attrs:{mode:e.userInfo.is_activated?"Update":"Create"}})],1)])],1)},Hv=[];const Gv={name:"A17UserInfo",components:{"a17-textfield":Yw,"a17-modal-validation":Qi},props:{userInfo:{type:Object,default:null}},data(){return{isPasswordModalOpen:!1}},methods:{openPasswordModal(){this.isPasswordModalOpen=!0,this.$refs.passwordModal.open(),this.$store.commit(nt.UPDATE_FORM_FIELD,{name:"reset_password",value:!0})},hidePasswordModal(){this.$store.commit(nt.UPDATE_FORM_FIELD,{name:"reset_password",value:!1})}}},Ys={};var qv=W(Gv,Kv,Hv,!1,Yv,"6ad0159c",null,null);function Yv(e){for(let o in Ys)this[o]=Ys[o]}var Zv=function(){return qv.exports}(),Xv=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("div",{staticClass:"publisher__wrapper"},[e.withPublicationToggle?i("a17-switcher",{attrs:{title:e.$trans("publisher.switcher-title","Status"),name:"publish_state",textEnabled:e.textEnabled,textDisabled:e.textDisabled,"text-scheduled":e.textScheduled,"text-expired":e.textExpired}}):e._e(),e._t("default"),e.userInfo?i("a17-userinfo",{attrs:{userInfo:e.userInfo}}):e._e(),e.reviewProcess&&e.reviewProcess.length?i("a17-reviewaccordion",{attrs:{options:e.reviewProcess,name:"review_process",value:e.reviewProcessCompleteValues,open:e.openStates.A17Reviewaccordion},on:{open:e.openCloseAccordion}},[e._v(e._s(e.$trans("publisher.review-status")))]):e._e(),e.visibility&&e.visibilityOptions&&e.visibilityOptions.length?i("a17-radioaccordion",{attrs:{radios:e.visibilityOptions,name:"visibility",value:e.visibility,open:e.openStates.A17Radioaccordion},on:{open:e.openCloseAccordion,change:e.updateVisibility}},[e._v(e._s(e.$trans("publisher.visibility")))]):e._e(),e.languages&&e.showLanguages&&e.languages.length>1?i("a17-checkboxaccordion",{attrs:{options:e.languages,name:"active_languages",value:e.publishedLanguagesValues,open:e.openStates.A17Checkboxaccordion},on:{open:e.openCloseAccordion}},[e._v(e._s(e.$trans("publisher.languages")))]):e._e(),e.withPublicationTimeframe?i("a17-pubaccordion",{attrs:{"date-display-format":e.dateDisplayFormat,"date-format":e.dateFormat,date_24h:e.date_24h,open:e.openStates.A17Pubaccordion},on:{open:e.openCloseAccordion}},[e._v(e._s(e.$trans("publisher.published-on")))]):e._e(),e.revisions.length?i("a17-revaccordion",{attrs:{open:e.openStates.A17Revisions,revisions:e.revisions},on:{open:e.openCloseAccordion}},[e._v(e._s(e.$trans("publisher.revisions")))]):e._e(),e.parents.length?i("a17-parentaccordion",{attrs:{open:e.openStates.A17Parents,parents:e.parents,value:e.parentId},on:{open:e.openCloseAccordion}},[e._v(e._s(e.$trans("publisher.parent-page")))]):e._e(),e.revisions.length?i("div",{staticClass:"publisher__item"},[i("a",{staticClass:"publisher__link",attrs:{href:"#"},on:{click:function(c){return c.preventDefault(),e.openPreview(c)}}},[i("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"preview"}}),i("span",{staticClass:"f--link-underlined--o"},[e._v(e._s(e.$trans("publisher.preview")))])])]):e._e(),i("div",{staticClass:"publisher__item publisher__item--btns"},[i("a17-multibutton",{attrs:{options:e.submitOptions,type:"submit",message:e.submitDisableMessage},on:{"button-clicked":e.buttonClicked}})],1)],2)},Jv=[];const Qv={name:"A17Publisher",components:{"a17-switcher":X_,"a17-radioaccordion":sv,"a17-checkboxaccordion":gv,"a17-reviewaccordion":pv,"a17-revaccordion":Ev,"a17-parentaccordion":Dv,"a17-pubaccordion":Lv,"a17-multibutton":zv,"a17-userinfo":Zv},props:{showLanguages:{type:Boolean,default:!0},dateFormat:{type:String,default:null},dateDisplayFormat:{type:String,default:"MMM, DD, YYYY, "+Ml()},date_24h:{type:Boolean,default:Pl()}},data:function(){return{singleOpen:!0,openStates:{A17Reviewaccordion:!1,A17Radioaccordion:!1,A17Checkboxaccordion:!1,A17Revisions:!1,A17Pubaccordion:!1,A17Parents:!1}}},filters:Re,computed:{reviewProcessCompleteValues:function(){const e=[];return this.reviewProcessComplete.length&&this.reviewProcessComplete.forEach(function(o){e.push(o.value)}),e},submitOptions:function(){return this.$store.getters.getSubmitOptions},publishedLanguagesValues:function(){const e=[];return this.publishedLanguages.length&&this.publishedLanguages.forEach(function(o){e.push(o.value)}),e},...wt({languages:e=>e.language.all,revisions:e=>e.revision.all,parentId:e=>e.parents.active,parents:e=>e.parents.all,published:e=>e.publication.published,publishSubmit:e=>e.publication.publishSubmit,textEnabled:e=>e.publication.publishedLabel,textDisabled:e=>e.publication.draftLabel,textExpired:e=>e.publication.expiredLabel,textScheduled:e=>e.publication.scheduledLabel,withPublicationToggle:e=>e.publication.withPublicationToggle,withPublicationTimeframe:e=>e.publication.withPublicationTimeframe,visibility:e=>e.publication.visibility,visibilityOptions:e=>e.publication.visibilityOptions,reviewProcess:e=>e.publication.reviewProcess,hasUnsavedChanges:e=>e.publication.hasUnsavedChanges,submitDisableMessage:e=>e.publication.submitDisableMessage,userInfo:e=>e.publication.userInfo}),...jt(["publishedLanguages","reviewProcessComplete"])},methods:{buttonClicked:function(e){this.$store.commit(ht.UPDATE_SAVE_TYPE,e)},openCloseAccordion:function(e,o){if(!!this.singleOpen)if(e)for(const i in this.openStates)this.openStates[i]=i===o;else this.openStates[o]=!1},openPreview:function(){this.$root.$refs.preview&&this.$root.$refs.preview.open(0)},updateVisibility:function(e){this.$store.commit(ht.UPDATE_PUBLISH_VISIBILITY,e)},openMoveToTrashModal:function(){this.$parent.$refs.moveToTrashModal.open()}}},Zs={};var jv=W(Qv,Xv,Jv,!1,t0,"acc12942",null,null);function t0(e){for(let o in Zs)this[o]=Zs[o]}var e0=function(){return jv.exports}(),n0=function(){var e=this,o=e.$createElement,i=e._self._c||o;return e.parents.length||e.hasUrl?i("div",{staticClass:"pagenav"},[e.parents.length?i("div",{staticClass:"pagenav__form"},[i("a17-vselect",{attrs:{name:"parents_sources",placeholder:e.placeholder,size:"large",searchable:!0,options:e.options},on:{change:e.gotoUrl}})],1):e._e(),e.hasUrl?i("nav",{staticClass:"pagenav__nav"},[e.previousUrl?i("a",{staticClass:"pagenav__btn",attrs:{href:e.previousUrl}},[e._v("\u2190 "+e._s(e.previousLabel))]):i("span",{staticClass:"pagenav__btn"},[e._v("\u2190 "+e._s(e.previousLabel))]),e.nextUrl?i("a",{staticClass:"pagenav__btn",attrs:{href:e.nextUrl}},[e._v(e._s(e.nextLabel)+" \u2192")]):i("span",{staticClass:"pagenav__btn"},[e._v(e._s(e.nextLabel)+" \u2192")])]):e._e()]):e._e()},a0=[];const i0={name:"A17PageNav",props:{previousLabel:{type:String,default:"Previous page"},nextLabel:{type:String,default:"Next page"},previousUrl:{type:String,default:""},nextUrl:{type:String,default:""},placeholder:{type:String,default:""}},data:function(){return{}},computed:{hasUrl:function(){return this.previousUrl||this.nextUrl},options:function(){return Hl(this.parents,"\u2013")},...wt({parents:e=>e.parents.all})},methods:{gotoUrl:function(e){e.edit&&(window.location.href=e.edit)}},beforeMount:function(){}},Xs={};var r0=W(i0,n0,a0,!1,o0,"6efcfdf8",null,null);function o0(e){for(let o in Xs)this[o]=Xs[o]}var s0=function(){return r0.exports}(),l0=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("div",{staticClass:"block",class:e.blockClasses},[i("div",{staticClass:"block__header",on:{dblclick:function(c){return c.preventDefault(),e.toggleExpand()}}},[e.withHandle?i("span",{staticClass:"block__handle"}):e._e(),i("div",{staticClass:"block__toggle"},[e.withMoveDropdown?i("a17-dropdown",{ref:e.moveDropdown,staticClass:"f--small",attrs:{position:"bottom-left",maxHeight:270}},[i("span",{staticClass:"block__counter f--tiny",on:{click:function(c){return e.$refs[e.moveDropdown].toggle()}}},[e._v(e._s(e.index+1))]),i("div",{attrs:{slot:"dropdown__content"},slot:"dropdown__content"},[e._t("dropdown-numbers")],2)]):i("span",{staticClass:"block__counter f--tiny"},[e._v(e._s(e.index+1))]),i("span",{staticClass:"block__title"},[e._v(e._s(e.blockTitle))])],1),i("div",{staticClass:"block__actions"},[e._t("block-actions"),e.withAddDropdown?i("a17-dropdown",{ref:e.addDropdown,attrs:{position:"bottom-right"},on:{open:function(c){e.hover=!0},close:function(c){e.hover=!1}}},[i("a17-button",{attrs:{variant:"icon","data-action":""},on:{click:function(c){return e.$refs[e.addDropdown].toggle()}}},[i("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"add"}})]),i("div",{attrs:{slot:"dropdown__content"},slot:"dropdown__content"},[e._t("dropdown-add")],2)],1):e._e(),i("a17-button",{attrs:{variant:"icon","data-action":"","aria-expanded":e.visible?"true":"false"},on:{click:function(c){return e.toggleExpand()}}},[i("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"expand"}})]),i("a17-dropdown",{ref:e.actionsDropdown,attrs:{position:"bottom-right"},on:{open:function(c){e.hover=!0},close:function(c){e.hover=!1}}},[i("a17-button",{attrs:{variant:"icon"},on:{click:function(c){return e.$refs[e.actionsDropdown].toggle()}}},[i("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"more-dots"}})]),i("div",{attrs:{slot:"dropdown__content"},slot:"dropdown__content"},[e._t("dropdown-action")],2)],1)],2)]),e.visible?i("div",{staticClass:"block__content"},[i(""+e.block.type,e._b({key:"form_"+e.block.type+"_"+e.block.id,tag:"component",attrs:{name:e.componentName(e.block.id)}},"component",e.block.attributes,!1)),i("a17-inputframe",{attrs:{size:"small",label:"",name:"block."+e.block.id}})],1):e._e()])},d0=[];const f0={name:"A17BlockEditorItem",props:{index:{type:Number,default:0},opened:{type:Boolean,default:!0},size:{type:String,default:""},block:{type:Object,default:()=>{}},withHandle:{type:Boolean,default:!0}},data(){return{visible:!1,hover:!1,withMoveDropdown:!0,withAddDropdown:!0}},filters:Re,computed:{titleFieldValue:function(){const e=this.blockFieldValue(this.block.titleField);return e?typeof e=="object"?e[this.currentLocale.value]:e:null},blockTitle:function(){const e=this.block.title||"",o=this.titleFieldValue||"",i=e&&o?" \u2014 ":"";return this.block.hideTitlePrefix?`${o}`:`${e}${i}${o}`},blockClasses(){return[this.visible?"block--open":"",this.hover?"block--focus":"",this.size?`block--${this.size}`:""]},moveDropdown(){return`moveBlock${this.index}Dropdown`},actionsDropdown(){return`action${this.block.id}Dropdown`},addDropdown(){return`add${this.block.id}Dropdown`},...wt({currentLocale:e=>e.language.active}),...jt(["fieldValueByName"])},watch:{opened(){this.visible=this.opened}},created(){this.block.ui&&this.block.ui.isNew&&this.toggleExpand()},methods:{toggleExpand(){this.visible=!this.visible},componentName(e){return"blocks["+e+"]"},blockFieldName:function(e){return e?`blocks[${this.block.id}][${e}]`:""},blockFieldValue:function(e){if(!e)return null;const o=this.blockFieldName(e);return this.fieldValueByName(o)}},beforeMount(){this.$slots["dropdown-numbers"]||(this.withMoveDropdown=!1),this.$slots["dropdown-add"]||(this.withAddDropdown=!1)}},Js={};var c0=W(f0,l0,d0,!1,u0,"468006a2",null,null);function u0(e){for(let o in Js)this[o]=Js[o]}var Gl=function(){return c0.exports}(),ji={props:{editorName:{type:String,required:!0}},computed:{availableBlocks(){const e=this.editorName.split("|"),o=e[e.length-1];return this.getAvailableBlocks(o)},savedBlocks(){return this.blocks(this.editorName)},allSavedBlocks(){return this.used&&Object.keys(this.used).reduce((e,o)=>e.concat(this.used[o]),[])},hasBlockActive(){return Object.keys(this.activeBlock).length>0},...wt({activeBlock:e=>e.blocks.active,used:e=>e.blocks.blocks,editorNames:e=>e.blocks.editorNames}),...jt({getAvailableBlocks:"availableBlocks",blocks:"blocks"})},methods:{reorderBlocks(e){this.$store.commit(J.REORDER_BLOCKS,{editorName:this.editorName,value:e})},addBlock(e,o,i=-1){this.$store.commit(J.ADD_BLOCK,{editorName:o,block:{...e,type:e.type||e.component},index:i})},moveBlock({oldIndex:e,newIndex:o}){this.$store.commit(J.MOVE_BLOCK,{editorName:this.editorName,oldIndex:e,newIndex:o})},moveBlockToEditor(e,o,i,c){this.$store.dispatch(mt.MOVE_BLOCK_TO_EDITOR,{block:e,editorName:o,index:i,futureIndex:c,id:Date.now()})},cloneBlock({block:e,index:o}){this.$store.dispatch(mt.DUPLICATE_BLOCK,{editorName:this.editorName,futureIndex:o,block:e,id:Date.now()})}},render(){return this.$scopedSlots.default({availableBlocks:this.availableBlocks,savedBlocks:this.savedBlocks,reorderBlocks:this.reorderBlocks,moveBlock:this.moveBlock,editorNames:this.editorNames,hasBlockActive:this.hasBlockActive,allSavedBlocks:this.allSavedBlocks,activeBlock:this.activeBlock,addBlock:this.addBlock,moveBlockToEditor:this.moveBlockToEditor,cloneBlock:this.cloneBlock})}},tr={props:{block:{type:Object},editorName:{type:String,required:!0}},computed:{blockIndex(){return this.block?this.getBlockIndex(this.block,this.editorName):0},isActive(){return this.block&&Object.keys(this.activeBlock).length>0?this.block.id===this.activeBlock.id:!1},...wt({activeBlock:e=>e.blocks.active}),...jt({getBlockIndex:"blockIndex"})},methods:{add(e,o=-1){this.$store.commit(J.ADD_BLOCK,{editorName:this.editorName,block:{id:this.setBlockID(),title:e.title,type:e.component,icon:e.icon,attributes:e.attributes},index:o})},edit(e=this.blockIndex){this.$store.commit(J.ACTIVATE_BLOCK,{editorName:this.editorName,index:e})},unEdit(){this.$store.commit(J.ACTIVATE_BLOCK,{editorName:this.editorName,index:-1})},move(e){this.blockIndex!==e&&this.$store.commit(J.MOVE_BLOCK,{editorName:this.editorName,oldIndex:this.blockIndex,newIndex:e})},duplicate(){const e=Object.assign({},this.block);this.$store.commit(J.DUPLICATE_BLOCK,{editorName:this.editorName,index:this.blockIndex,block:e,id:this.setBlockID()})},remove(){this.unEdit(),this.$store.commit(J.DELETE_BLOCK,{editorName:this.editorName,index:this.blockIndex})},setBlockID(){return Date.now()}},render(){return this.$scopedSlots.default({block:this.block,blockIndex:this.blockIndex,add:this.add,edit:this.edit,unEdit:this.unEdit,isActive:this.isActive,remove:this.remove,move:this.move,duplicate:this.duplicate})}},p0=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("a17-blocks-list",{attrs:{"editor-name":e.editorName},scopedSlots:e._u([{key:"default",fn:function(c){var m=c.savedBlocks,x=c.availableBlocks,E=c.moveBlock,A=c.moveBlockToEditor,T=c.cloneBlock;return[i("div",{staticClass:"blocks"},[i("draggable",{staticClass:"blocks__container",attrs:{value:m,group:"blocks",move:e.handleOnMove,options:e.dragOptions},on:{end:function(z){return e.handleOnEnd(E,A)}}},[i("transition-group",{attrs:{name:"draggable_list",tag:"div"}},e._l(m,function(z){return i("div",{key:z.id,staticClass:"blocks__item"},[i("a17-blockeditor-model",{attrs:{"editor-name":e.editorName,block:z},scopedSlots:e._u([{key:"default",fn:function(G){var Q=G.block,ct=G.blockIndex,ot=G.add,qt=G.edit,ue=G.move,st=G.remove,te=G.duplicate;return[x.length?i("a17-blockeditor-item",{ref:"blockList",refInFor:!0,attrs:{block:Q,index:ct,opened:e.opened},on:{expand:e.setOpened}},[e._l(x,function(lt){return[i("button",{key:lt.component,staticClass:"blocks__addButton",attrs:{slot:"dropdown-add",type:"button"},on:{click:function($t){return e.handleBlockAdd(ot,lt,ct+1)}},slot:"dropdown-add"},[i("span",{directives:[{name:"svg",rawName:"v-svg"}],staticClass:"blocks__icon",attrs:{symbol:lt.icon}}),i("span",{staticClass:"blocks__title"},[e._v(e._s(lt.title))])])]}),i("div",{attrs:{slot:"dropdown-action"},slot:"dropdown-action"},[e.opened?i("button",{attrs:{type:"button"},on:{click:function(lt){return e.collapseAllBlocks()}}},[e._v(" "+e._s(e.$trans("fields.block-editor.collapse-all","Collapse all"))+" ")]):i("button",{attrs:{type:"button"},on:{click:function(lt){return e.expandAllBlocks()}}},[e._v(" "+e._s(e.$trans("fields.block-editor.expand-all","Expand all"))+" ")]),e.editor&&!e.editorName.includes("|")?i("button",{attrs:{type:"button"},on:{click:function(lt){return e.openInEditor(qt,ct,e.editorName)}}},[e._v(" "+e._s(e.$trans("fields.block-editor.open-in-editor","Open in editor"))+" ")]):e._e(),i("button",{attrs:{type:"button"},on:{click:function(lt){return e.handleClone(T,ct,Q)}}},[e._v(" "+e._s(e.$trans("fields.block-editor.clone-block","Clone block"))+" ")]),i("button",{attrs:{type:"button"},on:{click:function(lt){return e.handleDuplicateBlock(te)}}},[e._v(" "+e._s(e.$trans("fields.block-editor.create-another","Create another"))+" ")]),i("button",{attrs:{type:"button"},on:{click:function(lt){return e.handleDeleteBlock(st)}}},[e._v(" "+e._s(e.$trans("fields.block-editor.delete","Delete"))+" ")])]),e._l(m.length,function(lt){return i("button",{key:lt,attrs:{slot:"dropdown-numbers",type:"button"},on:{click:function($t){return ue(lt-1)}},slot:"dropdown-numbers"},[e._v(e._s(lt)+" ")])})],2):e._e()]}}],null,!0)})],1)}),0)],1),i("div",{staticClass:"blocks__actions"},[x.length?i("a17-dropdown",{ref:"blocksDropdown",attrs:{position:"top-center",arrow:!0,offset:10,maxHeight:430}},[i("a17-button",{attrs:{size:"small",variant:"action"},on:{click:function(z){return e.$refs.blocksDropdown.toggle()}}},[e._v(e._s(e.trigger)+" ")]),i("div",{attrs:{slot:"dropdown__content"},slot:"dropdown__content"},[e._l(x,function(z){return[i("a17-blockeditor-model",{key:z.component,attrs:{"editor-name":e.editorName,block:z},scopedSlots:e._u([{key:"default",fn:function(G){var Q=G.add,ct=G.block;return[i("button",{key:z.component,staticClass:"blocks__addButton",attrs:{type:"button"},on:{click:function(ot){return e.handleBlockAdd(Q,ct)}}},[i("span",{directives:[{name:"svg",rawName:"v-svg"}],staticClass:"blocks__icon",attrs:{symbol:z.icon}}),i("span",{staticClass:"blocks__title"},[e._v(e._s(z.title))])])]}}],null,!0)})]})],2)],1):e._e(),e.editorName.includes("|")?e._e():i("div",{staticClass:"blocks__secondaryActions"},[e.editor?i("a",{staticClass:"f--link f--link-underlined--o",attrs:{href:"#"},on:{click:function(z){return z.preventDefault(),e.openEditor(-1,e.editorName)}}},[e._v(" "+e._s(e.$trans("fields.block-editor.open-in-editor","Open in editor"))+" ")]):e._e()])],1)],1)]}}])})},h0=[];const m0={name:"A17Blocks",components:{"a17-blockeditor-item":Gl,"a17-blockeditor-model":tr,"a17-blocks-list":ji,draggable:xa},mixins:[ya,Kl],props:{trigger:{type:String,default:""},title:{type:String,default:""},editorName:{type:String,required:!0}},data(){return{opened:!0,handle:".block__handle"}},computed:{...wt({editor:e=>e.blocks.editor,editorNames:e=>e.blocks.editorNames}),...jt(["blocks","fieldsByBlockId","availableBlocks"])},methods:{setOpened:function(){this.$refs.blockList&&this.$refs.blockList.every(o=>!o.visible)&&(this.opened=!1)},collapseAllBlocks:function(){this.opened=!1},expandAllBlocks:function(){this.opened=!0},checkExpandBlocks(){this.$refs.blockList[this.$refs.blockList.length-1].toggleExpand()},handleOnMove(e){const{draggedContext:o,relatedContext:i}=e,{index:c,element:m,futureIndex:x}=o,{element:E}=i;this.nextMove={block:m,editorName:E.name,newIndex:x,index:c}},handleOnEnd(e,o){const{block:i,editorName:c,newIndex:m,index:x}=this.nextMove;i.name!==c?this.checkIfBlockTypeIsAvailable(c,i.type)&&o&&o(i,c,x,m):e&&e({oldIndex:x,newIndex:m})},handleClone(e,o,i){e&&e({block:i,index:o+1}),this.$nextTick(()=>{this.checkExpandBlocks()})},handleBlockAdd(e,o,i=-1){e(o,i),this.$nextTick(()=>{this.checkExpandBlocks()})},handleDuplicateBlock(e,o){e(o),this.$nextTick(()=>{this.checkExpandBlocks()})},handleDeleteBlock(e,o){this.$root.$refs.warningContentEditor?this.$root.$refs.warningContentEditor.open(()=>{e(o),this.$nextTick(()=>{this.checkExpandBlocks()})}):(e(o),this.$nextTick(()=>{this.checkExpandBlocks()}))},checkIfBlockTypeIsAvailable(e,o){return JSON.parse(JSON.stringify(this.availableBlocks(e))).map(m=>m.component).indexOf(o)!==-1},openInEditor(e,o,i){e(),this.openEditor(o,i)}},mounted(){this.$nextTick(function(){this.$refs.blockList&&this.blocks(this.editorName)&&this.blocks(this.editorName).length<4&&this.$refs.blockList.forEach(e=>e.toggleExpand())})}},Qs={};var w0=W(m0,p0,h0,!1,_0,"4af51b78",null,null);function _0(e){for(let o in Qs)this[o]=Qs[o]}var v0=function(){return w0.exports}(),g0=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("a17-modal",{ref:"standalone-"+e.endpointName,staticClass:"modal--browser",attrs:{mode:"medium","force-close":!0},on:{close:e.closeModal}},[i("div",{staticClass:"browser"},[i("div",{staticClass:"browser__frame"},[i("div",{ref:"form",staticClass:"browser__header"},[e.multiSources?i("div",{staticClass:"browser__sources"},[i("a17-vselect",{staticClass:"browser__sources-select",attrs:{name:"sources",selected:e.currentEndpoint,options:e.endpoints,required:!0},on:{change:e.changeBrowserSource}})],1):e._e(),i("div",{staticClass:"browser__search"},[i("a17-filter",{on:{submit:e.submitFilter}},[e.browserNote?i("div",{attrs:{slot:"additional-actions"},slot:"additional-actions"},[i("span",{staticClass:"browser__note f--small"},[e._v(" "+e._s(e.browserNote)+" ")])]):e._e()])],1)]),i("div",{staticClass:"browser__inner"},[i("div",{ref:"list",staticClass:"browser__list"},[i("a17-itemlist",{attrs:{items:e.fullItems,keysToCheck:["id","edit"],selectedItems:e.selectedItems},on:{change:e.updateSelectedItems}})],1)]),i("div",{staticClass:"browser__footer"},[i("a17-button",{attrs:{type:"button",variant:"action"},on:{click:e.saveAndClose}},[e._v(e._s(e.browserTitle))]),i("span",{staticClass:"browser__size-infos"},[e._v(e._s(e.selectedItems.length)+" / "+e._s(e.max))])],1)])])])},b0=[];const x0={name:"A17StandaloneBrowser",components:{"a17-filter":Zw,"a17-itemlist":Xw,"a17-modal":Jw},props:{btnLabel:{type:String,default:"Insert"},btnMultiLabel:{type:String,default:"Insert files"},initialPage:{type:Number,default:1},open:{type:Boolean,default:!1},forRepeater:{type:Boolean,default:!1},endpoint:{type:Object,required:!0},max:{type:Number,default:0}},data(){return{maxPage:20,fullItems:[],listHeight:0,page:this.initialPage,endpoints:[],endpointName:null,browserTitle:"Select",browserNote:null,selected:[]}},computed:{currentEndpoint(){return this.endpoints.find(e=>e.value===this.endpoint.value)},multiSources(){return this.endpoints.length>1},selectedItems:{get(){return this.selected||[]},set(e){this.selected=e}}},watch:{open:function(e,o){e!==o&&(e?this.openModal():this.closeModal())}},methods:{openModal(){const e="standalone-"+this.endpointName;this.$refs[e].open()},closeModal(){const e="standalone-"+this.endpointName;this.$refs[e].close(),this.$emit("close")},updateSelectedItems(e){const o=this.multiSources?["id","endpointType"]:["id"];if(!this.fullItems.some(m=>o.every(x=>m[x]===e[x])))return;if(this.selectedItems.some(m=>o.every(x=>m[x]===e[x]))){const m=this.selectedItems.findIndex(E=>o.every(A=>E[A]===e[A]));if(m<0)return;const x=[...this.selectedItems];x.splice(m,1),this.selectedItems=x}else{if(this.max===1&&this.clearSelectedItems(),this.selectedItems.length>=this.max&&this.max>0)return;this.selectedItems=[...this.selectedItems,e]}},getFormData(e){let o=Qw(e);return o?o.page=this.page:o={page:this.page},o.forRepeater=this.forRepeater,o},clearSelectedItems(){this.selectedItems=[]},clearFullItems(){this.fullItems.splice(0)},reloadList(e=!1){e&&(this.page=1);const o=this.$refs.form,i=this.getFormData(o);this.$http.get(this.endpoint.value,{params:i}).then(c=>{e&&this.clearFullItems(),this.fullItems.push(...c.data.data),this.$nextTick(()=>{this.listHeight!==this.$refs.list.scrollHeight&&(this.listHeight=this.$refs.list.scrollHeight,this.$refs.list.addEventListener("scroll",this.scrollToPaginate))})},function(c){})},submitFilter(){this.page=1,this.clearFullItems(),this.reloadList()},scrollToPaginate(){const e=this.$refs.list;e.scrollTop+e.clientHeight>this.listHeight-10&&(e.removeEventListener("scroll",this.scrollToPaginate),this.maxPage>this.page&&(this.page=this.page+1,this.reloadList()))},saveAndClose(){this.$emit("selected",this.selectedItems),this.closeModal()},changeBrowserSource(e){this.reloadList(!0)}},mounted(){this.openModal(),this.endpoints=[this.endpoint],this.reloadList()}},js={};var y0=W(x0,g0,b0,!1,I0,"a5ff0ec0",null,null);function I0(e){for(let o in js)this[o]=js[o]}var k0=function(){return y0.exports}(),E0=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("div",{staticClass:"content"},[i("draggable",{staticClass:"content__content",attrs:{options:e.dragOptions},model:{value:e.blocks,callback:function(c){e.blocks=c},expression:"blocks"}},[i("transition-group",{attrs:{name:"draggable_list",tag:"div"}},e._l(e.blocks,function(c,m){return i("div",{key:c.id,staticClass:"content__item"},[i("a17-blockeditor-item",{ref:"blockList",refInFor:!0,attrs:{block:c,index:m,withHandle:e.draggable,size:e.blockSize,opened:e.opened}},[e.hasRemainingBlocks?i("a17-button",{attrs:{slot:"block-actions",variant:"icon","data-action":""},on:{click:function(x){return e.duplicateBlock(m)}},slot:"block-actions"},[i("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"add"}})]):e._e(),i("div",{attrs:{slot:"dropdown-action"},slot:"dropdown-action"},[e.opened?i("button",{attrs:{type:"button"},on:{click:function(x){return e.collapseAllBlocks()}}},[e._v(" "+e._s(e.$trans("fields.block-editor.collapse-all","Collapse all"))+" ")]):i("button",{attrs:{type:"button"},on:{click:function(x){return e.expandAllBlocks()}}},[e._v(" "+e._s(e.$trans("fields.block-editor.expand-all","Expand all"))+" ")]),e.hasRemainingBlocks?i("button",{attrs:{type:"button"},on:{click:function(x){return e.duplicateBlock(m)}}},[e._v(" "+e._s(e.$trans("fields.block-editor.clone-block","Clone block"))+" ")]):e._e(),i("button",{attrs:{type:"button"},on:{click:function(x){return e.deleteBlock(m)}}},[e._v(" "+e._s(e.$trans("fields.block-editor.delete","Delete"))+" ")])])],1)],1)}),0)],1),i("div",{staticClass:"content__trigger"},[e.hasRemainingBlocks&&e.blockType.trigger&&e.allowCreate?i("a17-button",{class:e.triggerClass,attrs:{variant:e.triggerVariant},on:{click:function(c){return e.addBlock()}}},[e._v(" "+e._s(e.blockType.trigger)+" ")]):e._e(),e.hasRemainingBlocks&&e.browser?i("a17-button",{class:e.triggerClass,attrs:{variant:e.triggerVariant},on:{click:function(c){return e.openBrowser()}}},[e._v(" "+e._s(e.blockType.selectTrigger)+" ")]):e._e(),i("div",{staticClass:"content__note f--note f--small"},[e._t("default")],2)],1),e.browserIsOpen?i("a17-standalone-browser",{ref:"localbrowser",attrs:{endpoint:e.browser,"for-repeater":!0,max:e.max},on:{selected:e.addRepeatersFromSelection,close:function(c){e.browserIsOpen=!1}}}):e._e()],1)},S0=[];const C0={name:"A17Repeater",components:{A17StandaloneBrowser:k0,"a17-blockeditor-item":Gl,draggable:xa},mixins:[ya],props:{type:{type:String,required:!0},name:{type:String,required:!0},buttonAsLink:{type:Boolean,default:!1},browser:{type:Object,required:!1,default:null},relation:{type:String,required:!1},allowCreate:{type:Boolean,default:!0},max:{type:[Number,null],required:!1,default:null}},data:function(){return{opened:!0,browserIsOpen:!1,handle:".block__handle"}},computed:{triggerVariant:function(){return this.buttonAsLink?"aslink":this.inContentEditor?"outline":"action"},triggerClass:function(){return this.inContentEditor?"content__button":""},blockSize:function(){return this.inContentEditor?"small":""},inContentEditor:function(){return typeof this.$parent.repeaterName!="undefined"},hasRemainingBlocks:function(){let e=null;return this.max&&this.max>0?e=this.max:this.blockType.hasOwnProperty("max")&&(e=this.blockType.max),!e||e>this.blocks.length},blockType:function(){return this.availableBlocks[this.type]?this.availableBlocks[this.type]:{}},blocks:{get(){return this.savedBlocks.hasOwnProperty(this.name)?this.savedBlocks[this.name]||[]:[]},set(e){this.$store.commit(nt.REORDER_FORM_BLOCKS,{type:this.type,name:this.name,blocks:e})}},...wt({savedBlocks:e=>e.repeaters.repeaters,availableBlocks:e=>e.repeaters.availableRepeaters})},methods:{addBlock:function(){this.$store.commit(nt.ADD_FORM_BLOCK,{type:this.type,name:this.name})},addRepeatersFromSelection(e){this.$store.commit(nt.ADD_REPEATER_FROM_SELECTION,{type:this.type,name:this.name,selection:e,relation:this.relation})},duplicateBlock:function(e){this.$store.commit(nt.DUPLICATE_FORM_BLOCK,{type:this.type,name:this.name,index:e})},deleteBlock:function(e){this.$store.commit(nt.DELETE_FORM_BLOCK,{type:this.type,name:this.name,index:e})},collapseAllBlocks:function(){this.opened=!1},expandAllBlocks:function(){this.opened=!0},openBrowser:function(){this.browserIsOpen=!0}},mounted:function(){this.$nextTick(()=>{this.collapseAllBlocks()})}},tl={};var B0=W(C0,E0,S0,!1,A0,"4899d21c",null,null);function A0(e){for(let o in tl)this[o]=tl[o]}var $0=function(){return B0.exports}(),L0=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("a17-inputframe",{attrs:{error:e.error,note:e.note,locale:e.locale,label:e.label,name:e.name,required:e.required},on:{localize:e.updateLocale}},[i("div",{staticClass:"form__field",class:e.textfieldClasses},[i("input",{attrs:{type:"search",placeholder:e.placeholder,name:e.name,id:e.name,disabled:e.disabled,required:e.required,readonly:e.readonly,autofocus:e.autofocus,autocomplete:e.autocomplete},domProps:{value:e.address},on:{focus:e.onFocus,blur:e.onBlur,input:e.onInput}}),e.showMap?i("div",{staticClass:"form__field--showMap"},[i("a",{attrs:{href:"#",type:"button"},on:{click:function(c){return c.preventDefault(),e.toggleMap(c)}}},[i("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"location"}}),i("span",{domProps:{innerHTML:e._s(e.mapMessage)}})])]):e._e(),i("input",{attrs:{type:"hidden",name:e.name+"__lat"},domProps:{value:e.lat}}),i("input",{attrs:{type:"hidden",name:e.name+"__lng"},domProps:{value:e.lng}})]),e.showMap?i("div",{directives:[{name:"show",rawName:"v-show",value:e.isMapOpen,expression:"isMapOpen"}],staticClass:"form__mapContainer"}):e._e()])},T0=[];const ga={show:window.$trans("fields.map.show"),hide:window.$trans("fields.map.hide")},R0="https://maps.googleapis.com/maps/api/js?libraries=places&key=",O0=window.TWILL.hasOwnProperty("APIKEYS")&&window.TWILL.APIKEYS.hasOwnProperty("googleMapApi")?window.TWILL.APIKEYS.googleMapApi:null,M0={name:"A17Locationfield",mixins:[jw,Rl,Ol,t_],props:{type:{type:String,default:"text"},zoom:{type:Number,default:15},showMap:{type:Boolean,default:!0},openMap:{type:Boolean,default:!1},saveExtendedData:{type:Boolean,default:!1},autoDetectLatLngValue:{type:Boolean,default:!1},initialLat:{type:Number,default:null},initialLng:{type:Number,default:null}},data:function(){return{map:null,autocompletePlace:null,markers:[],address:"",boundingBox:[],types:[],beforeFocusAddress:"",lat:this.initialLat,lng:this.initialLng,focused:!1,isMapOpen:this.openMap,mapMessage:this.openMap?ga.hide:ga.show}},computed:{value:{get(){const e={latlng:this.lat+"|"+this.lng,address:this.address};return this.saveExtendedData&&(e.boundingBox=this.boundingBox,e.types=this.types),e},set(e){const o=e.latlng.split("|");this.lat=parseFloat(o[0]),this.lng=parseFloat(o[o.length-1]),this.address=e.address,this.saveExtendedData&&(this.boundingBox=e.boundingBox,this.types=e.types)}},textfieldClasses:function(){return{"s--focus":this.focused,"s--disabled":this.disabled}}},methods:{updateFromStore:function(e){if(!qi(e,this.value)&&(this.value=e,this.clearMarkers(),this.address===""&&(this.lat=this.initialLat,this.lng=this.initialLng),this.lat&&this.lng&&this.map)){const o={lat:this.lat,lng:this.lng};this.addMarker(o),this.map.panTo(o)}},onFocus:function(e){this.focused=!0,this.beforeFocusAddress=this.address,this.$emit("focus")},onBlur:function(e){this.focused=!1,this.address===""&&(this.clearMarkers(),this.lat=this.initialLat,this.lng=this.initialLng),this.beforeFocusAddress!==this.address&&this.saveIntoStore(),this.$emit("blur")},onInput:function(e){const o=e.target.value;if(this.address=o,this.$emit("change",o),this.autoDetectLatLngValue){const i=o.match(/^(-?\d+(?:\.\d+)?),+ *(-?\d+(?:\.\d+)?)$/);i&&this.onLatLngEntered(i[1],i[2])}},onPlaceChanged:function(){const e=this.autocompletePlace.getPlace();if(this.clearMarkers(),this.clearLatLng(),e.geometry){const o=e.geometry.location;this.address=e.formatted_address,this.setLatLng(o),this.saveExtendedData&&(this.boundingBox=e.geometry.viewport,this.types=e.types),this.map&&(this.addMarker(o),this.map.panTo(o),this.map.setZoom(this.zoom))}this.beforeFocusAddress=this.address,this.saveIntoStore()},onClick:function(e){const o=e.latLng;this.clearMarkers(),this.clearLatLng(),this.address=[o.lat(),o.lng()].join(","),this.setLatLng(o),this.map&&this.addMarker(o),this.saveIntoStore()},onLatLngEntered:Xi(function(e,o){const i=new google.maps.LatLng(e,o);this.clearMarkers(),this.clearLatLng(),this.address=[i.lat(),i.lng()].join(","),this.setLatLng(i),this.map&&(this.addMarker(i),this.map.setCenter(i)),this.saveIntoStore()},600),clearMarkers:function(){for(let e=0;e<this.markers.length;e++)this.markers[e]&&this.markers[e].setMap(null);this.markers=[]},clearLatLng:function(){this.lat=0,this.lng=0},addMarker:function(e){const o=new google.maps.Marker({position:e,map:this.map});this.markers.push(o)},setLatLng:function(e){this.lat=e.lat(),this.lng=e.lng()},toggleMap:function(){this.isMapOpen=!this.isMapOpen,this.mapMessage=this.isMapOpen?ga.hide:ga.show,!this.map&&typeof google!="undefined"&&this.$nextTick(function(){this.initMap()})},initMap:function(){const e=this.lat+this.lng,o={zoom:e?this.zoom:1,center:new google.maps.LatLng(this.lat,this.lng),mapTypeControl:!1,panControl:!1,zoomControl:!1,streetViewControl:!1},i=document.createElement("div");i.className="form__map",this.$el.querySelector(".form__mapContainer").appendChild(i),this.map=new google.maps.Map(i,o),e&&this.addMarker(new google.maps.LatLng(this.lat,this.lng)),this.map.addListener("click",this.onClick)},initGeocoder:function(){const e=this;if(this.autocompletePlace=new google.maps.places.Autocomplete(this.$el.querySelector('input[type="search"]')),google.maps.event.addListener(this.autocompletePlace,"place_changed",this.onPlaceChanged),this.address===""&&this.lat&&this.lng){const o=new google.maps.Geocoder,i={lat:this.lat,lng:this.lng};o.geocode({location:i},function(c,m){m==="OK"?c[1]?e.address=c[1].formatted_address:console.error("Geocoding - No results found"):console.error("Geocoding - Geocoder failed due to: "+m)})}},initGoogleApi:function(){this.initGeocoder(),this.showMap&&this.isMapOpen&&this.initMap()}},mounted:function(){if(typeof google!="undefined")this.initGoogleApi();else{const e="google-map-api-script",o=R0+O0;e_(e,o,"text/javascript").then(()=>{this.initGoogleApi()})}},beforeDestroy:function(){typeof google!="undefined"&&google.maps.event.clearListeners(this.autocompletePlace,"place_changed",this.onPlaceChanged)}},el={};var P0=W(M0,L0,T0,!1,D0,"19a1f937",null,null);function D0(e){for(let o in el)this[o]=el[o]}var N0=function(){return P0.exports}(),F0=n_,U0=4;function W0(e){return F0(e,U0)}var nl=W0,V0=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("div",[e.keepAlive?[i("div",{directives:[{name:"show",rawName:"v-show",value:e.open,expression:"open"}]},[e._t("default")],2)]:[e.open?i("div",[e._t("default")],2):e._e()]],2)},z0=[];const K0={name:"A17ConnectorField",props:{fieldName:{type:String,required:!0},requiredFieldValues:{default:""},inModal:{type:Boolean,default:!1},keepAlive:{type:Boolean,default:!1},isValueEqual:{type:Boolean,default:!0},isBrowser:{type:Boolean,default:!1},matchEmptyBrowser:{type:Boolean,default:!1}},computed:{storedValue:function(){return this.inModal?this.modalFieldValueByName(this.fieldName):this.isBrowser?this.selectedBrowser[this.fieldName]:this.fieldValueByName(this.fieldName)},...jt(["fieldValueByName","modalFieldValueByName"]),...wt({fields:e=>e.form.fields,modalFields:e=>e.form.modalFields,selectedBrowser:e=>e.browser.selected})},data:function(){return{open:!1}},watch:{storedValue:function(e){this.toggleVisibility(e)}},methods:{toggleVisibility:function(e){var c;if(this.isBrowser){const m=(c=e&&e.length)!=null?c:0;if(this.matchEmptyBrowser&&m===0){this.open=!0;return}this.open=this.matchEmptyBrowser?!1:m>0;return}const o=nl(e),i=nl(this.requiredFieldValues);Array.isArray(i)&&i.sort(),Array.isArray(o)&&o.sort(),this.isValueEqual?this.open=Array.isArray(i)?i.indexOf(o)!==-1:qi(o,i):this.open=Array.isArray(i)?i.indexOf(o)===-1:!qi(o,i)}},mounted:function(){const e=this;this.$nextTick(function(){e.toggleVisibility(this.storedValue)})}},al={};var H0=W(K0,V0,z0,!1,G0,null,null,null);function G0(e){for(let o in al)this[o]=al[o]}var q0=function(){return H0.exports}(),Y0=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("div",{staticClass:"overlay",class:e.overlayClasses},[i("div",{staticClass:"overlay__window"},[i("header",{staticClass:"overlay__header"},[e.overlayTitle?i("span",[e._v(e._s(e.overlayTitle))]):e._e(),e.$slots.overlay__header?i("span",{staticClass:"overlay__header-slot"},[e._t("overlay__header")],2):e._e(),i("button",{staticClass:"overlay__close",attrs:{type:"button"},on:{click:e.hide}},[i("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"close_modal"}}),i("span",{staticClass:"overlay__closeLabel"},[e._v(e._s(e.$trans("overlay.close")))])])]),e.active?i("div",{directives:[{name:"show",rawName:"v-show",value:!e.hidden,expression:"!hidden"}],staticClass:"overlay__content"},[e._t("default")],2):e._e()])])},Z0=[];const Hi=document.documentElement,X0=Ji.overlay,J0=Ji.modal,Q0={name:"A17Overlay",props:{title:{type:String,default:""},revisionTitle:{type:String,default:function(){return this.$trans("previewer.revision-history")}},forceClose:{type:Boolean,default:!1},forceLock:{type:Boolean,default:!1},mode:{type:String,default:""},customClasses:{type:[String,Array],default:()=>[]}},data:function(){return{active:!1,hidden:!0,locked:!1}},computed:{toggleClasses(){const e=typeof this.customClasses=="string"?[this.customClasses]:this.customClasses;return[X0].concat(e)},activeRevision:function(){return Object.keys(this.currentRevision).length},overlayTitle:function(){return this.activeRevision?this.revisionTitle:this.title},overlayClasses:function(){return{"overlay--active":this.active,"overlay--hidden":this.hidden}},...wt({currentRevision:e=>e.revision.active})},methods:{open:function(){this.active&&!this.hidden||(this.active=!0,this.hidden=!1,this.toggleClasses.forEach(e=>Hi.classList.add(e)),window.addEventListener("keyup",this.keyPressed),this.$emit("open"))},mask:function(){this.toggleClasses.forEach(e=>Hi.classList.remove(e)),window.removeEventListener("keyup",this.keyPressed),this.$emit("close")},hide:function(){if(!!this.active&&!this.locked){if(this.forceClose){this.close();return}this.hidden=!0,this.mask()}},close:function(e){!this.active||this.locked||(this.active=!1,this.mask())},keyPressed:function(e){if(e.which===27||e.keyCode===27){if(Hi.classList.contains(J0))return;this.hide(),this.$emit("esc-key")}}},beforeDestroy:function(){this.$el.parentNode&&(this.active&&window.removeEventListener("keyup",this.keyPressed),this.$el.parentNode.removeChild(this.$el))}},il={};var j0=W(Q0,Y0,Z0,!1,tg,"5f30b70e",null,null);function tg(e){for(let o in il)this[o]=il[o]}var eg=function(){return j0.exports}(),ng=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("iframe",{staticClass:"previewerframe",style:{width:e.size>0?e.size+"px":""},attrs:{srcdoc:e.content,frameborder:"0"},on:{load:e.loadPreview}})},ag=[];const ig={name:"A17previewerFrame",props:{size:{type:Number,default:0},content:{type:String,default:""},scrollPosition:{type:Number,default:0}},data:function(){return{currentScroll:this.scrollPosition}},watch:{scrollPosition:function(e){this.$el.contentWindow.scrollTo(0,e)}},methods:{loadPreview:function(e){const o=this,i=e.target,c=i.contentDocument.querySelectorAll("a:not(.sf-dump-toggle),button");for(let m=0;m<c.length;m++)c[m].setAttribute("disabled","disabled"),c[m].style.pointerEvents="none",c[m].onclick=function(){return!1};i.contentDocument.addEventListener("scroll",function(m){const x=i.contentWindow.pageYOffset;x!==o.currentScroll&&(o.$emit("scrollDoc",x),o.currentScroll=x)}),this.$el.contentWindow.scrollTo(0,this.currentScroll)}}},rl={};var rg=W(ig,ng,ag,!1,og,"4637e100",null,null);function og(e){for(let o in rl)this[o]=rl[o]}var sg=function(){return rg.exports}(),lg=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("a17-overlay",{ref:"overlay",attrs:{title:e.$trans("previewer.title")}},[e.revisions.length?i("div",{staticClass:"previewer",class:{"previewer--loading":e.loading}},[e.activeRevision?i("a17-button",{staticClass:"previewer__restore",attrs:{variant:"warning",size:"small"},on:{click:e.restoreRevision}},[e._v(e._s(e.$trans("previewer.restore")))]):e._e(),!e.activeRevision&&e.editor?i("a17-button",{staticClass:"previewer__restore",attrs:{variant:"editor",size:"small"},on:{click:e.openEditor}},[i("span",{directives:[{name:"svg",rawName:"v-svg"}],staticClass:"hide--xsmall",attrs:{symbol:"editor"}}),e._v(e._s(e.$trans("previewer.editor")))]):e._e(),i("div",{staticClass:"previewer__frame"},[i("div",{staticClass:"previewer__inner"},[i("div",{staticClass:"previewer__nav"},[i("div",{staticClass:"previewer__revisions"},[e.slipScreen?i("span",{staticClass:"tag tag--revision"},[e._v(e._s(e.$trans("previewer.past-revision")))]):e._e(),i("a17-dropdown",{ref:"previewRevisionsDropdown",attrs:{position:"bottom-left",maxWidth:400,maxHeight:300}},[i("a17-button",{staticClass:"previewer__trigger",on:{click:function(c){return e.$refs.previewRevisionsDropdown.toggle()}}},[e.activeRevision?[e._v(" "+e._s(e._f("formatDate")(e.currentRevision.datetime))+" ("+e._s(e.currentRevision.author)+") "),i("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"dropdown_module"}})]:[e._v(" "+e._s(e.$trans("previewer.last-edit"))+" "),i("timeago",{attrs:{"auto-update":1,datetime:new Date(e.revisions[0].datetime)}}),e._v(" "),i("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"dropdown_module"}})]],2),i("div",{attrs:{slot:"dropdown__content"},slot:"dropdown__content"},e._l(e.revisions,function(c){return i("button",{key:c.id,staticClass:"previewerRevision",class:{"previewerRevision--active":e.currentRevision.id===c.id},attrs:{type:"button"},on:{click:function(m){return e.toggleRevision(c.id)}}},[i("span",{staticClass:"previewerRevision__author"},[e._v(e._s(c.author))]),i("span",{staticClass:"previewerRevision__datetime"},[c.label?i("span",{staticClass:"tag"},[e._v(e._s(c.label))]):e._e(),e._v(" "+e._s(e._f("formatDate")(c.datetime)))])])}),0)],1)],1),e.slipScreen?e._e():i("ul",{staticClass:"previewer__breakpoints"},e._l(e.breakpoints,function(c){return i("li",{key:c.size,staticClass:"previewer__breakpoint",class:{"s--active":e.activeBreakpoint===c.size}},[i("a",{attrs:{href:"#"},on:{click:function(m){return m.preventDefault(),e.resizePreview(c.size)}}},[i("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:c.name}})])])}),0),e.activeRevision?i("div",{staticClass:"previewer__compare"},[e.slipScreen?i("a",{attrs:{href:"#"},on:{click:function(c){return c.preventDefault(),e.singleView(c)}}},[i("span",{staticClass:"previewer__compareLabel"},[e._v(e._s(e.$trans("previewer.single-view")))]),e._v(" "),i("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"revision-single"}})]):i("a",{attrs:{href:"#"},on:{click:function(c){return c.preventDefault(),e.compareView(c)}}},[i("span",{staticClass:"previewer__compareLabel"},[e._v(e._s(e.$trans("previewer.compare-view")))]),e._v(" "),i("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"revision-compare"}})])]):e._e()]),i("div",{staticClass:"previewer__content"},[i("div",{staticClass:"previewer__iframe"},[i("a17-iframe",{attrs:{content:e.activeRevision?e.activeContent:e.currentContent,size:e.activeBreakpoint,scrollPosition:e.scrollPosition},on:{scrollDoc:e.setIframeScroll}})],1),e.slipScreen?i("div",{staticClass:"previewer__iframe"},[i("div",{staticClass:"previewer__iframeInfos"},[i("span",{staticClass:"tag tag--revision"},[e._v(e._s(e.$trans("previewer.current-revision")))]),e._v(e._s(e.$trans("previewer.unsaved")))]),i("a17-iframe",{attrs:{content:e.currentContent,scrollPosition:e.scrollPosition},on:{scrollDoc:e.setIframeScroll}})],1):e._e()])])])],1):e._e()])},dg=[];const fg={name:"A17Previewer",components:{"a17-iframe":sg},data:function(){return{loadedCurrent:!1,slipScreen:!1,activeBreakpoint:1280,lastActiveBreakpoint:1280,scrollPosition:0,breakpoints:[{size:1280,name:"preview-desktop"},{size:1024,name:"preview-tablet-h"},{size:768,name:"preview-tablet-v"},{size:320,name:"preview-mobile"}]}},filters:Re,computed:{activeRevision:function(){return Object.keys(this.currentRevision).length},...wt({editor:e=>e.blocks.editor,loading:e=>e.revision.loading,currentRevision:e=>e.revision.active,activeContent:e=>e.revision.activeContent,currentContent:e=>e.revision.currentContent,revisions:e=>e.revision.all,restoreRevisionUrl:e=>e.form.restoreUrl})},methods:{open:function(e=0){const o=this;this.loadedCurrent=!1,this.activeBreakpoint=1280,this.lastActiveBreakpoint=1280;function i(){o.$refs.overlay&&o.$refs.overlay.open(),o.singleView()}e?this.previewRevision(e,function(){i()}):this.previewCurrent(function(){i()})},close:function(){this.$refs.overlay.close()},openEditor:function(){const e=this.$root.$refs;e.preview&&e.preview.close(),e.editor&&e.editor.open()},restoreRevision:function(){window.location.href=this.restoreRevisionUrl+"?revisionId="+this.currentRevision.id},resizePreview:function(e){this.activeBreakpoint=parseInt(e),this.lastActiveBreakpoint=parseInt(e)},previewCurrent:function(e){this.$store.commit(Ht.UPDATE_REV,0),this.loadCurrent(e)},loadCurrent:function(e){if(this.loadedCurrent){e&&typeof e=="function"&&e();return}this.loadedCurrent=!0,this.$store.dispatch(mt.GET_CURRENT).then(()=>{e&&typeof e=="function"&&e()},o=>{this.$store.commit(nt.SET_FORM_ERRORS,o.response.data),this.$store.commit(En.SET_NOTIF,{message:"Your submission could not be validated, please fix and retry",variant:"error"})})},toggleRevision:function(e){if(this.activeRevision&&this.currentRevision.id===e){this.singleView(),this.previewCurrent();return}this.previewRevision(e)},previewRevision:function(e,o){this.$store.commit(Ht.UPDATE_REV,e),this.$store.dispatch(mt.GET_REVISION).then(()=>{o&&typeof o=="function"&&o()},i=>{this.$store.commit(En.SET_NOTIF,{message:"Invalid revision.",variant:"error"})})},compareView:function(){this.activeBreakpoint=0,this.slipScreen=!0,this.activeRevision&&this.loadCurrent()},singleView:function(){this.activeBreakpoint=this.lastActiveBreakpoint,this.slipScreen=!1},setIframeScroll:function(e){this.scrollPosition=e}}},ol={};var cg=W(fg,lg,dg,!1,ug,"a1761140",null,null);function ug(e){for(let o in ol)this[o]=ol[o]}var pg=function(){return cg.exports}(),hg=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("div",{staticClass:"editorSidebar__item"},[i("div",{staticClass:"editorSidebar__title"},[i("div",{staticClass:"editorSidebar__blockTitle"},[i("a17-dropdown",{ref:"blockDropdown",staticClass:"f--small",attrs:{position:"bottom-left",maxHeight:270}},[i("span",{staticClass:"editorSidebar__counter f--tiny",on:{click:e.toggleBlockDropdown}},[e._v(e._s(e.blockIndex+1))]),i("div",{attrs:{slot:"dropdown__content"},slot:"dropdown__content"},e._l(e.blocksLength,function(c){return i("button",{key:c,attrs:{type:"button"},on:{click:function(m){return e.moveBlock(c-1)}}},[e._v(" "+e._s(c)+" ")])}),0)]),e._v(" "+e._s(e.block.title)+" ")],1),i("span",[i("a",{staticClass:"f--small f--note f--underlined",attrs:{href:"#"},on:{click:function(c){return c.preventDefault(),e.deleteBlock(c)}}},[e._v(e._s(e.$trans("editor.delete")))])])]),i("div",{staticClass:"editorSidebar__body"},[i("a17-inputframe",{attrs:{label:"",name:"block."+e.block.id}}),[i(""+e.block.type,e._b({key:"`editor_${block.type}_${block.id}`",tag:"component",attrs:{name:"blocks["+e.block.id+"]"}},"component",e.setBlockAttributes(e.block.attributes),!1))]],2)])},mg=[];const wg={name:"A17EditorSidebarBlockItem",mixins:[Vl],methods:{setBlockAttributes(e){return{keepAlive:!0,...e}}}},sl={};var _g=W(wg,hg,mg,!1,vg,"53a05d26",null,null);function vg(e){for(let o in sl)this[o]=sl[o]}var gg=function(){return _g.exports}(),bg=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("div",{staticClass:"editorSidebar__listItems"},[i("draggable",{staticClass:"editorSidebar__blocks",class:e.editorSidebarClasses,attrs:{options:{group:{name:"editorBlocks",pull:"clone",put:!1},handle:".editorSidebar__button"}},model:{value:e.blocks,callback:function(c){e.blocks=c},expression:"blocks"}},e._l(e.blocks,function(c){return i("div",{key:c.component,staticClass:"editorSidebar__button",attrs:{"data-title":c.title,"data-icon":c.icon,"data-component":c.component}},[i("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:e.iconSymbol(c.icon)}}),i("span",{staticClass:"editorSidebar__buttonLabel"},[e._v(e._s(c.title))])])}),0)],1)},xg=[];const yg={name:"A17EditorSidebarBlockList",props:{blocks:{type:Array,default:()=>[]},inFieldset:{type:Boolean,default:!1}},mixins:[ya],components:{draggable:xa},computed:{editorSidebarClasses(){return{"editorSidebar__blocks--in-fieldset":this.inFieldset}}},methods:{iconSymbol:function(e){return this.hasLgIconVariation(e)?`${e}-lg`:e},hasLgIconVariation:function(e){return Boolean(document.querySelector(`#icon--${e}-lg`))}}},ll={};var Ig=W(yg,bg,xg,!1,kg,"3cf6ff23",null,null);function kg(e){for(let o in ll)this[o]=ll[o]}var Eg=function(){return Ig.exports}(),Sg=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("div",{staticClass:"editorSidebar"},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.hasBlockActive,expression:"hasBlockActive"}]},[i("a17-blocks-list",{attrs:{"editor-name":e.editorName},scopedSlots:e._u([{key:"default",fn:function(c){var m=c.allSavedBlocks;return[i("div",{staticClass:"editorSidebar__edit-list"},e._l(m,function(x){return i("a17-blockeditor-model",{key:x.id,attrs:{block:x,"editor-name":e.editorName},scopedSlots:e._u([{key:"default",fn:function(E){var A=E.block,T=E.isActive,z=E.blockIndex,G=E.move,Q=E.remove,ct=E.unEdit;return[i("div",{staticClass:"editorSidebar__edit-block"},[i("a17-sidebar-block-item",{directives:[{name:"show",rawName:"v-show",value:T,expression:"isActive"}],attrs:{block:A,blockIndex:z,blocksLength:m.length},on:{"block:move":G,"block:delete":function(ot){return e.deleteBlock(Q)}}}),i("div",{staticClass:"editorSidebar__actions"},[i("a17-button",{attrs:{variant:"action"},on:{click:function(ot){return e.saveBlock(ct,z)}}},[e._v(" "+e._s(e.$trans("editor.done"))+" ")]),i("a17-button",{attrs:{variant:"secondary"},on:{click:function(ot){return e.cancelBlock(ct,z)}}},[e._v(" "+e._s(e.$trans("editor.cancel"))+" ")])],1)],1)]}}],null,!0)})}),1)]}}])})],1),e.hasBlockActive?e._e():[i("div",{staticClass:"editorSidebar__list"},[i("a17-sidebar-block-list",{attrs:{blocks:e.blocks}})],1),i("div",{staticClass:"editorSidebar__actions"},[e.isSubmitDisabled(e.submitOptions[0])?i("a17-button",{attrs:{variant:"validate",disabled:!0}},[e._v(e._s(e.submitOptions[0].text))]):i("a17-button",{attrs:{name:e.submitOptions[0].name,variant:"validate"},on:{click:function(c){return e.saveForm(e.submitOptions[0].name)}}},[e._v(e._s(e.submitOptions[0].text))])],1)]],2)},Cg=[];const Bg={name:"A17editorSidebar",props:{hasBlockActive:{type:Boolean,default:!1},activeBlock:{type:Object,default:()=>{}},editorName:{type:String,required:!0},editorNames:{type:Array,default:()=>[]}},components:{"a17-sidebar-block-item":gg,"a17-sidebar-block-list":Eg,"a17-blocks-list":ji,"a17-blockeditor-model":tr},mixins:[zl],computed:{submitOptions(){return this.$store.getters.getSubmitOptions}},methods:{isSubmitDisabled:function(e){return e.hasOwnProperty("disabled")?e.disabled===!0:!1},saveForm(e){this.$store.commit(ht.UPDATE_SAVE_TYPE,e),this.$root.submitForm&&this.$root.submitForm()}}},dl={};var Ag=W(Bg,Sg,Cg,!1,$g,"c508d52a",null,null);function $g(e){for(let o in dl)this[o]=dl[o]}var Lg=function(){return Ag.exports}(),Tg=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("div",{staticClass:"editorIframe"},[e.preview===""?i("div",{staticClass:"editorIframe__empty"},[e._v(" "+e._s(e.title)+" ")]):[e.sandbox?i("iframe",{ref:"frame",attrs:{srcdoc:e.preview,sandbox:e.sandboxOptions,scrolling:"no"},on:{load:e.loadedPreview}}):i("iframe",{ref:"frame",attrs:{srcdoc:e.preview,scrolling:"no"},on:{load:e.loadedPreview}})]],2)},Rg=[];const Og={name:"A17editorIframe",props:{block:{type:Object,default:function(){return{}}}},computed:{preview(){return this.previewsById(this.block.id)||""},title(){return this.block.title||""},sandboxOptions(){return typeof this.sandbox=="boolean"?"allow-same-origin allow-top-navigation allow-scripts":this.sandbox.join(" ")},...jt(["previewsById"])},inject:["sandbox"],methods:{loadedPreview(){this.$refs.frame&&this.$refs.frame.srcdoc&&(this.$emit("loaded",this.$refs.frame),this.resize())},resize(){if(!this.$refs.frame)return;const e=this.$refs.frame.contentWindow.document.body;e.style.overflow="hidden";const o=window.getComputedStyle(e),i=o.getPropertyValue("margin-top"),c=o.getPropertyValue("margin-bottom"),m=e.scrollHeight+parseInt(i)+parseInt(c);window.requestAnimationFrame(()=>{this.$refs.frame.height=m+"px"})}},mounted(){window.addEventListener("resize",this.resize)},beforeDestroy(){window.removeEventListener("resize",this.resize)}},fl={};var Mg=W(Og,Tg,Rg,!1,Pg,"70b0929a",null,null);function Pg(e){for(let o in fl)this[o]=fl[o]}var Dg=function(){return Mg.exports}(),Ng=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("div",{staticClass:"editorPreview__item",class:e.previewBlockItemClasses,on:{mousedown:function(c){c.stopPropagation()}}},[i("div",{staticClass:"editorPreview__frame"},[i("a17-editor-iframe",{ref:"blockIframe",attrs:{block:e.block},on:{loaded:e.iframeLoaded}})],1),i("div",{staticClass:"editorPreview__protector editorPreview__dragger",on:{click:function(c){return c.preventDefault(),e.handleBlockPreviewClick(c)}}}),i("div",{staticClass:"editorPreview__header"},[i("a17-buttonbar",{attrs:{variant:"visible"}},[e.blocksLength>1?i("a17-dropdown",{ref:"blockDropdown",staticClass:"f--small",attrs:{position:"bottom-left",maxHeight:270},on:{open:e.handleDropDownOpen,close:e.handleDropDownClose}},[i("button",{attrs:{type:"button"},on:{click:function(c){return e.toggleBlockDropdown(e.blockIndex)}}},[i("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"drag"}})]),i("div",{attrs:{slot:"dropdown__content"},slot:"dropdown__content"},e._l(e.blocksLength,function(c){return i("button",{key:c,attrs:{type:"button"},on:{click:function(m){return e.moveBlock(c-1)}}},[e._v(" "+e._s(c)+" ")])}),0)]):e._e(),i("button",{attrs:{type:"button"},on:{click:e.deleteBlock}},[i("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"trash"}})])],1)],1)])},Fg=[];const Ug={name:"A17EditorPreviewBlockItem",props:{isBlockActive:{type:Boolean,default:!1}},mixins:[Vl],components:{"a17-editor-iframe":Dg},data(){return{dropdownOpen:!1}},computed:{previewBlockItemClasses(){return{"editorPreview__item--active":this.isBlockActive,"editorPreview__item--dropdown-open":this.dropdownOpen}}},methods:{handleBlockPreviewClick(){this.isBlockActive?this.unselectBlock():this.selectBlock()},handleDropDownOpen(){this.dropdownOpen=!0},handleDropDownClose(){this.dropdownOpen=!1},iframeLoaded(){!this.isBlockActive||this.$nextTick(()=>{this.$emit("scroll-to",this.$el.offsetTop)})}},beforeDestroy(){this.unselectBlock()}},cl={};var Wg=W(Ug,Ng,Fg,!1,Vg,"2a30a643",null,null);function Vg(e){for(let o in cl)this[o]=cl[o]}var zg=function(){return Wg.exports}(),Kg=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("a17-blockeditor-model",{attrs:{"editor-name":e.editorName},scopedSlots:e._u([{key:"default",fn:function(c){var m=c.add,x=c.edit,E=c.unEdit;return[i("div",{staticClass:"editorPreview",class:e.previewClass,style:e.previewStyle,on:{mousedown:function(A){return e._unselectBlock(E)}}},[e.blocks.length?e._e():i("div",{staticClass:"editorPreview__empty"},[i("b",[e._v(e._s(e.$trans("previewer.drag-and-drop","Drag and drop content from the left navigation")))])]),i("draggable",{ref:"previewContent",staticClass:"editorPreview__content",attrs:{value:e.blocks,options:{group:"editorBlocks",handle:e.handle}},on:{add:function(A){return e.onAdd(m,x,A)},update:e.onUpdate}},[e._l(e.blocks,function(A){return[i("a17-blockeditor-model",{key:A.id,attrs:{block:A,"editor-name":e.editorName},scopedSlots:e._u([{key:"default",fn:function(T){var z=T.block,G=T.isActive,Q=T.blockIndex,ct=T.move,ot=T.remove,qt=T.edit,ue=T.unEdit;return[i("a17-editor-block-preview",{key:A.id,ref:z.id,refInFor:!0,attrs:{block:z,blockIndex:Q,blocksLength:e.blocks.length,isBlockActive:G},on:{"block:select":function(st){return e._selectBlock(qt,Q)},"block:unselect":function(st){return e._unselectBlock(ue,Q)},"block:move":ct,"block:delete":function(st){return e._deleteBlock(ot)},"scroll-to":e.scrollToActive}})]}}],null,!0)})]})],2),e.loading?i("a17-spinner",{attrs:{visible:!0}},[e._v(e._s(e.$trans("fields.block-editor.loading","Loading"))+"\u2026 ")]):e._e()],1)]}}])})},Hg=[];const Gg={name:"A17editorPreview",props:{bgColor:{type:String,default:"#FFFFFF"},hasBlockActive:{props:{type:Boolean,default:!1}}},mixins:[ya,zl],components:{draggable:xa,"a17-editor-block-preview":zg,"a17-blockeditor-model":tr,"a17-spinner":Dl},data(){return{loading:!1,blockSelectIndex:-1,handle:".editorPreview__dragger"}},computed:{previewClass(){return{"editorPreview--dark":a_(this.bgColor).getBrightness()<180,"editorPreview--loading":this.loading}},previewStyle(){return{"background-color":this.bgColor}}},methods:{onAdd(e,o,i){const{item:c}=i,m={};m.title=c.getAttribute("data-title"),m.component=c.getAttribute("data-component"),m.icon=c.getAttribute("data-icon");const x=Math.max(0,i.newIndex);this.addAndEditBlock(e,o,{block:m,index:x}),this._selectBlock(null,x)},onUpdate({oldIndex:e,newIndex:o}){this.$emit("blocks:move",{oldIndex:e,newIndex:o})},_selectBlock(e=null,o){e&&this.selectBlock(e,o),this.blockSelectIndex!==o&&(this.unSubscribe(),this.blockSelectIndex=o,this._unSubscribeInternal=this.$store.subscribe(i=>{Ps.REFRESH_BLOCK_PREVIEW.includes(i.type)&&(Ps.REFRESH_BLOCK_PREVIEW_ALL.includes(i.type)?this.getAllPreviews():this.getPreview(o))}))},_unselectBlock(e,o=this.blockSelectIndex){this.unSubscribe(),this.getPreview(o),this.unselectBlock(e,o),this.blockSelectIndex=-1},_deleteBlock(e){this.unSubscribe(),this.deleteBlock(e)},unSubscribe(){!this._unSubscribeInternal||(this._unSubscribeInternal(),this._unSubscribeInternal=null)},getAllPreviews(){this.loading=!0,this.$store.dispatch(mt.GET_ALL_PREVIEWS,{editorName:this.editorName}).then(()=>{this.$nextTick(()=>{this.loading=!1})})},getPreview(e=-1){this.loading=!0,this.$store.dispatch(mt.GET_PREVIEW,{editorName:this.editorName,index:e}).then(()=>{this.$nextTick(()=>{this.loading=!1})})},scrollToActive(e){this.$refs.previewContent.$el.scrollTop=Math.max(0,e-20)},resizeAllIframes(){!this.$refs.blockPreview||this.$refs.blockPreview.forEach(e=>{e.$refs.blockIframe.resize()})},_resize:Xi(function(){this.resizeAllIframes()},200),init(){window.addEventListener("resize",this._resize)},dispose(){window.removeEventListener("resize",this._resize)}},mounted(){this.init(),this.$nextTick(()=>{this.getAllPreviews()})},beforeDestroy(){this.dispose()},watch:{editorName(){this.unSubscribe(),this.getAllPreviews()},hasBlockActive(e){e||(this.unSubscribe(),this.blockSelectIndex=-1)}}},ul={};var qg=W(Gg,Kg,Hg,!1,Yg,"679583f6",null,null);function Yg(e){for(let o in ul)this[o]=ul[o]}var Zg=function(){return qg.exports}(),Xg=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("a17-overlay",{ref:"overlay",attrs:{title:e.$trans("editor.title"),customClasses:e.htmlEditorClass},on:{close:e.close},scopedSlots:e._u([e.editorNames.length>1?{key:"overlay__header",fn:function(){return[i("a17-dropdown",{ref:"editorDropdown",attrs:{position:"bottom-left",maxWidth:400,maxHeight:300}},[i("a17-button",{staticClass:"editorDropdown__trigger",on:{click:function(c){return e.$refs.editorDropdown.toggle()}}},[e._v(" "+e._s(e.currentEditorLabel)+" "),i("span",{directives:[{name:"svg",rawName:"v-svg"}],attrs:{symbol:"dropdown_module"}})]),i("div",{attrs:{slot:"dropdown__content"},slot:"dropdown__content"},e._l(e.editorNames,function(c){return i("button",{key:c.value,staticClass:"editorDropdown",attrs:{type:"button"},on:{click:function(m){return e.updateEditorName(c.value)}}},[e._v(" "+e._s(c.label)+" ")])}),0)],1)]},proxy:!0}:null],null,!0)},[i("a17-blocks-list",{attrs:{"editor-name":e.editorName},scopedSlots:e._u([{key:"default",fn:function(c){var m=c.availableBlocks,x=c.hasBlockActive,E=c.savedBlocks,A=c.editorNames,T=c.moveBlock;return[i("div",{staticClass:"editor"},[e.revisions.length?i("a17-button",{staticClass:"editor__leave",attrs:{variant:"editor",size:"small"},on:{click:e.openPreview}},[i("span",{directives:[{name:"svg",rawName:"v-svg"}],staticClass:"hide--xsmall",attrs:{symbol:"preview"}}),e._v(e._s(e.$trans("fields.block-editor.preview","Preview"))+" ")]):e._e(),i("div",{staticClass:"editor__frame"},[i("div",{staticClass:"editor__inner"},[i("div",{ref:"sidebar",staticClass:"editor__sidebar"},[i("a17-editorsidebar",{attrs:{"editor-name":e.editorName,hasBlockActive:x,editorNames:A,blocks:m},on:{"editorName:update":e.updateEditorName}},[e._v(" "+e._s(e.$trans("fields.block-editor.add-content","Add content"))+" ")])],1),i("div",{staticClass:"editor__resizer",on:{mousedown:e.resize}},[i("span")]),i("div",{staticClass:"editor__preview"},[e.editorOpen?i("a17-editorpreview",{ref:"previews",attrs:{"editor-name":e.editorName,blocks:E,hasBlockActive:x,sandbox:e.previewSandbox,bgColor:e.bgColor},on:{"blocks:move":T}}):e._e()],1)])])],1)]}}])})],1)},Jg=[];const Qg={name:"A17Editor",components:{"a17-editorsidebar":Lg,"a17-editorpreview":Zg,"a17-blocks-list":ji},props:{bgColor:{type:String,default:"#FFFFFF"},previewSandbox:{type:[Boolean,Array],default:!0}},data(){return{editorName:null,editorOpen:!1,htmlEditorClass:Ji.editor}},computed:{currentEditorLabel(){const e=this.editorNames&&this.editorNames.find(o=>o.value===this.editorName);return e&&e.label},...wt({revisions:e=>e.revision.all,editorNamesBase:e=>e.blocks.editorNames}),...jt(["blocks"]),editorNames(){return this.editorNamesBase.filter(e=>e.nested===!1)}},provide(){return{sandbox:this.previewSandbox}},methods:{initEditorName(){if(!this.editorName){const e=this.editorNames[0]&&this.editorNames[0].value;this.updateEditorName(e)}},updateEditorName(e){this.editorName!==e&&(this.editorName=e)},open(e,o=!1){o&&this.updateEditorName(o),this.editorOpen=!0,this.$refs.overlay.open()},close(){this.editorOpen=!1},resize(){window.addEventListener("mousemove",this.resizeSidebar,!1),window.addEventListener("mouseup",this.stopResizeSidebar,!1)},resizeSidebar(e){const o=this.$refs.sidebar,i=window.innerWidth;o&&(o.style.width=(e.clientX-o.offsetLeft)/i*100+"%")},stopResizeSidebar(){window.removeEventListener("mousemove",this.resizeSidebar,!1),window.removeEventListener("mouseup",this.stopResizeSidebar,!1),this.$refs.previews.resizeAllIframes()},openPreview(){this.$root.$refs.preview&&this.$root.$refs.preview.open()}},created(){this.initEditorName()}},pl={};var jg=W(Qg,Xg,Jg,!1,tb,"21e4e83e",null,null);function tb(e){for(let o in pl)this[o]=pl[o]}var eb=function(){return jg.exports}(),nb=function(){var e=this,o=e.$createElement,i=e._self._c||o;return i("a17-modal",{ref:"modal",staticClass:"modal--form",attrs:{title:e.modalTitle,forceClose:!0}},[i("form",{attrs:{action:e.formCreate},on:{submit:function(c){return c.preventDefault(),e.submit(c)}}},[e._t("default"),i("a17-modal-validation",{attrs:{"is-disable":!0}})],2)])},ab=[];const ib={name:"A17ModalAdd",mixins:[Ul],props:{name:{type:String,default:""},modalTitle:{type:String,default:"Add new"},formCreate:{type:String,default:"#"}},components:{"a17-modal-validation":Qi},methods:{open:function(){this.$refs.modal&&this.$refs.modal.open()},submit:function(){if(this.isSubmitPrevented){this.shouldRetrySubmitWhenAllowed=!0;return}if(this._isSubmitting)return;this._isSubmitting=!0;const e=this;this.$store.commit(nt.UPDATE_FORM_LOADING,!0);const o=document.activeElement.name;this.$nextTick(function(){this.$store.dispatch(mt.CREATE_FORM_IN_MODAL,{name:this.name,endpoint:this.formCreate,method:"post"}).then(()=>{e.$refs.modal&&e.$refs.modal.close(),e.$nextTick(function(){e.$store.commit(En.SET_NOTIF,{message:"Your content has been added",variant:"success"}),o==="create-another"&&e.$refs.modal&&e.$refs.modal.open()})},i=>{e.$store.commit(En.SET_NOTIF,{message:"Your content can not be added, please retry",variant:"error"})})})}}},hl={};var rb=W(ib,nb,ab,!1,ob,null,null,null);function ob(e){for(let o in hl)this[o]=hl[o]}var sb=function(){return rb.exports}();const lb={withPublicationToggle:window.TWILL.STORE.publication.withPublicationToggle||!1,published:window.TWILL.STORE.publication.published||!1,publishSubmit:window.TWILL.STORE.publication.published||!window.TWILL.STORE.publication.withPublicationToggle?"update":"live",publishedLabel:window.TWILL.STORE.publication.publishedLabel||"Live",draftLabel:window.TWILL.STORE.publication.draftLabel||"Draft",expiredLabel:window.TWILL.STORE.publication.expiredLabel||"Expired",scheduledLabel:window.TWILL.STORE.publication.scheduledLabel||"Scheduled",withPublicationTimeframe:window.TWILL.STORE.publication.withPublicationTimeframe||!1,startDate:window.TWILL.STORE.publication.startDate||null,endDate:window.TWILL.STORE.publication.endDate||null,visibility:window.TWILL.STORE.publication.visibility||!1,reviewProcess:window.TWILL.STORE.publication.reviewProcess||[],userInfo:window.TWILL.STORE.publication.userInfo||null,createWithoutModal:window.TWILL.STORE.publication.createWithoutModal||!1,hasUnsavedChanges:!1,saveType:void 0,visibilityOptions:[{value:"public",label:"Public"},{value:"private",label:"Private"}],submitDisableMessage:window.TWILL.STORE.publication.submitDisableMessage||"",submitOptions:window.TWILL.STORE.publication.submitOptions||{draft:[{name:"save",text:window.$trans("publisher.save","Save as draft"),disabled:!1},{name:"save-close",text:window.$trans("publisher.save-close","Save as draft and close"),disabled:!1},{name:"save-new",text:window.$trans("publisher.save-new","Save as draft and create new"),disabled:!1},{name:"cancel",text:window.$trans("publisher.cancel","Cancel"),disabled:!1}],live:[{name:"publish",text:window.$trans("publisher.publish","Publish"),disabled:!1},{name:"publish-close",text:window.$trans("publisher.publish-close","Publish and close"),disabled:!1},{name:"publish-new",text:window.$trans("publisher.publish-new","Publish and create new"),disabled:!1},{name:"cancel",text:window.$trans("publisher.cancel","Cancel"),disabled:!1}],update:[{name:"update",text:window.$trans("publisher.update","Update"),disabled:!1},{name:"update-close",text:window.$trans("publisher.update-close","Update and close"),disabled:!1},{name:"update-new",text:window.$trans("publisher.update-new","Update and create new"),disabled:!1},{name:"cancel",text:window.$trans("publisher.cancel","Cancel"),disabled:!1}]}},db={reviewProcessComplete:e=>e.reviewProcess.filter(o=>o.checked),getSubmitOptions:e=>e.published||!e.withPublicationToggle?e.submitOptions[e.publishSubmit]:e.submitOptions.draft,isEnabledSubmitOption:(e,o)=>i=>{let c=!0,m={};const x=o.getSubmitOptions.filter(E=>E.name===i);return x.length&&(m=x[0]),m.hasOwnProperty("disabled")&&(c=!m.disabled),c},getSaveType:(e,o)=>e.saveType||o.getSubmitOptions[0].name},fb={[ht.UPDATE_PUBLISH_START_DATE](e,o){e.startDate=o},[ht.UPDATE_PUBLISH_END_DATE](e,o){e.endDate=o},[ht.UPDATE_PUBLISH_STATE](e,o){e.published=o},[ht.UPDATE_PUBLISH_SUBMIT](e){e.publishSubmit=e.published||!e.withPublicationToggle?"update":"live"},[ht.UPDATE_PUBLISH_VISIBILITY](e,o){e.visibility=o},[ht.UPDATE_REVIEW_PROCESS](e,o){let i="",c=-1;o.length&&(i=o[o.length-1],e.reviewProcess.forEach(function(m,x){m.value===i&&(c=x)})),e.reviewProcess.forEach(function(m,x){m.checked=x<=c,m.disabled=!(x===c||x===c+1)})},[ht.UPDATE_SAVE_TYPE](e,o){e.saveType=o},[ht.UPDATE_HAS_UNSAVED_CHANGES](e,o){e.hasUnsavedChanges=o}};var cb={state:lb,getters:db,mutations:fb},ub={getBlockPreview(e,o,i,c){Nl.post(e,o).then(function(m){i&&typeof i=="function"&&i(m.data)},function(m){Fl("CONTENT",{message:"Block preview request error.",value:m}),c&&typeof c=="function"&&c(m)})}};const pb={loading:!1,editor:window.TWILL.STORE.form.editor||!1,editorNames:window.TWILL.STORE.form.editorNames||[],available:window.TWILL.STORE.form.availableBlocks||{},blocks:window.TWILL.STORE.form.blocks||{},previews:window.TWILL.STORE.form.previews||{},active:{}},hb={previewsById:e=>o=>e.previews[o]?e.previews[o]:"",blocks:e=>o=>e.blocks[o]||[],availableBlocks:e=>o=>e.available[o]||[],blockIndex:(e,o)=>(i,c)=>o.blocks(c).findIndex(m=>m.id===i.id)},mb=()=>Date.now(),wb={[J.ADD_BLOCK](e,{block:o,index:i,editorName:c}){const m=e.blocks[c]||[],x={...o,id:mb(),name:c};x.twillUi={},x.twillUi.isNew=!0,i>-1?m.splice(i,0,x):m.push(x),F.set(e.blocks,c,m)},[J.MOVE_BLOCK](e,{editorName:o,newIndex:i,oldIndex:c}){const m=e.blocks[o]||[];if(i>=m.length){let x=i-m.length;for(;x--+1;)m.push(void 0)}m.splice(i,0,m.splice(c,1)[0]),F.set(e.blocks,o,m)},[J.DELETE_BLOCK](e,{editorName:o,index:i}){const c=e.blocks[o][i].id,m=e.blocks[o]||[];c&&F.delete(e.previews,c),m.splice(i,1),F.set(e.blocks,o,m)},[J.DUPLICATE_BLOCK](e,{editorName:o,index:i,block:c,id:m}){const x=e.blocks[o]||[];x.splice(i,0,{...c,id:m,name:o}),F.set(e.blocks,o,x)},[J.REORDER_BLOCKS](e,{editorName:o,value:i}){F.set(e.blocks,o,i)},[J.ACTIVATE_BLOCK](e,{editorName:o,index:i}){e.blocks[o]&&e.blocks[o][i]?e.active={...e.blocks[o][i]}:e.active={}},[J.ADD_BLOCK_PREVIEW](e,o){F.set(e.previews,o.id,o.html)},[J.UPDATE_PREVIEW_LOADING](e,o){e.loading=!e.loading}},ml=(e,o,i,c)=>{if(e&&e.hasOwnProperty("id")){const m=i_(e,i);i.language.all.length>1&&(m.activeLanguage=i.language.active.value),r_(m)?(o(J.ADD_BLOCK_PREVIEW,{id:e.id,html:""}),c&&typeof c=="function"&&c()):ub.getBlockPreview(i.form.blockPreviewUrl,m,x=>{o(J.ADD_BLOCK_PREVIEW,{id:e.id,html:x}),c&&typeof c=="function"&&c()},x=>{})}},_b={[mt.GET_PREVIEW]({commit:e,state:o,rootState:i},{editorName:c,index:m=-1}){let x=o.blocks[c]&&m>=0?{...o.blocks[c][m]}:{};o.active&&o.active.hasOwnProperty("id")&&m===-1&&(x={...o.active}),ml(x,e,i)},[mt.GET_ALL_PREVIEWS]({commit:e,state:o,rootState:i},{editorName:c}){if(o.blocks[c]&&o.blocks[c].length>0&&!o.loading){e(J.UPDATE_PREVIEW_LOADING,!0);let m=0;const x=o.blocks[c].length;Object.values(o.blocks[c]).forEach(E=>{ml(E,e,i,()=>{m++,m===x&&e(J.UPDATE_PREVIEW_LOADING,!0)})})}},async[mt.DUPLICATE_BLOCK]({commit:e,state:o,rootState:i},{editorName:c,futureIndex:m,block:x,id:E}){e(J.DUPLICATE_BLOCK,{editorName:c,index:m,block:x,id:E})},async[mt.MOVE_BLOCK_TO_EDITOR]({commit:e,dispatch:o},{editorName:i,index:c,block:m,futureIndex:x,id:E}){await o(mt.DUPLICATE_BLOCK,{editorName:i,futureIndex:x,block:m,id:E}),e(J.DELETE_BLOCK,{editorName:m.name,index:c})}};var vb={state:pb,getters:hb,mutations:wb,actions:_b},wl={getRevisionContent(e,o,i,c){Nl.put(e,o).then(function(m){i&&typeof i=="function"&&i(m.data)},function(m){Fl("REVISION",{message:"Preview request error.",value:m}),c&&typeof c=="function"&&c(m)})}};const gb={loading:!1,active:{},activeContent:"",currentContent:"",all:window.TWILL.STORE.revisions||[]},bb={},xb={[Ht.LOADING_REV](e){e.loading=!0},[Ht.UPDATE_REV](e,o){function i(m){return m.id===o}const c=e.all.findIndex(i);c!==-1?e.active=e.all[c]:e.active={}},[Ht.UPDATE_REV_CONTENT](e,o){e.loading=!1,e.activeContent=o},[Ht.UPDATE_REV_CURRENT_CONTENT](e,o){e.loading=!1,e.currentContent=o},[Ht.UPDATE_REV_ALL](e,o){e.all=o}},yb={[mt.GET_CURRENT]({commit:e,rootState:o}){return new Promise((i,c)=>{e(Ht.LOADING_REV);const m=o_(o);o.language.all.length>1&&(m.activeLanguage=o.language.active.value),wl.getRevisionContent(o.form.previewUrl,m,x=>{e(Ht.UPDATE_REV_CURRENT_CONTENT,x),i()},x=>{c(x)})})},[mt.GET_REVISION]({commit:e,state:o,rootState:i}){return new Promise((c,m)=>{e(Ht.LOADING_REV);let x=0;Object.keys(o.active).length===0?x=o.all[0].id:x=o.active.id;const E={revisionId:x};i.language.all.length>1&&(E.activeLanguage=i.language.active.value),wl.getRevisionContent(i.form.previewUrl,E,A=>{e(Ht.UPDATE_REV_CONTENT,A),c()},A=>{m(A)})})}};var Ib={state:gb,getters:bb,actions:yb,mutations:xb};const kb={repeaters:window.TWILL.STORE.form.repeaters||{},availableRepeaters:window.TWILL.STORE.form.availableRepeaters||{}},Eb={repeatersByBlockId:e=>o=>{const i=Object.keys(e.repeaters).filter(m=>m.startsWith(`blocks-${o}`)),c={};return i.forEach(m=>c[m]=e.repeaters[m]),c}};function Gi(){return Date.now()}const Sb={[nt.ADD_FORM_BLOCK](e,o){const i=o.name,c=o.type,m={},x=e.availableRepeaters[c],E=!e.repeaters[i];if(!!x)if(m.id=Gi(),m.type=x.component,m.title=x.title,m.twillUi={},m.twillUi.isNew=!0,E){const A={};A[i]=[],A[i].push(m),e.repeaters=Object.assign({},e.repeaters,A)}else e.repeaters[i].push(m)},[nt.ADD_REPEATER_FROM_SELECTION](e,o){const i=o.name,c=o.type,m=e.availableRepeaters[c],x=!e.repeaters[i];if(!m)return;const E={};E[i]=[],o.selection.forEach(A=>{const T={};T.id=Gi(),T.type=m.component,T.title=m.title,T.repeater_target_id=A.id;const z=[];for(const G in A.repeaterFields)A.repeaterFields.hasOwnProperty(G)&&z.push({name:`blocks[${T.id}][${G}]`,value:A.repeaterFields[G]});this.commit(nt.ADD_FORM_FIELDS,z),x?E[i].push(T):e.repeaters[i].push(T)}),x&&(e.repeaters=Object.assign({},e.repeaters,E))},[nt.DELETE_FORM_BLOCK](e,o){e.repeaters[o.name].splice(o.index,1)},[nt.DUPLICATE_FORM_BLOCK](e,o){const i=Object.assign({},e.repeaters[o.name][o.index]);i.id=Gi(),i.twillUi={},i.twillUi.isNew=!0,e.repeaters[o.name].splice(o.index+1,0,i)},[nt.REORDER_FORM_BLOCKS](e,o){const i={};i[o.name]=o.blocks,e.repeaters=Object.assign({},e.repeaters,i)},[nt.ADD_REPEATERS](e,{repeaters:o}){e.repeaters=Object.assign({},e.repeaters,o)}},Cb={async[mt.DUPLICATE_BLOCK]({commit:e,getters:o},{block:i,id:c}){const m={...o.repeatersByBlockId(i.id)},x=Object.keys(m),E={};x.forEach(T=>E[T.replace(i.id,c)]=[...m[T]]);const A=[];Object.keys(E).forEach(T=>{E[T].forEach((z,G)=>{const Q=Date.now(),ct=[...o.fieldsByBlockId(z.id)];E[T][G]={...E[T][G],id:Q},ct.forEach(ot=>{A.push({name:ot.name.replace(z.id,Q),value:ot.value})})})}),e(nt.ADD_REPEATERS,{repeaters:E}),e(nt.ADD_FORM_FIELDS,A)}};var Bb={state:kb,getters:Eb,mutations:Sb,actions:Cb};const Ab={active:window.TWILL.STORE.parentId||0,all:window.TWILL.STORE.parents||[]},$b={},Lb={[Wl.UPDATE_PARENT](e,o){o?e.active=o:e.active=0}};var Tb={state:Ab,getters:$b,mutations:Lb};const Rb={groups:window.TWILL.STORE.groups||[],groupUserMapping:window.TWILL.STORE.groupUserMapping||[]};var Ob={state:Rb},Yi={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */(function(e,o){(function(){var i,c="4.17.21",m=200,x="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",E="Expected a function",A="Invalid `variable` option passed into `_.template`",T="__lodash_hash_undefined__",z=500,G="__lodash_placeholder__",Q=1,ct=2,ot=4,qt=1,ue=2,st=1,te=2,lt=4,$t=8,Me=16,Yt=32,Pe=64,ee=128,tn=256,Ia=512,ql=30,Yl="...",Zl=800,Xl=16,er=1,Jl=2,Ql=3,Ie=1/0,pe=9007199254740991,jl=17976931348623157e292,Sn=0/0,Zt=4294967295,td=Zt-1,ed=Zt>>>1,nd=[["ary",ee],["bind",st],["bindKey",te],["curry",$t],["curryRight",Me],["flip",Ia],["partial",Yt],["partialRight",Pe],["rearg",tn]],De="[object Arguments]",Cn="[object Array]",ad="[object AsyncFunction]",en="[object Boolean]",nn="[object Date]",id="[object DOMException]",Bn="[object Error]",An="[object Function]",nr="[object GeneratorFunction]",Ft="[object Map]",an="[object Number]",rd="[object Null]",ne="[object Object]",ar="[object Promise]",od="[object Proxy]",rn="[object RegExp]",Ut="[object Set]",on="[object String]",$n="[object Symbol]",sd="[object Undefined]",sn="[object WeakMap]",ld="[object WeakSet]",ln="[object ArrayBuffer]",Ne="[object DataView]",ka="[object Float32Array]",Ea="[object Float64Array]",Sa="[object Int8Array]",Ca="[object Int16Array]",Ba="[object Int32Array]",Aa="[object Uint8Array]",$a="[object Uint8ClampedArray]",La="[object Uint16Array]",Ta="[object Uint32Array]",dd=/\b__p \+= '';/g,fd=/\b(__p \+=) '' \+/g,cd=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ir=/&(?:amp|lt|gt|quot|#39);/g,rr=/[&<>"']/g,ud=RegExp(ir.source),pd=RegExp(rr.source),hd=/<%-([\s\S]+?)%>/g,md=/<%([\s\S]+?)%>/g,or=/<%=([\s\S]+?)%>/g,wd=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_d=/^\w*$/,vd=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ra=/[\\^$.*+?()[\]{}|]/g,gd=RegExp(Ra.source),Oa=/^\s+/,bd=/\s/,xd=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,yd=/\{\n\/\* \[wrapped with (.+)\] \*/,Id=/,? & /,kd=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ed=/[()=,{}\[\]\/\s]/,Sd=/\\(\\)?/g,Cd=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,sr=/\w*$/,Bd=/^[-+]0x[0-9a-f]+$/i,Ad=/^0b[01]+$/i,$d=/^\[object .+?Constructor\]$/,Ld=/^0o[0-7]+$/i,Td=/^(?:0|[1-9]\d*)$/,Rd=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ln=/($^)/,Od=/['\n\r\u2028\u2029\\]/g,Tn="\\ud800-\\udfff",Md="\\u0300-\\u036f",Pd="\\ufe20-\\ufe2f",Dd="\\u20d0-\\u20ff",lr=Md+Pd+Dd,dr="\\u2700-\\u27bf",fr="a-z\\xdf-\\xf6\\xf8-\\xff",Nd="\\xac\\xb1\\xd7\\xf7",Fd="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ud="\\u2000-\\u206f",Wd=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",cr="A-Z\\xc0-\\xd6\\xd8-\\xde",ur="\\ufe0e\\ufe0f",pr=Nd+Fd+Ud+Wd,Ma="['\u2019]",Vd="["+Tn+"]",hr="["+pr+"]",Rn="["+lr+"]",mr="\\d+",zd="["+dr+"]",wr="["+fr+"]",_r="[^"+Tn+pr+mr+dr+fr+cr+"]",Pa="\\ud83c[\\udffb-\\udfff]",Kd="(?:"+Rn+"|"+Pa+")",vr="[^"+Tn+"]",Da="(?:\\ud83c[\\udde6-\\uddff]){2}",Na="[\\ud800-\\udbff][\\udc00-\\udfff]",Fe="["+cr+"]",gr="\\u200d",br="(?:"+wr+"|"+_r+")",Hd="(?:"+Fe+"|"+_r+")",xr="(?:"+Ma+"(?:d|ll|m|re|s|t|ve))?",yr="(?:"+Ma+"(?:D|LL|M|RE|S|T|VE))?",Ir=Kd+"?",kr="["+ur+"]?",Gd="(?:"+gr+"(?:"+[vr,Da,Na].join("|")+")"+kr+Ir+")*",qd="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Yd="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Er=kr+Ir+Gd,Zd="(?:"+[zd,Da,Na].join("|")+")"+Er,Xd="(?:"+[vr+Rn+"?",Rn,Da,Na,Vd].join("|")+")",Jd=RegExp(Ma,"g"),Qd=RegExp(Rn,"g"),Fa=RegExp(Pa+"(?="+Pa+")|"+Xd+Er,"g"),jd=RegExp([Fe+"?"+wr+"+"+xr+"(?="+[hr,Fe,"$"].join("|")+")",Hd+"+"+yr+"(?="+[hr,Fe+br,"$"].join("|")+")",Fe+"?"+br+"+"+xr,Fe+"+"+yr,Yd,qd,mr,Zd].join("|"),"g"),tf=RegExp("["+gr+Tn+lr+ur+"]"),ef=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,nf=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],af=-1,Y={};Y[ka]=Y[Ea]=Y[Sa]=Y[Ca]=Y[Ba]=Y[Aa]=Y[$a]=Y[La]=Y[Ta]=!0,Y[De]=Y[Cn]=Y[ln]=Y[en]=Y[Ne]=Y[nn]=Y[Bn]=Y[An]=Y[Ft]=Y[an]=Y[ne]=Y[rn]=Y[Ut]=Y[on]=Y[sn]=!1;var q={};q[De]=q[Cn]=q[ln]=q[Ne]=q[en]=q[nn]=q[ka]=q[Ea]=q[Sa]=q[Ca]=q[Ba]=q[Ft]=q[an]=q[ne]=q[rn]=q[Ut]=q[on]=q[$n]=q[Aa]=q[$a]=q[La]=q[Ta]=!0,q[Bn]=q[An]=q[sn]=!1;var rf={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},of={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},sf={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},lf={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},df=parseFloat,ff=parseInt,Sr=typeof kn=="object"&&kn&&kn.Object===Object&&kn,cf=typeof self=="object"&&self&&self.Object===Object&&self,dt=Sr||cf||Function("return this")(),Ua=o&&!o.nodeType&&o,ke=Ua&&!0&&e&&!e.nodeType&&e,Cr=ke&&ke.exports===Ua,Wa=Cr&&Sr.process,Lt=function(){try{var p=ke&&ke.require&&ke.require("util").types;return p||Wa&&Wa.binding&&Wa.binding("util")}catch{}}(),Br=Lt&&Lt.isArrayBuffer,Ar=Lt&&Lt.isDate,$r=Lt&&Lt.isMap,Lr=Lt&&Lt.isRegExp,Tr=Lt&&Lt.isSet,Rr=Lt&&Lt.isTypedArray;function kt(p,_,w){switch(w.length){case 0:return p.call(_);case 1:return p.call(_,w[0]);case 2:return p.call(_,w[0],w[1]);case 3:return p.call(_,w[0],w[1],w[2])}return p.apply(_,w)}function uf(p,_,w,I){for(var $=-1,U=p==null?0:p.length;++$<U;){var at=p[$];_(I,at,w(at),p)}return I}function Tt(p,_){for(var w=-1,I=p==null?0:p.length;++w<I&&_(p[w],w,p)!==!1;);return p}function pf(p,_){for(var w=p==null?0:p.length;w--&&_(p[w],w,p)!==!1;);return p}function Or(p,_){for(var w=-1,I=p==null?0:p.length;++w<I;)if(!_(p[w],w,p))return!1;return!0}function he(p,_){for(var w=-1,I=p==null?0:p.length,$=0,U=[];++w<I;){var at=p[w];_(at,w,p)&&(U[$++]=at)}return U}function On(p,_){var w=p==null?0:p.length;return!!w&&Ue(p,_,0)>-1}function Va(p,_,w){for(var I=-1,$=p==null?0:p.length;++I<$;)if(w(_,p[I]))return!0;return!1}function Z(p,_){for(var w=-1,I=p==null?0:p.length,$=Array(I);++w<I;)$[w]=_(p[w],w,p);return $}function me(p,_){for(var w=-1,I=_.length,$=p.length;++w<I;)p[$+w]=_[w];return p}function za(p,_,w,I){var $=-1,U=p==null?0:p.length;for(I&&U&&(w=p[++$]);++$<U;)w=_(w,p[$],$,p);return w}function hf(p,_,w,I){var $=p==null?0:p.length;for(I&&$&&(w=p[--$]);$--;)w=_(w,p[$],$,p);return w}function Ka(p,_){for(var w=-1,I=p==null?0:p.length;++w<I;)if(_(p[w],w,p))return!0;return!1}var mf=Ha("length");function wf(p){return p.split("")}function _f(p){return p.match(kd)||[]}function Mr(p,_,w){var I;return w(p,function($,U,at){if(_($,U,at))return I=U,!1}),I}function Mn(p,_,w,I){for(var $=p.length,U=w+(I?1:-1);I?U--:++U<$;)if(_(p[U],U,p))return U;return-1}function Ue(p,_,w){return _===_?Af(p,_,w):Mn(p,Pr,w)}function vf(p,_,w,I){for(var $=w-1,U=p.length;++$<U;)if(I(p[$],_))return $;return-1}function Pr(p){return p!==p}function Dr(p,_){var w=p==null?0:p.length;return w?qa(p,_)/w:Sn}function Ha(p){return function(_){return _==null?i:_[p]}}function Ga(p){return function(_){return p==null?i:p[_]}}function Nr(p,_,w,I,$){return $(p,function(U,at,H){w=I?(I=!1,U):_(w,U,at,H)}),w}function gf(p,_){var w=p.length;for(p.sort(_);w--;)p[w]=p[w].value;return p}function qa(p,_){for(var w,I=-1,$=p.length;++I<$;){var U=_(p[I]);U!==i&&(w=w===i?U:w+U)}return w}function Ya(p,_){for(var w=-1,I=Array(p);++w<p;)I[w]=_(w);return I}function bf(p,_){return Z(_,function(w){return[w,p[w]]})}function Fr(p){return p&&p.slice(0,zr(p)+1).replace(Oa,"")}function Et(p){return function(_){return p(_)}}function Za(p,_){return Z(_,function(w){return p[w]})}function dn(p,_){return p.has(_)}function Ur(p,_){for(var w=-1,I=p.length;++w<I&&Ue(_,p[w],0)>-1;);return w}function Wr(p,_){for(var w=p.length;w--&&Ue(_,p[w],0)>-1;);return w}function xf(p,_){for(var w=p.length,I=0;w--;)p[w]===_&&++I;return I}var yf=Ga(rf),If=Ga(of);function kf(p){return"\\"+lf[p]}function Ef(p,_){return p==null?i:p[_]}function We(p){return tf.test(p)}function Sf(p){return ef.test(p)}function Cf(p){for(var _,w=[];!(_=p.next()).done;)w.push(_.value);return w}function Xa(p){var _=-1,w=Array(p.size);return p.forEach(function(I,$){w[++_]=[$,I]}),w}function Vr(p,_){return function(w){return p(_(w))}}function we(p,_){for(var w=-1,I=p.length,$=0,U=[];++w<I;){var at=p[w];(at===_||at===G)&&(p[w]=G,U[$++]=w)}return U}function Pn(p){var _=-1,w=Array(p.size);return p.forEach(function(I){w[++_]=I}),w}function Bf(p){var _=-1,w=Array(p.size);return p.forEach(function(I){w[++_]=[I,I]}),w}function Af(p,_,w){for(var I=w-1,$=p.length;++I<$;)if(p[I]===_)return I;return-1}function $f(p,_,w){for(var I=w+1;I--;)if(p[I]===_)return I;return I}function Ve(p){return We(p)?Tf(p):mf(p)}function Wt(p){return We(p)?Rf(p):wf(p)}function zr(p){for(var _=p.length;_--&&bd.test(p.charAt(_)););return _}var Lf=Ga(sf);function Tf(p){for(var _=Fa.lastIndex=0;Fa.test(p);)++_;return _}function Rf(p){return p.match(Fa)||[]}function Of(p){return p.match(jd)||[]}var Mf=function p(_){_=_==null?dt:ze.defaults(dt.Object(),_,ze.pick(dt,nf));var w=_.Array,I=_.Date,$=_.Error,U=_.Function,at=_.Math,H=_.Object,Ja=_.RegExp,Pf=_.String,Rt=_.TypeError,Dn=w.prototype,Df=U.prototype,Ke=H.prototype,Nn=_["__core-js_shared__"],Fn=Df.toString,K=Ke.hasOwnProperty,Nf=0,Kr=function(){var t=/[^.]+$/.exec(Nn&&Nn.keys&&Nn.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Un=Ke.toString,Ff=Fn.call(H),Uf=dt._,Wf=Ja("^"+Fn.call(K).replace(Ra,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Wn=Cr?_.Buffer:i,_e=_.Symbol,Vn=_.Uint8Array,Hr=Wn?Wn.allocUnsafe:i,zn=Vr(H.getPrototypeOf,H),Gr=H.create,qr=Ke.propertyIsEnumerable,Kn=Dn.splice,Yr=_e?_e.isConcatSpreadable:i,fn=_e?_e.iterator:i,Ee=_e?_e.toStringTag:i,Hn=function(){try{var t=$e(H,"defineProperty");return t({},"",{}),t}catch{}}(),Vf=_.clearTimeout!==dt.clearTimeout&&_.clearTimeout,zf=I&&I.now!==dt.Date.now&&I.now,Kf=_.setTimeout!==dt.setTimeout&&_.setTimeout,Gn=at.ceil,qn=at.floor,Qa=H.getOwnPropertySymbols,Hf=Wn?Wn.isBuffer:i,Zr=_.isFinite,Gf=Dn.join,qf=Vr(H.keys,H),it=at.max,ut=at.min,Yf=I.now,Zf=_.parseInt,Xr=at.random,Xf=Dn.reverse,ja=$e(_,"DataView"),cn=$e(_,"Map"),ti=$e(_,"Promise"),He=$e(_,"Set"),un=$e(_,"WeakMap"),pn=$e(H,"create"),Yn=un&&new un,Ge={},Jf=Le(ja),Qf=Le(cn),jf=Le(ti),tc=Le(He),ec=Le(un),Zn=_e?_e.prototype:i,hn=Zn?Zn.valueOf:i,Jr=Zn?Zn.toString:i;function l(t){if(j(t)&&!L(t)&&!(t instanceof D)){if(t instanceof Ot)return t;if(K.call(t,"__wrapped__"))return jo(t)}return new Ot(t)}var qe=function(){function t(){}return function(n){if(!X(n))return{};if(Gr)return Gr(n);t.prototype=n;var a=new t;return t.prototype=i,a}}();function Xn(){}function Ot(t,n){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!n,this.__index__=0,this.__values__=i}l.templateSettings={escape:hd,evaluate:md,interpolate:or,variable:"",imports:{_:l}},l.prototype=Xn.prototype,l.prototype.constructor=l,Ot.prototype=qe(Xn.prototype),Ot.prototype.constructor=Ot;function D(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Zt,this.__views__=[]}function nc(){var t=new D(this.__wrapped__);return t.__actions__=bt(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=bt(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=bt(this.__views__),t}function ac(){if(this.__filtered__){var t=new D(this);t.__dir__=-1,t.__filtered__=!0}else t=this.clone(),t.__dir__*=-1;return t}function ic(){var t=this.__wrapped__.value(),n=this.__dir__,a=L(t),r=n<0,s=a?t.length:0,d=wu(0,s,this.__views__),f=d.start,u=d.end,h=u-f,v=r?u:f-1,g=this.__iteratees__,b=g.length,y=0,k=ut(h,this.__takeCount__);if(!a||!r&&s==h&&k==h)return yo(t,this.__actions__);var C=[];t:for(;h--&&y<k;){v+=n;for(var O=-1,B=t[v];++O<b;){var P=g[O],N=P.iteratee,Bt=P.type,gt=N(B);if(Bt==Jl)B=gt;else if(!gt){if(Bt==er)continue t;break t}}C[y++]=B}return C}D.prototype=qe(Xn.prototype),D.prototype.constructor=D;function Se(t){var n=-1,a=t==null?0:t.length;for(this.clear();++n<a;){var r=t[n];this.set(r[0],r[1])}}function rc(){this.__data__=pn?pn(null):{},this.size=0}function oc(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}function sc(t){var n=this.__data__;if(pn){var a=n[t];return a===T?i:a}return K.call(n,t)?n[t]:i}function lc(t){var n=this.__data__;return pn?n[t]!==i:K.call(n,t)}function dc(t,n){var a=this.__data__;return this.size+=this.has(t)?0:1,a[t]=pn&&n===i?T:n,this}Se.prototype.clear=rc,Se.prototype.delete=oc,Se.prototype.get=sc,Se.prototype.has=lc,Se.prototype.set=dc;function ae(t){var n=-1,a=t==null?0:t.length;for(this.clear();++n<a;){var r=t[n];this.set(r[0],r[1])}}function fc(){this.__data__=[],this.size=0}function cc(t){var n=this.__data__,a=Jn(n,t);if(a<0)return!1;var r=n.length-1;return a==r?n.pop():Kn.call(n,a,1),--this.size,!0}function uc(t){var n=this.__data__,a=Jn(n,t);return a<0?i:n[a][1]}function pc(t){return Jn(this.__data__,t)>-1}function hc(t,n){var a=this.__data__,r=Jn(a,t);return r<0?(++this.size,a.push([t,n])):a[r][1]=n,this}ae.prototype.clear=fc,ae.prototype.delete=cc,ae.prototype.get=uc,ae.prototype.has=pc,ae.prototype.set=hc;function ie(t){var n=-1,a=t==null?0:t.length;for(this.clear();++n<a;){var r=t[n];this.set(r[0],r[1])}}function mc(){this.size=0,this.__data__={hash:new Se,map:new(cn||ae),string:new Se}}function wc(t){var n=da(this,t).delete(t);return this.size-=n?1:0,n}function _c(t){return da(this,t).get(t)}function vc(t){return da(this,t).has(t)}function gc(t,n){var a=da(this,t),r=a.size;return a.set(t,n),this.size+=a.size==r?0:1,this}ie.prototype.clear=mc,ie.prototype.delete=wc,ie.prototype.get=_c,ie.prototype.has=vc,ie.prototype.set=gc;function Ce(t){var n=-1,a=t==null?0:t.length;for(this.__data__=new ie;++n<a;)this.add(t[n])}function bc(t){return this.__data__.set(t,T),this}function xc(t){return this.__data__.has(t)}Ce.prototype.add=Ce.prototype.push=bc,Ce.prototype.has=xc;function Vt(t){var n=this.__data__=new ae(t);this.size=n.size}function yc(){this.__data__=new ae,this.size=0}function Ic(t){var n=this.__data__,a=n.delete(t);return this.size=n.size,a}function kc(t){return this.__data__.get(t)}function Ec(t){return this.__data__.has(t)}function Sc(t,n){var a=this.__data__;if(a instanceof ae){var r=a.__data__;if(!cn||r.length<m-1)return r.push([t,n]),this.size=++a.size,this;a=this.__data__=new ie(r)}return a.set(t,n),this.size=a.size,this}Vt.prototype.clear=yc,Vt.prototype.delete=Ic,Vt.prototype.get=kc,Vt.prototype.has=Ec,Vt.prototype.set=Sc;function Qr(t,n){var a=L(t),r=!a&&Te(t),s=!a&&!r&&ye(t),d=!a&&!r&&!s&&Je(t),f=a||r||s||d,u=f?Ya(t.length,Pf):[],h=u.length;for(var v in t)(n||K.call(t,v))&&!(f&&(v=="length"||s&&(v=="offset"||v=="parent")||d&&(v=="buffer"||v=="byteLength"||v=="byteOffset")||le(v,h)))&&u.push(v);return u}function jr(t){var n=t.length;return n?t[ci(0,n-1)]:i}function Cc(t,n){return fa(bt(t),Be(n,0,t.length))}function Bc(t){return fa(bt(t))}function ei(t,n,a){(a!==i&&!zt(t[n],a)||a===i&&!(n in t))&&re(t,n,a)}function mn(t,n,a){var r=t[n];(!(K.call(t,n)&&zt(r,a))||a===i&&!(n in t))&&re(t,n,a)}function Jn(t,n){for(var a=t.length;a--;)if(zt(t[a][0],n))return a;return-1}function Ac(t,n,a,r){return ve(t,function(s,d,f){n(r,s,a(s),f)}),r}function to(t,n){return t&&Jt(n,rt(n),t)}function $c(t,n){return t&&Jt(n,yt(n),t)}function re(t,n,a){n=="__proto__"&&Hn?Hn(t,n,{configurable:!0,enumerable:!0,value:a,writable:!0}):t[n]=a}function ni(t,n){for(var a=-1,r=n.length,s=w(r),d=t==null;++a<r;)s[a]=d?i:Pi(t,n[a]);return s}function Be(t,n,a){return t===t&&(a!==i&&(t=t<=a?t:a),n!==i&&(t=t>=n?t:n)),t}function Mt(t,n,a,r,s,d){var f,u=n&Q,h=n&ct,v=n&ot;if(a&&(f=s?a(t,r,s,d):a(t)),f!==i)return f;if(!X(t))return t;var g=L(t);if(g){if(f=vu(t),!u)return bt(t,f)}else{var b=pt(t),y=b==An||b==nr;if(ye(t))return Eo(t,u);if(b==ne||b==De||y&&!s){if(f=h||y?{}:Ko(t),!u)return h?su(t,$c(f,t)):ou(t,to(f,t))}else{if(!q[b])return s?t:{};f=gu(t,b,u)}}d||(d=new Vt);var k=d.get(t);if(k)return k;d.set(t,f),gs(t)?t.forEach(function(B){f.add(Mt(B,n,a,B,t,d))}):_s(t)&&t.forEach(function(B,P){f.set(P,Mt(B,n,a,P,t,d))});var C=v?h?yi:xi:h?yt:rt,O=g?i:C(t);return Tt(O||t,function(B,P){O&&(P=B,B=t[P]),mn(f,P,Mt(B,n,a,P,t,d))}),f}function Lc(t){var n=rt(t);return function(a){return eo(a,t,n)}}function eo(t,n,a){var r=a.length;if(t==null)return!r;for(t=H(t);r--;){var s=a[r],d=n[s],f=t[s];if(f===i&&!(s in t)||!d(f))return!1}return!0}function no(t,n,a){if(typeof t!="function")throw new Rt(E);return yn(function(){t.apply(i,a)},n)}function wn(t,n,a,r){var s=-1,d=On,f=!0,u=t.length,h=[],v=n.length;if(!u)return h;a&&(n=Z(n,Et(a))),r?(d=Va,f=!1):n.length>=m&&(d=dn,f=!1,n=new Ce(n));t:for(;++s<u;){var g=t[s],b=a==null?g:a(g);if(g=r||g!==0?g:0,f&&b===b){for(var y=v;y--;)if(n[y]===b)continue t;h.push(g)}else d(n,b,r)||h.push(g)}return h}var ve=$o(Xt),ao=$o(ii,!0);function Tc(t,n){var a=!0;return ve(t,function(r,s,d){return a=!!n(r,s,d),a}),a}function Qn(t,n,a){for(var r=-1,s=t.length;++r<s;){var d=t[r],f=n(d);if(f!=null&&(u===i?f===f&&!Ct(f):a(f,u)))var u=f,h=d}return h}function Rc(t,n,a,r){var s=t.length;for(a=R(a),a<0&&(a=-a>s?0:s+a),r=r===i||r>s?s:R(r),r<0&&(r+=s),r=a>r?0:xs(r);a<r;)t[a++]=n;return t}function io(t,n){var a=[];return ve(t,function(r,s,d){n(r,s,d)&&a.push(r)}),a}function ft(t,n,a,r,s){var d=-1,f=t.length;for(a||(a=xu),s||(s=[]);++d<f;){var u=t[d];n>0&&a(u)?n>1?ft(u,n-1,a,r,s):me(s,u):r||(s[s.length]=u)}return s}var ai=Lo(),ro=Lo(!0);function Xt(t,n){return t&&ai(t,n,rt)}function ii(t,n){return t&&ro(t,n,rt)}function jn(t,n){return he(n,function(a){return de(t[a])})}function Ae(t,n){n=be(n,t);for(var a=0,r=n.length;t!=null&&a<r;)t=t[Qt(n[a++])];return a&&a==r?t:i}function oo(t,n,a){var r=n(t);return L(t)?r:me(r,a(t))}function _t(t){return t==null?t===i?sd:rd:Ee&&Ee in H(t)?mu(t):Bu(t)}function ri(t,n){return t>n}function Oc(t,n){return t!=null&&K.call(t,n)}function Mc(t,n){return t!=null&&n in H(t)}function Pc(t,n,a){return t>=ut(n,a)&&t<it(n,a)}function oi(t,n,a){for(var r=a?Va:On,s=t[0].length,d=t.length,f=d,u=w(d),h=1/0,v=[];f--;){var g=t[f];f&&n&&(g=Z(g,Et(n))),h=ut(g.length,h),u[f]=!a&&(n||s>=120&&g.length>=120)?new Ce(f&&g):i}g=t[0];var b=-1,y=u[0];t:for(;++b<s&&v.length<h;){var k=g[b],C=n?n(k):k;if(k=a||k!==0?k:0,!(y?dn(y,C):r(v,C,a))){for(f=d;--f;){var O=u[f];if(!(O?dn(O,C):r(t[f],C,a)))continue t}y&&y.push(C),v.push(k)}}return v}function Dc(t,n,a,r){return Xt(t,function(s,d,f){n(r,a(s),d,f)}),r}function _n(t,n,a){n=be(n,t),t=Yo(t,n);var r=t==null?t:t[Qt(Dt(n))];return r==null?i:kt(r,t,a)}function so(t){return j(t)&&_t(t)==De}function Nc(t){return j(t)&&_t(t)==ln}function Fc(t){return j(t)&&_t(t)==nn}function vn(t,n,a,r,s){return t===n?!0:t==null||n==null||!j(t)&&!j(n)?t!==t&&n!==n:Uc(t,n,a,r,vn,s)}function Uc(t,n,a,r,s,d){var f=L(t),u=L(n),h=f?Cn:pt(t),v=u?Cn:pt(n);h=h==De?ne:h,v=v==De?ne:v;var g=h==ne,b=v==ne,y=h==v;if(y&&ye(t)){if(!ye(n))return!1;f=!0,g=!1}if(y&&!g)return d||(d=new Vt),f||Je(t)?Wo(t,n,a,r,s,d):pu(t,n,h,a,r,s,d);if(!(a&qt)){var k=g&&K.call(t,"__wrapped__"),C=b&&K.call(n,"__wrapped__");if(k||C){var O=k?t.value():t,B=C?n.value():n;return d||(d=new Vt),s(O,B,a,r,d)}}return y?(d||(d=new Vt),hu(t,n,a,r,s,d)):!1}function Wc(t){return j(t)&&pt(t)==Ft}function si(t,n,a,r){var s=a.length,d=s,f=!r;if(t==null)return!d;for(t=H(t);s--;){var u=a[s];if(f&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++s<d;){u=a[s];var h=u[0],v=t[h],g=u[1];if(f&&u[2]){if(v===i&&!(h in t))return!1}else{var b=new Vt;if(r)var y=r(v,g,h,t,n,b);if(!(y===i?vn(g,v,qt|ue,r,b):y))return!1}}return!0}function lo(t){if(!X(t)||Iu(t))return!1;var n=de(t)?Wf:$d;return n.test(Le(t))}function Vc(t){return j(t)&&_t(t)==rn}function zc(t){return j(t)&&pt(t)==Ut}function Kc(t){return j(t)&&wa(t.length)&&!!Y[_t(t)]}function fo(t){return typeof t=="function"?t:t==null?It:typeof t=="object"?L(t)?po(t[0],t[1]):uo(t):Ts(t)}function li(t){if(!xn(t))return qf(t);var n=[];for(var a in H(t))K.call(t,a)&&a!="constructor"&&n.push(a);return n}function Hc(t){if(!X(t))return Cu(t);var n=xn(t),a=[];for(var r in t)r=="constructor"&&(n||!K.call(t,r))||a.push(r);return a}function di(t,n){return t<n}function co(t,n){var a=-1,r=xt(t)?w(t.length):[];return ve(t,function(s,d,f){r[++a]=n(s,d,f)}),r}function uo(t){var n=ki(t);return n.length==1&&n[0][2]?Go(n[0][0],n[0][1]):function(a){return a===t||si(a,t,n)}}function po(t,n){return Si(t)&&Ho(n)?Go(Qt(t),n):function(a){var r=Pi(a,t);return r===i&&r===n?Di(a,t):vn(n,r,qt|ue)}}function ta(t,n,a,r,s){t!==n&&ai(n,function(d,f){if(s||(s=new Vt),X(d))Gc(t,n,f,a,ta,r,s);else{var u=r?r(Bi(t,f),d,f+"",t,n,s):i;u===i&&(u=d),ei(t,f,u)}},yt)}function Gc(t,n,a,r,s,d,f){var u=Bi(t,a),h=Bi(n,a),v=f.get(h);if(v){ei(t,a,v);return}var g=d?d(u,h,a+"",t,n,f):i,b=g===i;if(b){var y=L(h),k=!y&&ye(h),C=!y&&!k&&Je(h);g=h,y||k||C?L(u)?g=u:tt(u)?g=bt(u):k?(b=!1,g=Eo(h,!0)):C?(b=!1,g=So(h,!0)):g=[]:In(h)||Te(h)?(g=u,Te(u)?g=ys(u):(!X(u)||de(u))&&(g=Ko(h))):b=!1}b&&(f.set(h,g),s(g,h,r,d,f),f.delete(h)),ei(t,a,g)}function ho(t,n){var a=t.length;if(!!a)return n+=n<0?a:0,le(n,a)?t[n]:i}function mo(t,n,a){n.length?n=Z(n,function(d){return L(d)?function(f){return Ae(f,d.length===1?d[0]:d)}:d}):n=[It];var r=-1;n=Z(n,Et(S()));var s=co(t,function(d,f,u){var h=Z(n,function(v){return v(d)});return{criteria:h,index:++r,value:d}});return gf(s,function(d,f){return ru(d,f,a)})}function qc(t,n){return wo(t,n,function(a,r){return Di(t,r)})}function wo(t,n,a){for(var r=-1,s=n.length,d={};++r<s;){var f=n[r],u=Ae(t,f);a(u,f)&&gn(d,be(f,t),u)}return d}function Yc(t){return function(n){return Ae(n,t)}}function fi(t,n,a,r){var s=r?vf:Ue,d=-1,f=n.length,u=t;for(t===n&&(n=bt(n)),a&&(u=Z(t,Et(a)));++d<f;)for(var h=0,v=n[d],g=a?a(v):v;(h=s(u,g,h,r))>-1;)u!==t&&Kn.call(u,h,1),Kn.call(t,h,1);return t}function _o(t,n){for(var a=t?n.length:0,r=a-1;a--;){var s=n[a];if(a==r||s!==d){var d=s;le(s)?Kn.call(t,s,1):hi(t,s)}}return t}function ci(t,n){return t+qn(Xr()*(n-t+1))}function Zc(t,n,a,r){for(var s=-1,d=it(Gn((n-t)/(a||1)),0),f=w(d);d--;)f[r?d:++s]=t,t+=a;return f}function ui(t,n){var a="";if(!t||n<1||n>pe)return a;do n%2&&(a+=t),n=qn(n/2),n&&(t+=t);while(n);return a}function M(t,n){return Ai(qo(t,n,It),t+"")}function Xc(t){return jr(Qe(t))}function Jc(t,n){var a=Qe(t);return fa(a,Be(n,0,a.length))}function gn(t,n,a,r){if(!X(t))return t;n=be(n,t);for(var s=-1,d=n.length,f=d-1,u=t;u!=null&&++s<d;){var h=Qt(n[s]),v=a;if(h==="__proto__"||h==="constructor"||h==="prototype")return t;if(s!=f){var g=u[h];v=r?r(g,h,u):i,v===i&&(v=X(g)?g:le(n[s+1])?[]:{})}mn(u,h,v),u=u[h]}return t}var vo=Yn?function(t,n){return Yn.set(t,n),t}:It,Qc=Hn?function(t,n){return Hn(t,"toString",{configurable:!0,enumerable:!1,value:Fi(n),writable:!0})}:It;function jc(t){return fa(Qe(t))}function Pt(t,n,a){var r=-1,s=t.length;n<0&&(n=-n>s?0:s+n),a=a>s?s:a,a<0&&(a+=s),s=n>a?0:a-n>>>0,n>>>=0;for(var d=w(s);++r<s;)d[r]=t[r+n];return d}function tu(t,n){var a;return ve(t,function(r,s,d){return a=n(r,s,d),!a}),!!a}function ea(t,n,a){var r=0,s=t==null?r:t.length;if(typeof n=="number"&&n===n&&s<=ed){for(;r<s;){var d=r+s>>>1,f=t[d];f!==null&&!Ct(f)&&(a?f<=n:f<n)?r=d+1:s=d}return s}return pi(t,n,It,a)}function pi(t,n,a,r){var s=0,d=t==null?0:t.length;if(d===0)return 0;n=a(n);for(var f=n!==n,u=n===null,h=Ct(n),v=n===i;s<d;){var g=qn((s+d)/2),b=a(t[g]),y=b!==i,k=b===null,C=b===b,O=Ct(b);if(f)var B=r||C;else v?B=C&&(r||y):u?B=C&&y&&(r||!k):h?B=C&&y&&!k&&(r||!O):k||O?B=!1:B=r?b<=n:b<n;B?s=g+1:d=g}return ut(d,td)}function go(t,n){for(var a=-1,r=t.length,s=0,d=[];++a<r;){var f=t[a],u=n?n(f):f;if(!a||!zt(u,h)){var h=u;d[s++]=f===0?0:f}}return d}function bo(t){return typeof t=="number"?t:Ct(t)?Sn:+t}function St(t){if(typeof t=="string")return t;if(L(t))return Z(t,St)+"";if(Ct(t))return Jr?Jr.call(t):"";var n=t+"";return n=="0"&&1/t==-Ie?"-0":n}function ge(t,n,a){var r=-1,s=On,d=t.length,f=!0,u=[],h=u;if(a)f=!1,s=Va;else if(d>=m){var v=n?null:cu(t);if(v)return Pn(v);f=!1,s=dn,h=new Ce}else h=n?[]:u;t:for(;++r<d;){var g=t[r],b=n?n(g):g;if(g=a||g!==0?g:0,f&&b===b){for(var y=h.length;y--;)if(h[y]===b)continue t;n&&h.push(b),u.push(g)}else s(h,b,a)||(h!==u&&h.push(b),u.push(g))}return u}function hi(t,n){return n=be(n,t),t=Yo(t,n),t==null||delete t[Qt(Dt(n))]}function xo(t,n,a,r){return gn(t,n,a(Ae(t,n)),r)}function na(t,n,a,r){for(var s=t.length,d=r?s:-1;(r?d--:++d<s)&&n(t[d],d,t););return a?Pt(t,r?0:d,r?d+1:s):Pt(t,r?d+1:0,r?s:d)}function yo(t,n){var a=t;return a instanceof D&&(a=a.value()),za(n,function(r,s){return s.func.apply(s.thisArg,me([r],s.args))},a)}function mi(t,n,a){var r=t.length;if(r<2)return r?ge(t[0]):[];for(var s=-1,d=w(r);++s<r;)for(var f=t[s],u=-1;++u<r;)u!=s&&(d[s]=wn(d[s]||f,t[u],n,a));return ge(ft(d,1),n,a)}function Io(t,n,a){for(var r=-1,s=t.length,d=n.length,f={};++r<s;){var u=r<d?n[r]:i;a(f,t[r],u)}return f}function wi(t){return tt(t)?t:[]}function _i(t){return typeof t=="function"?t:It}function be(t,n){return L(t)?t:Si(t,n)?[t]:Qo(V(t))}var eu=M;function xe(t,n,a){var r=t.length;return a=a===i?r:a,!n&&a>=r?t:Pt(t,n,a)}var ko=Vf||function(t){return dt.clearTimeout(t)};function Eo(t,n){if(n)return t.slice();var a=t.length,r=Hr?Hr(a):new t.constructor(a);return t.copy(r),r}function vi(t){var n=new t.constructor(t.byteLength);return new Vn(n).set(new Vn(t)),n}function nu(t,n){var a=n?vi(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.byteLength)}function au(t){var n=new t.constructor(t.source,sr.exec(t));return n.lastIndex=t.lastIndex,n}function iu(t){return hn?H(hn.call(t)):{}}function So(t,n){var a=n?vi(t.buffer):t.buffer;return new t.constructor(a,t.byteOffset,t.length)}function Co(t,n){if(t!==n){var a=t!==i,r=t===null,s=t===t,d=Ct(t),f=n!==i,u=n===null,h=n===n,v=Ct(n);if(!u&&!v&&!d&&t>n||d&&f&&h&&!u&&!v||r&&f&&h||!a&&h||!s)return 1;if(!r&&!d&&!v&&t<n||v&&a&&s&&!r&&!d||u&&a&&s||!f&&s||!h)return-1}return 0}function ru(t,n,a){for(var r=-1,s=t.criteria,d=n.criteria,f=s.length,u=a.length;++r<f;){var h=Co(s[r],d[r]);if(h){if(r>=u)return h;var v=a[r];return h*(v=="desc"?-1:1)}}return t.index-n.index}function Bo(t,n,a,r){for(var s=-1,d=t.length,f=a.length,u=-1,h=n.length,v=it(d-f,0),g=w(h+v),b=!r;++u<h;)g[u]=n[u];for(;++s<f;)(b||s<d)&&(g[a[s]]=t[s]);for(;v--;)g[u++]=t[s++];return g}function Ao(t,n,a,r){for(var s=-1,d=t.length,f=-1,u=a.length,h=-1,v=n.length,g=it(d-u,0),b=w(g+v),y=!r;++s<g;)b[s]=t[s];for(var k=s;++h<v;)b[k+h]=n[h];for(;++f<u;)(y||s<d)&&(b[k+a[f]]=t[s++]);return b}function bt(t,n){var a=-1,r=t.length;for(n||(n=w(r));++a<r;)n[a]=t[a];return n}function Jt(t,n,a,r){var s=!a;a||(a={});for(var d=-1,f=n.length;++d<f;){var u=n[d],h=r?r(a[u],t[u],u,a,t):i;h===i&&(h=t[u]),s?re(a,u,h):mn(a,u,h)}return a}function ou(t,n){return Jt(t,Ei(t),n)}function su(t,n){return Jt(t,Vo(t),n)}function aa(t,n){return function(a,r){var s=L(a)?uf:Ac,d=n?n():{};return s(a,t,S(r,2),d)}}function Ye(t){return M(function(n,a){var r=-1,s=a.length,d=s>1?a[s-1]:i,f=s>2?a[2]:i;for(d=t.length>3&&typeof d=="function"?(s--,d):i,f&&vt(a[0],a[1],f)&&(d=s<3?i:d,s=1),n=H(n);++r<s;){var u=a[r];u&&t(n,u,r,d)}return n})}function $o(t,n){return function(a,r){if(a==null)return a;if(!xt(a))return t(a,r);for(var s=a.length,d=n?s:-1,f=H(a);(n?d--:++d<s)&&r(f[d],d,f)!==!1;);return a}}function Lo(t){return function(n,a,r){for(var s=-1,d=H(n),f=r(n),u=f.length;u--;){var h=f[t?u:++s];if(a(d[h],h,d)===!1)break}return n}}function lu(t,n,a){var r=n&st,s=bn(t);function d(){var f=this&&this!==dt&&this instanceof d?s:t;return f.apply(r?a:this,arguments)}return d}function To(t){return function(n){n=V(n);var a=We(n)?Wt(n):i,r=a?a[0]:n.charAt(0),s=a?xe(a,1).join(""):n.slice(1);return r[t]()+s}}function Ze(t){return function(n){return za($s(As(n).replace(Jd,"")),t,"")}}function bn(t){return function(){var n=arguments;switch(n.length){case 0:return new t;case 1:return new t(n[0]);case 2:return new t(n[0],n[1]);case 3:return new t(n[0],n[1],n[2]);case 4:return new t(n[0],n[1],n[2],n[3]);case 5:return new t(n[0],n[1],n[2],n[3],n[4]);case 6:return new t(n[0],n[1],n[2],n[3],n[4],n[5]);case 7:return new t(n[0],n[1],n[2],n[3],n[4],n[5],n[6])}var a=qe(t.prototype),r=t.apply(a,n);return X(r)?r:a}}function du(t,n,a){var r=bn(t);function s(){for(var d=arguments.length,f=w(d),u=d,h=Xe(s);u--;)f[u]=arguments[u];var v=d<3&&f[0]!==h&&f[d-1]!==h?[]:we(f,h);if(d-=v.length,d<a)return Do(t,n,ia,s.placeholder,i,f,v,i,i,a-d);var g=this&&this!==dt&&this instanceof s?r:t;return kt(g,this,f)}return s}function Ro(t){return function(n,a,r){var s=H(n);if(!xt(n)){var d=S(a,3);n=rt(n),a=function(u){return d(s[u],u,s)}}var f=t(n,a,r);return f>-1?s[d?n[f]:f]:i}}function Oo(t){return se(function(n){var a=n.length,r=a,s=Ot.prototype.thru;for(t&&n.reverse();r--;){var d=n[r];if(typeof d!="function")throw new Rt(E);if(s&&!f&&la(d)=="wrapper")var f=new Ot([],!0)}for(r=f?r:a;++r<a;){d=n[r];var u=la(d),h=u=="wrapper"?Ii(d):i;h&&Ci(h[0])&&h[1]==(ee|$t|Yt|tn)&&!h[4].length&&h[9]==1?f=f[la(h[0])].apply(f,h[3]):f=d.length==1&&Ci(d)?f[u]():f.thru(d)}return function(){var v=arguments,g=v[0];if(f&&v.length==1&&L(g))return f.plant(g).value();for(var b=0,y=a?n[b].apply(this,v):g;++b<a;)y=n[b].call(this,y);return y}})}function ia(t,n,a,r,s,d,f,u,h,v){var g=n&ee,b=n&st,y=n&te,k=n&($t|Me),C=n&Ia,O=y?i:bn(t);function B(){for(var P=arguments.length,N=w(P),Bt=P;Bt--;)N[Bt]=arguments[Bt];if(k)var gt=Xe(B),At=xf(N,gt);if(r&&(N=Bo(N,r,s,k)),d&&(N=Ao(N,d,f,k)),P-=At,k&&P<v){var et=we(N,gt);return Do(t,n,ia,B.placeholder,a,N,et,u,h,v-P)}var Kt=b?a:this,ce=y?Kt[t]:t;return P=N.length,u?N=Au(N,u):C&&P>1&&N.reverse(),g&&h<P&&(N.length=h),this&&this!==dt&&this instanceof B&&(ce=O||bn(ce)),ce.apply(Kt,N)}return B}function Mo(t,n){return function(a,r){return Dc(a,t,n(r),{})}}function ra(t,n){return function(a,r){var s;if(a===i&&r===i)return n;if(a!==i&&(s=a),r!==i){if(s===i)return r;typeof a=="string"||typeof r=="string"?(a=St(a),r=St(r)):(a=bo(a),r=bo(r)),s=t(a,r)}return s}}function gi(t){return se(function(n){return n=Z(n,Et(S())),M(function(a){var r=this;return t(n,function(s){return kt(s,r,a)})})})}function oa(t,n){n=n===i?" ":St(n);var a=n.length;if(a<2)return a?ui(n,t):n;var r=ui(n,Gn(t/Ve(n)));return We(n)?xe(Wt(r),0,t).join(""):r.slice(0,t)}function fu(t,n,a,r){var s=n&st,d=bn(t);function f(){for(var u=-1,h=arguments.length,v=-1,g=r.length,b=w(g+h),y=this&&this!==dt&&this instanceof f?d:t;++v<g;)b[v]=r[v];for(;h--;)b[v++]=arguments[++u];return kt(y,s?a:this,b)}return f}function Po(t){return function(n,a,r){return r&&typeof r!="number"&&vt(n,a,r)&&(a=r=i),n=fe(n),a===i?(a=n,n=0):a=fe(a),r=r===i?n<a?1:-1:fe(r),Zc(n,a,r,t)}}function sa(t){return function(n,a){return typeof n=="string"&&typeof a=="string"||(n=Nt(n),a=Nt(a)),t(n,a)}}function Do(t,n,a,r,s,d,f,u,h,v){var g=n&$t,b=g?f:i,y=g?i:f,k=g?d:i,C=g?i:d;n|=g?Yt:Pe,n&=~(g?Pe:Yt),n&lt||(n&=~(st|te));var O=[t,n,s,k,b,C,y,u,h,v],B=a.apply(i,O);return Ci(t)&&Zo(B,O),B.placeholder=r,Xo(B,t,n)}function bi(t){var n=at[t];return function(a,r){if(a=Nt(a),r=r==null?0:ut(R(r),292),r&&Zr(a)){var s=(V(a)+"e").split("e"),d=n(s[0]+"e"+(+s[1]+r));return s=(V(d)+"e").split("e"),+(s[0]+"e"+(+s[1]-r))}return n(a)}}var cu=He&&1/Pn(new He([,-0]))[1]==Ie?function(t){return new He(t)}:Vi;function No(t){return function(n){var a=pt(n);return a==Ft?Xa(n):a==Ut?Bf(n):bf(n,t(n))}}function oe(t,n,a,r,s,d,f,u){var h=n&te;if(!h&&typeof t!="function")throw new Rt(E);var v=r?r.length:0;if(v||(n&=~(Yt|Pe),r=s=i),f=f===i?f:it(R(f),0),u=u===i?u:R(u),v-=s?s.length:0,n&Pe){var g=r,b=s;r=s=i}var y=h?i:Ii(t),k=[t,n,a,r,s,g,b,d,f,u];if(y&&Su(k,y),t=k[0],n=k[1],a=k[2],r=k[3],s=k[4],u=k[9]=k[9]===i?h?0:t.length:it(k[9]-v,0),!u&&n&($t|Me)&&(n&=~($t|Me)),!n||n==st)var C=lu(t,n,a);else n==$t||n==Me?C=du(t,n,u):(n==Yt||n==(st|Yt))&&!s.length?C=fu(t,n,a,r):C=ia.apply(i,k);var O=y?vo:Zo;return Xo(O(C,k),t,n)}function Fo(t,n,a,r){return t===i||zt(t,Ke[a])&&!K.call(r,a)?n:t}function Uo(t,n,a,r,s,d){return X(t)&&X(n)&&(d.set(n,t),ta(t,n,i,Uo,d),d.delete(n)),t}function uu(t){return In(t)?i:t}function Wo(t,n,a,r,s,d){var f=a&qt,u=t.length,h=n.length;if(u!=h&&!(f&&h>u))return!1;var v=d.get(t),g=d.get(n);if(v&&g)return v==n&&g==t;var b=-1,y=!0,k=a&ue?new Ce:i;for(d.set(t,n),d.set(n,t);++b<u;){var C=t[b],O=n[b];if(r)var B=f?r(O,C,b,n,t,d):r(C,O,b,t,n,d);if(B!==i){if(B)continue;y=!1;break}if(k){if(!Ka(n,function(P,N){if(!dn(k,N)&&(C===P||s(C,P,a,r,d)))return k.push(N)})){y=!1;break}}else if(!(C===O||s(C,O,a,r,d))){y=!1;break}}return d.delete(t),d.delete(n),y}function pu(t,n,a,r,s,d,f){switch(a){case Ne:if(t.byteLength!=n.byteLength||t.byteOffset!=n.byteOffset)return!1;t=t.buffer,n=n.buffer;case ln:return!(t.byteLength!=n.byteLength||!d(new Vn(t),new Vn(n)));case en:case nn:case an:return zt(+t,+n);case Bn:return t.name==n.name&&t.message==n.message;case rn:case on:return t==n+"";case Ft:var u=Xa;case Ut:var h=r&qt;if(u||(u=Pn),t.size!=n.size&&!h)return!1;var v=f.get(t);if(v)return v==n;r|=ue,f.set(t,n);var g=Wo(u(t),u(n),r,s,d,f);return f.delete(t),g;case $n:if(hn)return hn.call(t)==hn.call(n)}return!1}function hu(t,n,a,r,s,d){var f=a&qt,u=xi(t),h=u.length,v=xi(n),g=v.length;if(h!=g&&!f)return!1;for(var b=h;b--;){var y=u[b];if(!(f?y in n:K.call(n,y)))return!1}var k=d.get(t),C=d.get(n);if(k&&C)return k==n&&C==t;var O=!0;d.set(t,n),d.set(n,t);for(var B=f;++b<h;){y=u[b];var P=t[y],N=n[y];if(r)var Bt=f?r(N,P,y,n,t,d):r(P,N,y,t,n,d);if(!(Bt===i?P===N||s(P,N,a,r,d):Bt)){O=!1;break}B||(B=y=="constructor")}if(O&&!B){var gt=t.constructor,At=n.constructor;gt!=At&&"constructor"in t&&"constructor"in n&&!(typeof gt=="function"&&gt instanceof gt&&typeof At=="function"&&At instanceof At)&&(O=!1)}return d.delete(t),d.delete(n),O}function se(t){return Ai(qo(t,i,ns),t+"")}function xi(t){return oo(t,rt,Ei)}function yi(t){return oo(t,yt,Vo)}var Ii=Yn?function(t){return Yn.get(t)}:Vi;function la(t){for(var n=t.name+"",a=Ge[n],r=K.call(Ge,n)?a.length:0;r--;){var s=a[r],d=s.func;if(d==null||d==t)return s.name}return n}function Xe(t){var n=K.call(l,"placeholder")?l:t;return n.placeholder}function S(){var t=l.iteratee||Ui;return t=t===Ui?fo:t,arguments.length?t(arguments[0],arguments[1]):t}function da(t,n){var a=t.__data__;return yu(n)?a[typeof n=="string"?"string":"hash"]:a.map}function ki(t){for(var n=rt(t),a=n.length;a--;){var r=n[a],s=t[r];n[a]=[r,s,Ho(s)]}return n}function $e(t,n){var a=Ef(t,n);return lo(a)?a:i}function mu(t){var n=K.call(t,Ee),a=t[Ee];try{t[Ee]=i;var r=!0}catch{}var s=Un.call(t);return r&&(n?t[Ee]=a:delete t[Ee]),s}var Ei=Qa?function(t){return t==null?[]:(t=H(t),he(Qa(t),function(n){return qr.call(t,n)}))}:zi,Vo=Qa?function(t){for(var n=[];t;)me(n,Ei(t)),t=zn(t);return n}:zi,pt=_t;(ja&&pt(new ja(new ArrayBuffer(1)))!=Ne||cn&&pt(new cn)!=Ft||ti&&pt(ti.resolve())!=ar||He&&pt(new He)!=Ut||un&&pt(new un)!=sn)&&(pt=function(t){var n=_t(t),a=n==ne?t.constructor:i,r=a?Le(a):"";if(r)switch(r){case Jf:return Ne;case Qf:return Ft;case jf:return ar;case tc:return Ut;case ec:return sn}return n});function wu(t,n,a){for(var r=-1,s=a.length;++r<s;){var d=a[r],f=d.size;switch(d.type){case"drop":t+=f;break;case"dropRight":n-=f;break;case"take":n=ut(n,t+f);break;case"takeRight":t=it(t,n-f);break}}return{start:t,end:n}}function _u(t){var n=t.match(yd);return n?n[1].split(Id):[]}function zo(t,n,a){n=be(n,t);for(var r=-1,s=n.length,d=!1;++r<s;){var f=Qt(n[r]);if(!(d=t!=null&&a(t,f)))break;t=t[f]}return d||++r!=s?d:(s=t==null?0:t.length,!!s&&wa(s)&&le(f,s)&&(L(t)||Te(t)))}function vu(t){var n=t.length,a=new t.constructor(n);return n&&typeof t[0]=="string"&&K.call(t,"index")&&(a.index=t.index,a.input=t.input),a}function Ko(t){return typeof t.constructor=="function"&&!xn(t)?qe(zn(t)):{}}function gu(t,n,a){var r=t.constructor;switch(n){case ln:return vi(t);case en:case nn:return new r(+t);case Ne:return nu(t,a);case ka:case Ea:case Sa:case Ca:case Ba:case Aa:case $a:case La:case Ta:return So(t,a);case Ft:return new r;case an:case on:return new r(t);case rn:return au(t);case Ut:return new r;case $n:return iu(t)}}function bu(t,n){var a=n.length;if(!a)return t;var r=a-1;return n[r]=(a>1?"& ":"")+n[r],n=n.join(a>2?", ":" "),t.replace(xd,`{
/* [wrapped with `+n+`] */
`)}function xu(t){return L(t)||Te(t)||!!(Yr&&t&&t[Yr])}function le(t,n){var a=typeof t;return n=n==null?pe:n,!!n&&(a=="number"||a!="symbol"&&Td.test(t))&&t>-1&&t%1==0&&t<n}function vt(t,n,a){if(!X(a))return!1;var r=typeof n;return(r=="number"?xt(a)&&le(n,a.length):r=="string"&&n in a)?zt(a[n],t):!1}function Si(t,n){if(L(t))return!1;var a=typeof t;return a=="number"||a=="symbol"||a=="boolean"||t==null||Ct(t)?!0:_d.test(t)||!wd.test(t)||n!=null&&t in H(n)}function yu(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}function Ci(t){var n=la(t),a=l[n];if(typeof a!="function"||!(n in D.prototype))return!1;if(t===a)return!0;var r=Ii(a);return!!r&&t===r[0]}function Iu(t){return!!Kr&&Kr in t}var ku=Nn?de:Ki;function xn(t){var n=t&&t.constructor,a=typeof n=="function"&&n.prototype||Ke;return t===a}function Ho(t){return t===t&&!X(t)}function Go(t,n){return function(a){return a==null?!1:a[t]===n&&(n!==i||t in H(a))}}function Eu(t){var n=ha(t,function(r){return a.size===z&&a.clear(),r}),a=n.cache;return n}function Su(t,n){var a=t[1],r=n[1],s=a|r,d=s<(st|te|ee),f=r==ee&&a==$t||r==ee&&a==tn&&t[7].length<=n[8]||r==(ee|tn)&&n[7].length<=n[8]&&a==$t;if(!(d||f))return t;r&st&&(t[2]=n[2],s|=a&st?0:lt);var u=n[3];if(u){var h=t[3];t[3]=h?Bo(h,u,n[4]):u,t[4]=h?we(t[3],G):n[4]}return u=n[5],u&&(h=t[5],t[5]=h?Ao(h,u,n[6]):u,t[6]=h?we(t[5],G):n[6]),u=n[7],u&&(t[7]=u),r&ee&&(t[8]=t[8]==null?n[8]:ut(t[8],n[8])),t[9]==null&&(t[9]=n[9]),t[0]=n[0],t[1]=s,t}function Cu(t){var n=[];if(t!=null)for(var a in H(t))n.push(a);return n}function Bu(t){return Un.call(t)}function qo(t,n,a){return n=it(n===i?t.length-1:n,0),function(){for(var r=arguments,s=-1,d=it(r.length-n,0),f=w(d);++s<d;)f[s]=r[n+s];s=-1;for(var u=w(n+1);++s<n;)u[s]=r[s];return u[n]=a(f),kt(t,this,u)}}function Yo(t,n){return n.length<2?t:Ae(t,Pt(n,0,-1))}function Au(t,n){for(var a=t.length,r=ut(n.length,a),s=bt(t);r--;){var d=n[r];t[r]=le(d,a)?s[d]:i}return t}function Bi(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}var Zo=Jo(vo),yn=Kf||function(t,n){return dt.setTimeout(t,n)},Ai=Jo(Qc);function Xo(t,n,a){var r=n+"";return Ai(t,bu(r,$u(_u(r),a)))}function Jo(t){var n=0,a=0;return function(){var r=Yf(),s=Xl-(r-a);if(a=r,s>0){if(++n>=Zl)return arguments[0]}else n=0;return t.apply(i,arguments)}}function fa(t,n){var a=-1,r=t.length,s=r-1;for(n=n===i?r:n;++a<n;){var d=ci(a,s),f=t[d];t[d]=t[a],t[a]=f}return t.length=n,t}var Qo=Eu(function(t){var n=[];return t.charCodeAt(0)===46&&n.push(""),t.replace(vd,function(a,r,s,d){n.push(s?d.replace(Sd,"$1"):r||a)}),n});function Qt(t){if(typeof t=="string"||Ct(t))return t;var n=t+"";return n=="0"&&1/t==-Ie?"-0":n}function Le(t){if(t!=null){try{return Fn.call(t)}catch{}try{return t+""}catch{}}return""}function $u(t,n){return Tt(nd,function(a){var r="_."+a[0];n&a[1]&&!On(t,r)&&t.push(r)}),t.sort()}function jo(t){if(t instanceof D)return t.clone();var n=new Ot(t.__wrapped__,t.__chain__);return n.__actions__=bt(t.__actions__),n.__index__=t.__index__,n.__values__=t.__values__,n}function Lu(t,n,a){(a?vt(t,n,a):n===i)?n=1:n=it(R(n),0);var r=t==null?0:t.length;if(!r||n<1)return[];for(var s=0,d=0,f=w(Gn(r/n));s<r;)f[d++]=Pt(t,s,s+=n);return f}function Tu(t){for(var n=-1,a=t==null?0:t.length,r=0,s=[];++n<a;){var d=t[n];d&&(s[r++]=d)}return s}function Ru(){var t=arguments.length;if(!t)return[];for(var n=w(t-1),a=arguments[0],r=t;r--;)n[r-1]=arguments[r];return me(L(a)?bt(a):[a],ft(n,1))}var Ou=M(function(t,n){return tt(t)?wn(t,ft(n,1,tt,!0)):[]}),Mu=M(function(t,n){var a=Dt(n);return tt(a)&&(a=i),tt(t)?wn(t,ft(n,1,tt,!0),S(a,2)):[]}),Pu=M(function(t,n){var a=Dt(n);return tt(a)&&(a=i),tt(t)?wn(t,ft(n,1,tt,!0),i,a):[]});function Du(t,n,a){var r=t==null?0:t.length;return r?(n=a||n===i?1:R(n),Pt(t,n<0?0:n,r)):[]}function Nu(t,n,a){var r=t==null?0:t.length;return r?(n=a||n===i?1:R(n),n=r-n,Pt(t,0,n<0?0:n)):[]}function Fu(t,n){return t&&t.length?na(t,S(n,3),!0,!0):[]}function Uu(t,n){return t&&t.length?na(t,S(n,3),!0):[]}function Wu(t,n,a,r){var s=t==null?0:t.length;return s?(a&&typeof a!="number"&&vt(t,n,a)&&(a=0,r=s),Rc(t,n,a,r)):[]}function ts(t,n,a){var r=t==null?0:t.length;if(!r)return-1;var s=a==null?0:R(a);return s<0&&(s=it(r+s,0)),Mn(t,S(n,3),s)}function es(t,n,a){var r=t==null?0:t.length;if(!r)return-1;var s=r-1;return a!==i&&(s=R(a),s=a<0?it(r+s,0):ut(s,r-1)),Mn(t,S(n,3),s,!0)}function ns(t){var n=t==null?0:t.length;return n?ft(t,1):[]}function Vu(t){var n=t==null?0:t.length;return n?ft(t,Ie):[]}function zu(t,n){var a=t==null?0:t.length;return a?(n=n===i?1:R(n),ft(t,n)):[]}function Ku(t){for(var n=-1,a=t==null?0:t.length,r={};++n<a;){var s=t[n];r[s[0]]=s[1]}return r}function as(t){return t&&t.length?t[0]:i}function Hu(t,n,a){var r=t==null?0:t.length;if(!r)return-1;var s=a==null?0:R(a);return s<0&&(s=it(r+s,0)),Ue(t,n,s)}function Gu(t){var n=t==null?0:t.length;return n?Pt(t,0,-1):[]}var qu=M(function(t){var n=Z(t,wi);return n.length&&n[0]===t[0]?oi(n):[]}),Yu=M(function(t){var n=Dt(t),a=Z(t,wi);return n===Dt(a)?n=i:a.pop(),a.length&&a[0]===t[0]?oi(a,S(n,2)):[]}),Zu=M(function(t){var n=Dt(t),a=Z(t,wi);return n=typeof n=="function"?n:i,n&&a.pop(),a.length&&a[0]===t[0]?oi(a,i,n):[]});function Xu(t,n){return t==null?"":Gf.call(t,n)}function Dt(t){var n=t==null?0:t.length;return n?t[n-1]:i}function Ju(t,n,a){var r=t==null?0:t.length;if(!r)return-1;var s=r;return a!==i&&(s=R(a),s=s<0?it(r+s,0):ut(s,r-1)),n===n?$f(t,n,s):Mn(t,Pr,s,!0)}function Qu(t,n){return t&&t.length?ho(t,R(n)):i}var ju=M(is);function is(t,n){return t&&t.length&&n&&n.length?fi(t,n):t}function tp(t,n,a){return t&&t.length&&n&&n.length?fi(t,n,S(a,2)):t}function ep(t,n,a){return t&&t.length&&n&&n.length?fi(t,n,i,a):t}var np=se(function(t,n){var a=t==null?0:t.length,r=ni(t,n);return _o(t,Z(n,function(s){return le(s,a)?+s:s}).sort(Co)),r});function ap(t,n){var a=[];if(!(t&&t.length))return a;var r=-1,s=[],d=t.length;for(n=S(n,3);++r<d;){var f=t[r];n(f,r,t)&&(a.push(f),s.push(r))}return _o(t,s),a}function $i(t){return t==null?t:Xf.call(t)}function ip(t,n,a){var r=t==null?0:t.length;return r?(a&&typeof a!="number"&&vt(t,n,a)?(n=0,a=r):(n=n==null?0:R(n),a=a===i?r:R(a)),Pt(t,n,a)):[]}function rp(t,n){return ea(t,n)}function op(t,n,a){return pi(t,n,S(a,2))}function sp(t,n){var a=t==null?0:t.length;if(a){var r=ea(t,n);if(r<a&&zt(t[r],n))return r}return-1}function lp(t,n){return ea(t,n,!0)}function dp(t,n,a){return pi(t,n,S(a,2),!0)}function fp(t,n){var a=t==null?0:t.length;if(a){var r=ea(t,n,!0)-1;if(zt(t[r],n))return r}return-1}function cp(t){return t&&t.length?go(t):[]}function up(t,n){return t&&t.length?go(t,S(n,2)):[]}function pp(t){var n=t==null?0:t.length;return n?Pt(t,1,n):[]}function hp(t,n,a){return t&&t.length?(n=a||n===i?1:R(n),Pt(t,0,n<0?0:n)):[]}function mp(t,n,a){var r=t==null?0:t.length;return r?(n=a||n===i?1:R(n),n=r-n,Pt(t,n<0?0:n,r)):[]}function wp(t,n){return t&&t.length?na(t,S(n,3),!1,!0):[]}function _p(t,n){return t&&t.length?na(t,S(n,3)):[]}var vp=M(function(t){return ge(ft(t,1,tt,!0))}),gp=M(function(t){var n=Dt(t);return tt(n)&&(n=i),ge(ft(t,1,tt,!0),S(n,2))}),bp=M(function(t){var n=Dt(t);return n=typeof n=="function"?n:i,ge(ft(t,1,tt,!0),i,n)});function xp(t){return t&&t.length?ge(t):[]}function yp(t,n){return t&&t.length?ge(t,S(n,2)):[]}function Ip(t,n){return n=typeof n=="function"?n:i,t&&t.length?ge(t,i,n):[]}function Li(t){if(!(t&&t.length))return[];var n=0;return t=he(t,function(a){if(tt(a))return n=it(a.length,n),!0}),Ya(n,function(a){return Z(t,Ha(a))})}function rs(t,n){if(!(t&&t.length))return[];var a=Li(t);return n==null?a:Z(a,function(r){return kt(n,i,r)})}var kp=M(function(t,n){return tt(t)?wn(t,n):[]}),Ep=M(function(t){return mi(he(t,tt))}),Sp=M(function(t){var n=Dt(t);return tt(n)&&(n=i),mi(he(t,tt),S(n,2))}),Cp=M(function(t){var n=Dt(t);return n=typeof n=="function"?n:i,mi(he(t,tt),i,n)}),Bp=M(Li);function Ap(t,n){return Io(t||[],n||[],mn)}function $p(t,n){return Io(t||[],n||[],gn)}var Lp=M(function(t){var n=t.length,a=n>1?t[n-1]:i;return a=typeof a=="function"?(t.pop(),a):i,rs(t,a)});function os(t){var n=l(t);return n.__chain__=!0,n}function Tp(t,n){return n(t),t}function ca(t,n){return n(t)}var Rp=se(function(t){var n=t.length,a=n?t[0]:0,r=this.__wrapped__,s=function(d){return ni(d,t)};return n>1||this.__actions__.length||!(r instanceof D)||!le(a)?this.thru(s):(r=r.slice(a,+a+(n?1:0)),r.__actions__.push({func:ca,args:[s],thisArg:i}),new Ot(r,this.__chain__).thru(function(d){return n&&!d.length&&d.push(i),d}))});function Op(){return os(this)}function Mp(){return new Ot(this.value(),this.__chain__)}function Pp(){this.__values__===i&&(this.__values__=bs(this.value()));var t=this.__index__>=this.__values__.length,n=t?i:this.__values__[this.__index__++];return{done:t,value:n}}function Dp(){return this}function Np(t){for(var n,a=this;a instanceof Xn;){var r=jo(a);r.__index__=0,r.__values__=i,n?s.__wrapped__=r:n=r;var s=r;a=a.__wrapped__}return s.__wrapped__=t,n}function Fp(){var t=this.__wrapped__;if(t instanceof D){var n=t;return this.__actions__.length&&(n=new D(this)),n=n.reverse(),n.__actions__.push({func:ca,args:[$i],thisArg:i}),new Ot(n,this.__chain__)}return this.thru($i)}function Up(){return yo(this.__wrapped__,this.__actions__)}var Wp=aa(function(t,n,a){K.call(t,a)?++t[a]:re(t,a,1)});function Vp(t,n,a){var r=L(t)?Or:Tc;return a&&vt(t,n,a)&&(n=i),r(t,S(n,3))}function zp(t,n){var a=L(t)?he:io;return a(t,S(n,3))}var Kp=Ro(ts),Hp=Ro(es);function Gp(t,n){return ft(ua(t,n),1)}function qp(t,n){return ft(ua(t,n),Ie)}function Yp(t,n,a){return a=a===i?1:R(a),ft(ua(t,n),a)}function ss(t,n){var a=L(t)?Tt:ve;return a(t,S(n,3))}function ls(t,n){var a=L(t)?pf:ao;return a(t,S(n,3))}var Zp=aa(function(t,n,a){K.call(t,a)?t[a].push(n):re(t,a,[n])});function Xp(t,n,a,r){t=xt(t)?t:Qe(t),a=a&&!r?R(a):0;var s=t.length;return a<0&&(a=it(s+a,0)),_a(t)?a<=s&&t.indexOf(n,a)>-1:!!s&&Ue(t,n,a)>-1}var Jp=M(function(t,n,a){var r=-1,s=typeof n=="function",d=xt(t)?w(t.length):[];return ve(t,function(f){d[++r]=s?kt(n,f,a):_n(f,n,a)}),d}),Qp=aa(function(t,n,a){re(t,a,n)});function ua(t,n){var a=L(t)?Z:co;return a(t,S(n,3))}function jp(t,n,a,r){return t==null?[]:(L(n)||(n=n==null?[]:[n]),a=r?i:a,L(a)||(a=a==null?[]:[a]),mo(t,n,a))}var th=aa(function(t,n,a){t[a?0:1].push(n)},function(){return[[],[]]});function eh(t,n,a){var r=L(t)?za:Nr,s=arguments.length<3;return r(t,S(n,4),a,s,ve)}function nh(t,n,a){var r=L(t)?hf:Nr,s=arguments.length<3;return r(t,S(n,4),a,s,ao)}function ah(t,n){var a=L(t)?he:io;return a(t,ma(S(n,3)))}function ih(t){var n=L(t)?jr:Xc;return n(t)}function rh(t,n,a){(a?vt(t,n,a):n===i)?n=1:n=R(n);var r=L(t)?Cc:Jc;return r(t,n)}function oh(t){var n=L(t)?Bc:jc;return n(t)}function sh(t){if(t==null)return 0;if(xt(t))return _a(t)?Ve(t):t.length;var n=pt(t);return n==Ft||n==Ut?t.size:li(t).length}function lh(t,n,a){var r=L(t)?Ka:tu;return a&&vt(t,n,a)&&(n=i),r(t,S(n,3))}var dh=M(function(t,n){if(t==null)return[];var a=n.length;return a>1&&vt(t,n[0],n[1])?n=[]:a>2&&vt(n[0],n[1],n[2])&&(n=[n[0]]),mo(t,ft(n,1),[])}),pa=zf||function(){return dt.Date.now()};function fh(t,n){if(typeof n!="function")throw new Rt(E);return t=R(t),function(){if(--t<1)return n.apply(this,arguments)}}function ds(t,n,a){return n=a?i:n,n=t&&n==null?t.length:n,oe(t,ee,i,i,i,i,n)}function fs(t,n){var a;if(typeof n!="function")throw new Rt(E);return t=R(t),function(){return--t>0&&(a=n.apply(this,arguments)),t<=1&&(n=i),a}}var Ti=M(function(t,n,a){var r=st;if(a.length){var s=we(a,Xe(Ti));r|=Yt}return oe(t,r,n,a,s)}),cs=M(function(t,n,a){var r=st|te;if(a.length){var s=we(a,Xe(cs));r|=Yt}return oe(n,r,t,a,s)});function us(t,n,a){n=a?i:n;var r=oe(t,$t,i,i,i,i,i,n);return r.placeholder=us.placeholder,r}function ps(t,n,a){n=a?i:n;var r=oe(t,Me,i,i,i,i,i,n);return r.placeholder=ps.placeholder,r}function hs(t,n,a){var r,s,d,f,u,h,v=0,g=!1,b=!1,y=!0;if(typeof t!="function")throw new Rt(E);n=Nt(n)||0,X(a)&&(g=!!a.leading,b="maxWait"in a,d=b?it(Nt(a.maxWait)||0,n):d,y="trailing"in a?!!a.trailing:y);function k(et){var Kt=r,ce=s;return r=s=i,v=et,f=t.apply(ce,Kt),f}function C(et){return v=et,u=yn(P,n),g?k(et):f}function O(et){var Kt=et-h,ce=et-v,Rs=n-Kt;return b?ut(Rs,d-ce):Rs}function B(et){var Kt=et-h,ce=et-v;return h===i||Kt>=n||Kt<0||b&&ce>=d}function P(){var et=pa();if(B(et))return N(et);u=yn(P,O(et))}function N(et){return u=i,y&&r?k(et):(r=s=i,f)}function Bt(){u!==i&&ko(u),v=0,r=h=s=u=i}function gt(){return u===i?f:N(pa())}function At(){var et=pa(),Kt=B(et);if(r=arguments,s=this,h=et,Kt){if(u===i)return C(h);if(b)return ko(u),u=yn(P,n),k(h)}return u===i&&(u=yn(P,n)),f}return At.cancel=Bt,At.flush=gt,At}var ch=M(function(t,n){return no(t,1,n)}),uh=M(function(t,n,a){return no(t,Nt(n)||0,a)});function ph(t){return oe(t,Ia)}function ha(t,n){if(typeof t!="function"||n!=null&&typeof n!="function")throw new Rt(E);var a=function(){var r=arguments,s=n?n.apply(this,r):r[0],d=a.cache;if(d.has(s))return d.get(s);var f=t.apply(this,r);return a.cache=d.set(s,f)||d,f};return a.cache=new(ha.Cache||ie),a}ha.Cache=ie;function ma(t){if(typeof t!="function")throw new Rt(E);return function(){var n=arguments;switch(n.length){case 0:return!t.call(this);case 1:return!t.call(this,n[0]);case 2:return!t.call(this,n[0],n[1]);case 3:return!t.call(this,n[0],n[1],n[2])}return!t.apply(this,n)}}function hh(t){return fs(2,t)}var mh=eu(function(t,n){n=n.length==1&&L(n[0])?Z(n[0],Et(S())):Z(ft(n,1),Et(S()));var a=n.length;return M(function(r){for(var s=-1,d=ut(r.length,a);++s<d;)r[s]=n[s].call(this,r[s]);return kt(t,this,r)})}),Ri=M(function(t,n){var a=we(n,Xe(Ri));return oe(t,Yt,i,n,a)}),ms=M(function(t,n){var a=we(n,Xe(ms));return oe(t,Pe,i,n,a)}),wh=se(function(t,n){return oe(t,tn,i,i,i,n)});function _h(t,n){if(typeof t!="function")throw new Rt(E);return n=n===i?n:R(n),M(t,n)}function vh(t,n){if(typeof t!="function")throw new Rt(E);return n=n==null?0:it(R(n),0),M(function(a){var r=a[n],s=xe(a,0,n);return r&&me(s,r),kt(t,this,s)})}function gh(t,n,a){var r=!0,s=!0;if(typeof t!="function")throw new Rt(E);return X(a)&&(r="leading"in a?!!a.leading:r,s="trailing"in a?!!a.trailing:s),hs(t,n,{leading:r,maxWait:n,trailing:s})}function bh(t){return ds(t,1)}function xh(t,n){return Ri(_i(n),t)}function yh(){if(!arguments.length)return[];var t=arguments[0];return L(t)?t:[t]}function Ih(t){return Mt(t,ot)}function kh(t,n){return n=typeof n=="function"?n:i,Mt(t,ot,n)}function Eh(t){return Mt(t,Q|ot)}function Sh(t,n){return n=typeof n=="function"?n:i,Mt(t,Q|ot,n)}function Ch(t,n){return n==null||eo(t,n,rt(n))}function zt(t,n){return t===n||t!==t&&n!==n}var Bh=sa(ri),Ah=sa(function(t,n){return t>=n}),Te=so(function(){return arguments}())?so:function(t){return j(t)&&K.call(t,"callee")&&!qr.call(t,"callee")},L=w.isArray,$h=Br?Et(Br):Nc;function xt(t){return t!=null&&wa(t.length)&&!de(t)}function tt(t){return j(t)&&xt(t)}function Lh(t){return t===!0||t===!1||j(t)&&_t(t)==en}var ye=Hf||Ki,Th=Ar?Et(Ar):Fc;function Rh(t){return j(t)&&t.nodeType===1&&!In(t)}function Oh(t){if(t==null)return!0;if(xt(t)&&(L(t)||typeof t=="string"||typeof t.splice=="function"||ye(t)||Je(t)||Te(t)))return!t.length;var n=pt(t);if(n==Ft||n==Ut)return!t.size;if(xn(t))return!li(t).length;for(var a in t)if(K.call(t,a))return!1;return!0}function Mh(t,n){return vn(t,n)}function Ph(t,n,a){a=typeof a=="function"?a:i;var r=a?a(t,n):i;return r===i?vn(t,n,i,a):!!r}function Oi(t){if(!j(t))return!1;var n=_t(t);return n==Bn||n==id||typeof t.message=="string"&&typeof t.name=="string"&&!In(t)}function Dh(t){return typeof t=="number"&&Zr(t)}function de(t){if(!X(t))return!1;var n=_t(t);return n==An||n==nr||n==ad||n==od}function ws(t){return typeof t=="number"&&t==R(t)}function wa(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=pe}function X(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}function j(t){return t!=null&&typeof t=="object"}var _s=$r?Et($r):Wc;function Nh(t,n){return t===n||si(t,n,ki(n))}function Fh(t,n,a){return a=typeof a=="function"?a:i,si(t,n,ki(n),a)}function Uh(t){return vs(t)&&t!=+t}function Wh(t){if(ku(t))throw new $(x);return lo(t)}function Vh(t){return t===null}function zh(t){return t==null}function vs(t){return typeof t=="number"||j(t)&&_t(t)==an}function In(t){if(!j(t)||_t(t)!=ne)return!1;var n=zn(t);if(n===null)return!0;var a=K.call(n,"constructor")&&n.constructor;return typeof a=="function"&&a instanceof a&&Fn.call(a)==Ff}var Mi=Lr?Et(Lr):Vc;function Kh(t){return ws(t)&&t>=-pe&&t<=pe}var gs=Tr?Et(Tr):zc;function _a(t){return typeof t=="string"||!L(t)&&j(t)&&_t(t)==on}function Ct(t){return typeof t=="symbol"||j(t)&&_t(t)==$n}var Je=Rr?Et(Rr):Kc;function Hh(t){return t===i}function Gh(t){return j(t)&&pt(t)==sn}function qh(t){return j(t)&&_t(t)==ld}var Yh=sa(di),Zh=sa(function(t,n){return t<=n});function bs(t){if(!t)return[];if(xt(t))return _a(t)?Wt(t):bt(t);if(fn&&t[fn])return Cf(t[fn]());var n=pt(t),a=n==Ft?Xa:n==Ut?Pn:Qe;return a(t)}function fe(t){if(!t)return t===0?t:0;if(t=Nt(t),t===Ie||t===-Ie){var n=t<0?-1:1;return n*jl}return t===t?t:0}function R(t){var n=fe(t),a=n%1;return n===n?a?n-a:n:0}function xs(t){return t?Be(R(t),0,Zt):0}function Nt(t){if(typeof t=="number")return t;if(Ct(t))return Sn;if(X(t)){var n=typeof t.valueOf=="function"?t.valueOf():t;t=X(n)?n+"":n}if(typeof t!="string")return t===0?t:+t;t=Fr(t);var a=Ad.test(t);return a||Ld.test(t)?ff(t.slice(2),a?2:8):Bd.test(t)?Sn:+t}function ys(t){return Jt(t,yt(t))}function Xh(t){return t?Be(R(t),-pe,pe):t===0?t:0}function V(t){return t==null?"":St(t)}var Jh=Ye(function(t,n){if(xn(n)||xt(n)){Jt(n,rt(n),t);return}for(var a in n)K.call(n,a)&&mn(t,a,n[a])}),Is=Ye(function(t,n){Jt(n,yt(n),t)}),va=Ye(function(t,n,a,r){Jt(n,yt(n),t,r)}),Qh=Ye(function(t,n,a,r){Jt(n,rt(n),t,r)}),jh=se(ni);function tm(t,n){var a=qe(t);return n==null?a:to(a,n)}var em=M(function(t,n){t=H(t);var a=-1,r=n.length,s=r>2?n[2]:i;for(s&&vt(n[0],n[1],s)&&(r=1);++a<r;)for(var d=n[a],f=yt(d),u=-1,h=f.length;++u<h;){var v=f[u],g=t[v];(g===i||zt(g,Ke[v])&&!K.call(t,v))&&(t[v]=d[v])}return t}),nm=M(function(t){return t.push(i,Uo),kt(ks,i,t)});function am(t,n){return Mr(t,S(n,3),Xt)}function im(t,n){return Mr(t,S(n,3),ii)}function rm(t,n){return t==null?t:ai(t,S(n,3),yt)}function om(t,n){return t==null?t:ro(t,S(n,3),yt)}function sm(t,n){return t&&Xt(t,S(n,3))}function lm(t,n){return t&&ii(t,S(n,3))}function dm(t){return t==null?[]:jn(t,rt(t))}function fm(t){return t==null?[]:jn(t,yt(t))}function Pi(t,n,a){var r=t==null?i:Ae(t,n);return r===i?a:r}function cm(t,n){return t!=null&&zo(t,n,Oc)}function Di(t,n){return t!=null&&zo(t,n,Mc)}var um=Mo(function(t,n,a){n!=null&&typeof n.toString!="function"&&(n=Un.call(n)),t[n]=a},Fi(It)),pm=Mo(function(t,n,a){n!=null&&typeof n.toString!="function"&&(n=Un.call(n)),K.call(t,n)?t[n].push(a):t[n]=[a]},S),hm=M(_n);function rt(t){return xt(t)?Qr(t):li(t)}function yt(t){return xt(t)?Qr(t,!0):Hc(t)}function mm(t,n){var a={};return n=S(n,3),Xt(t,function(r,s,d){re(a,n(r,s,d),r)}),a}function wm(t,n){var a={};return n=S(n,3),Xt(t,function(r,s,d){re(a,s,n(r,s,d))}),a}var _m=Ye(function(t,n,a){ta(t,n,a)}),ks=Ye(function(t,n,a,r){ta(t,n,a,r)}),vm=se(function(t,n){var a={};if(t==null)return a;var r=!1;n=Z(n,function(d){return d=be(d,t),r||(r=d.length>1),d}),Jt(t,yi(t),a),r&&(a=Mt(a,Q|ct|ot,uu));for(var s=n.length;s--;)hi(a,n[s]);return a});function gm(t,n){return Es(t,ma(S(n)))}var bm=se(function(t,n){return t==null?{}:qc(t,n)});function Es(t,n){if(t==null)return{};var a=Z(yi(t),function(r){return[r]});return n=S(n),wo(t,a,function(r,s){return n(r,s[0])})}function xm(t,n,a){n=be(n,t);var r=-1,s=n.length;for(s||(s=1,t=i);++r<s;){var d=t==null?i:t[Qt(n[r])];d===i&&(r=s,d=a),t=de(d)?d.call(t):d}return t}function ym(t,n,a){return t==null?t:gn(t,n,a)}function Im(t,n,a,r){return r=typeof r=="function"?r:i,t==null?t:gn(t,n,a,r)}var Ss=No(rt),Cs=No(yt);function km(t,n,a){var r=L(t),s=r||ye(t)||Je(t);if(n=S(n,4),a==null){var d=t&&t.constructor;s?a=r?new d:[]:X(t)?a=de(d)?qe(zn(t)):{}:a={}}return(s?Tt:Xt)(t,function(f,u,h){return n(a,f,u,h)}),a}function Em(t,n){return t==null?!0:hi(t,n)}function Sm(t,n,a){return t==null?t:xo(t,n,_i(a))}function Cm(t,n,a,r){return r=typeof r=="function"?r:i,t==null?t:xo(t,n,_i(a),r)}function Qe(t){return t==null?[]:Za(t,rt(t))}function Bm(t){return t==null?[]:Za(t,yt(t))}function Am(t,n,a){return a===i&&(a=n,n=i),a!==i&&(a=Nt(a),a=a===a?a:0),n!==i&&(n=Nt(n),n=n===n?n:0),Be(Nt(t),n,a)}function $m(t,n,a){return n=fe(n),a===i?(a=n,n=0):a=fe(a),t=Nt(t),Pc(t,n,a)}function Lm(t,n,a){if(a&&typeof a!="boolean"&&vt(t,n,a)&&(n=a=i),a===i&&(typeof n=="boolean"?(a=n,n=i):typeof t=="boolean"&&(a=t,t=i)),t===i&&n===i?(t=0,n=1):(t=fe(t),n===i?(n=t,t=0):n=fe(n)),t>n){var r=t;t=n,n=r}if(a||t%1||n%1){var s=Xr();return ut(t+s*(n-t+df("1e-"+((s+"").length-1))),n)}return ci(t,n)}var Tm=Ze(function(t,n,a){return n=n.toLowerCase(),t+(a?Bs(n):n)});function Bs(t){return Ni(V(t).toLowerCase())}function As(t){return t=V(t),t&&t.replace(Rd,yf).replace(Qd,"")}function Rm(t,n,a){t=V(t),n=St(n);var r=t.length;a=a===i?r:Be(R(a),0,r);var s=a;return a-=n.length,a>=0&&t.slice(a,s)==n}function Om(t){return t=V(t),t&&pd.test(t)?t.replace(rr,If):t}function Mm(t){return t=V(t),t&&gd.test(t)?t.replace(Ra,"\\$&"):t}var Pm=Ze(function(t,n,a){return t+(a?"-":"")+n.toLowerCase()}),Dm=Ze(function(t,n,a){return t+(a?" ":"")+n.toLowerCase()}),Nm=To("toLowerCase");function Fm(t,n,a){t=V(t),n=R(n);var r=n?Ve(t):0;if(!n||r>=n)return t;var s=(n-r)/2;return oa(qn(s),a)+t+oa(Gn(s),a)}function Um(t,n,a){t=V(t),n=R(n);var r=n?Ve(t):0;return n&&r<n?t+oa(n-r,a):t}function Wm(t,n,a){t=V(t),n=R(n);var r=n?Ve(t):0;return n&&r<n?oa(n-r,a)+t:t}function Vm(t,n,a){return a||n==null?n=0:n&&(n=+n),Zf(V(t).replace(Oa,""),n||0)}function zm(t,n,a){return(a?vt(t,n,a):n===i)?n=1:n=R(n),ui(V(t),n)}function Km(){var t=arguments,n=V(t[0]);return t.length<3?n:n.replace(t[1],t[2])}var Hm=Ze(function(t,n,a){return t+(a?"_":"")+n.toLowerCase()});function Gm(t,n,a){return a&&typeof a!="number"&&vt(t,n,a)&&(n=a=i),a=a===i?Zt:a>>>0,a?(t=V(t),t&&(typeof n=="string"||n!=null&&!Mi(n))&&(n=St(n),!n&&We(t))?xe(Wt(t),0,a):t.split(n,a)):[]}var qm=Ze(function(t,n,a){return t+(a?" ":"")+Ni(n)});function Ym(t,n,a){return t=V(t),a=a==null?0:Be(R(a),0,t.length),n=St(n),t.slice(a,a+n.length)==n}function Zm(t,n,a){var r=l.templateSettings;a&&vt(t,n,a)&&(n=i),t=V(t),n=va({},n,r,Fo);var s=va({},n.imports,r.imports,Fo),d=rt(s),f=Za(s,d),u,h,v=0,g=n.interpolate||Ln,b="__p += '",y=Ja((n.escape||Ln).source+"|"+g.source+"|"+(g===or?Cd:Ln).source+"|"+(n.evaluate||Ln).source+"|$","g"),k="//# sourceURL="+(K.call(n,"sourceURL")?(n.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++af+"]")+`
`;t.replace(y,function(B,P,N,Bt,gt,At){return N||(N=Bt),b+=t.slice(v,At).replace(Od,kf),P&&(u=!0,b+=`' +
__e(`+P+`) +
'`),gt&&(h=!0,b+=`';
`+gt+`;
__p += '`),N&&(b+=`' +
((__t = (`+N+`)) == null ? '' : __t) +
'`),v=At+B.length,B}),b+=`';
`;var C=K.call(n,"variable")&&n.variable;if(!C)b=`with (obj) {
`+b+`
}
`;else if(Ed.test(C))throw new $(A);b=(h?b.replace(dd,""):b).replace(fd,"$1").replace(cd,"$1;"),b="function("+(C||"obj")+`) {
`+(C?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(u?", __e = _.escape":"")+(h?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+b+`return __p
}`;var O=Ls(function(){return U(d,k+"return "+b).apply(i,f)});if(O.source=b,Oi(O))throw O;return O}function Xm(t){return V(t).toLowerCase()}function Jm(t){return V(t).toUpperCase()}function Qm(t,n,a){if(t=V(t),t&&(a||n===i))return Fr(t);if(!t||!(n=St(n)))return t;var r=Wt(t),s=Wt(n),d=Ur(r,s),f=Wr(r,s)+1;return xe(r,d,f).join("")}function jm(t,n,a){if(t=V(t),t&&(a||n===i))return t.slice(0,zr(t)+1);if(!t||!(n=St(n)))return t;var r=Wt(t),s=Wr(r,Wt(n))+1;return xe(r,0,s).join("")}function tw(t,n,a){if(t=V(t),t&&(a||n===i))return t.replace(Oa,"");if(!t||!(n=St(n)))return t;var r=Wt(t),s=Ur(r,Wt(n));return xe(r,s).join("")}function ew(t,n){var a=ql,r=Yl;if(X(n)){var s="separator"in n?n.separator:s;a="length"in n?R(n.length):a,r="omission"in n?St(n.omission):r}t=V(t);var d=t.length;if(We(t)){var f=Wt(t);d=f.length}if(a>=d)return t;var u=a-Ve(r);if(u<1)return r;var h=f?xe(f,0,u).join(""):t.slice(0,u);if(s===i)return h+r;if(f&&(u+=h.length-u),Mi(s)){if(t.slice(u).search(s)){var v,g=h;for(s.global||(s=Ja(s.source,V(sr.exec(s))+"g")),s.lastIndex=0;v=s.exec(g);)var b=v.index;h=h.slice(0,b===i?u:b)}}else if(t.indexOf(St(s),u)!=u){var y=h.lastIndexOf(s);y>-1&&(h=h.slice(0,y))}return h+r}function nw(t){return t=V(t),t&&ud.test(t)?t.replace(ir,Lf):t}var aw=Ze(function(t,n,a){return t+(a?" ":"")+n.toUpperCase()}),Ni=To("toUpperCase");function $s(t,n,a){return t=V(t),n=a?i:n,n===i?Sf(t)?Of(t):_f(t):t.match(n)||[]}var Ls=M(function(t,n){try{return kt(t,i,n)}catch(a){return Oi(a)?a:new $(a)}}),iw=se(function(t,n){return Tt(n,function(a){a=Qt(a),re(t,a,Ti(t[a],t))}),t});function rw(t){var n=t==null?0:t.length,a=S();return t=n?Z(t,function(r){if(typeof r[1]!="function")throw new Rt(E);return[a(r[0]),r[1]]}):[],M(function(r){for(var s=-1;++s<n;){var d=t[s];if(kt(d[0],this,r))return kt(d[1],this,r)}})}function ow(t){return Lc(Mt(t,Q))}function Fi(t){return function(){return t}}function sw(t,n){return t==null||t!==t?n:t}var lw=Oo(),dw=Oo(!0);function It(t){return t}function Ui(t){return fo(typeof t=="function"?t:Mt(t,Q))}function fw(t){return uo(Mt(t,Q))}function cw(t,n){return po(t,Mt(n,Q))}var uw=M(function(t,n){return function(a){return _n(a,t,n)}}),pw=M(function(t,n){return function(a){return _n(t,a,n)}});function Wi(t,n,a){var r=rt(n),s=jn(n,r);a==null&&!(X(n)&&(s.length||!r.length))&&(a=n,n=t,t=this,s=jn(n,rt(n)));var d=!(X(a)&&"chain"in a)||!!a.chain,f=de(t);return Tt(s,function(u){var h=n[u];t[u]=h,f&&(t.prototype[u]=function(){var v=this.__chain__;if(d||v){var g=t(this.__wrapped__),b=g.__actions__=bt(this.__actions__);return b.push({func:h,args:arguments,thisArg:t}),g.__chain__=v,g}return h.apply(t,me([this.value()],arguments))})}),t}function hw(){return dt._===this&&(dt._=Uf),this}function Vi(){}function mw(t){return t=R(t),M(function(n){return ho(n,t)})}var ww=gi(Z),_w=gi(Or),vw=gi(Ka);function Ts(t){return Si(t)?Ha(Qt(t)):Yc(t)}function gw(t){return function(n){return t==null?i:Ae(t,n)}}var bw=Po(),xw=Po(!0);function zi(){return[]}function Ki(){return!1}function yw(){return{}}function Iw(){return""}function kw(){return!0}function Ew(t,n){if(t=R(t),t<1||t>pe)return[];var a=Zt,r=ut(t,Zt);n=S(n),t-=Zt;for(var s=Ya(r,n);++a<t;)n(a);return s}function Sw(t){return L(t)?Z(t,Qt):Ct(t)?[t]:bt(Qo(V(t)))}function Cw(t){var n=++Nf;return V(t)+n}var Bw=ra(function(t,n){return t+n},0),Aw=bi("ceil"),$w=ra(function(t,n){return t/n},1),Lw=bi("floor");function Tw(t){return t&&t.length?Qn(t,It,ri):i}function Rw(t,n){return t&&t.length?Qn(t,S(n,2),ri):i}function Ow(t){return Dr(t,It)}function Mw(t,n){return Dr(t,S(n,2))}function Pw(t){return t&&t.length?Qn(t,It,di):i}function Dw(t,n){return t&&t.length?Qn(t,S(n,2),di):i}var Nw=ra(function(t,n){return t*n},1),Fw=bi("round"),Uw=ra(function(t,n){return t-n},0);function Ww(t){return t&&t.length?qa(t,It):0}function Vw(t,n){return t&&t.length?qa(t,S(n,2)):0}return l.after=fh,l.ary=ds,l.assign=Jh,l.assignIn=Is,l.assignInWith=va,l.assignWith=Qh,l.at=jh,l.before=fs,l.bind=Ti,l.bindAll=iw,l.bindKey=cs,l.castArray=yh,l.chain=os,l.chunk=Lu,l.compact=Tu,l.concat=Ru,l.cond=rw,l.conforms=ow,l.constant=Fi,l.countBy=Wp,l.create=tm,l.curry=us,l.curryRight=ps,l.debounce=hs,l.defaults=em,l.defaultsDeep=nm,l.defer=ch,l.delay=uh,l.difference=Ou,l.differenceBy=Mu,l.differenceWith=Pu,l.drop=Du,l.dropRight=Nu,l.dropRightWhile=Fu,l.dropWhile=Uu,l.fill=Wu,l.filter=zp,l.flatMap=Gp,l.flatMapDeep=qp,l.flatMapDepth=Yp,l.flatten=ns,l.flattenDeep=Vu,l.flattenDepth=zu,l.flip=ph,l.flow=lw,l.flowRight=dw,l.fromPairs=Ku,l.functions=dm,l.functionsIn=fm,l.groupBy=Zp,l.initial=Gu,l.intersection=qu,l.intersectionBy=Yu,l.intersectionWith=Zu,l.invert=um,l.invertBy=pm,l.invokeMap=Jp,l.iteratee=Ui,l.keyBy=Qp,l.keys=rt,l.keysIn=yt,l.map=ua,l.mapKeys=mm,l.mapValues=wm,l.matches=fw,l.matchesProperty=cw,l.memoize=ha,l.merge=_m,l.mergeWith=ks,l.method=uw,l.methodOf=pw,l.mixin=Wi,l.negate=ma,l.nthArg=mw,l.omit=vm,l.omitBy=gm,l.once=hh,l.orderBy=jp,l.over=ww,l.overArgs=mh,l.overEvery=_w,l.overSome=vw,l.partial=Ri,l.partialRight=ms,l.partition=th,l.pick=bm,l.pickBy=Es,l.property=Ts,l.propertyOf=gw,l.pull=ju,l.pullAll=is,l.pullAllBy=tp,l.pullAllWith=ep,l.pullAt=np,l.range=bw,l.rangeRight=xw,l.rearg=wh,l.reject=ah,l.remove=ap,l.rest=_h,l.reverse=$i,l.sampleSize=rh,l.set=ym,l.setWith=Im,l.shuffle=oh,l.slice=ip,l.sortBy=dh,l.sortedUniq=cp,l.sortedUniqBy=up,l.split=Gm,l.spread=vh,l.tail=pp,l.take=hp,l.takeRight=mp,l.takeRightWhile=wp,l.takeWhile=_p,l.tap=Tp,l.throttle=gh,l.thru=ca,l.toArray=bs,l.toPairs=Ss,l.toPairsIn=Cs,l.toPath=Sw,l.toPlainObject=ys,l.transform=km,l.unary=bh,l.union=vp,l.unionBy=gp,l.unionWith=bp,l.uniq=xp,l.uniqBy=yp,l.uniqWith=Ip,l.unset=Em,l.unzip=Li,l.unzipWith=rs,l.update=Sm,l.updateWith=Cm,l.values=Qe,l.valuesIn=Bm,l.without=kp,l.words=$s,l.wrap=xh,l.xor=Ep,l.xorBy=Sp,l.xorWith=Cp,l.zip=Bp,l.zipObject=Ap,l.zipObjectDeep=$p,l.zipWith=Lp,l.entries=Ss,l.entriesIn=Cs,l.extend=Is,l.extendWith=va,Wi(l,l),l.add=Bw,l.attempt=Ls,l.camelCase=Tm,l.capitalize=Bs,l.ceil=Aw,l.clamp=Am,l.clone=Ih,l.cloneDeep=Eh,l.cloneDeepWith=Sh,l.cloneWith=kh,l.conformsTo=Ch,l.deburr=As,l.defaultTo=sw,l.divide=$w,l.endsWith=Rm,l.eq=zt,l.escape=Om,l.escapeRegExp=Mm,l.every=Vp,l.find=Kp,l.findIndex=ts,l.findKey=am,l.findLast=Hp,l.findLastIndex=es,l.findLastKey=im,l.floor=Lw,l.forEach=ss,l.forEachRight=ls,l.forIn=rm,l.forInRight=om,l.forOwn=sm,l.forOwnRight=lm,l.get=Pi,l.gt=Bh,l.gte=Ah,l.has=cm,l.hasIn=Di,l.head=as,l.identity=It,l.includes=Xp,l.indexOf=Hu,l.inRange=$m,l.invoke=hm,l.isArguments=Te,l.isArray=L,l.isArrayBuffer=$h,l.isArrayLike=xt,l.isArrayLikeObject=tt,l.isBoolean=Lh,l.isBuffer=ye,l.isDate=Th,l.isElement=Rh,l.isEmpty=Oh,l.isEqual=Mh,l.isEqualWith=Ph,l.isError=Oi,l.isFinite=Dh,l.isFunction=de,l.isInteger=ws,l.isLength=wa,l.isMap=_s,l.isMatch=Nh,l.isMatchWith=Fh,l.isNaN=Uh,l.isNative=Wh,l.isNil=zh,l.isNull=Vh,l.isNumber=vs,l.isObject=X,l.isObjectLike=j,l.isPlainObject=In,l.isRegExp=Mi,l.isSafeInteger=Kh,l.isSet=gs,l.isString=_a,l.isSymbol=Ct,l.isTypedArray=Je,l.isUndefined=Hh,l.isWeakMap=Gh,l.isWeakSet=qh,l.join=Xu,l.kebabCase=Pm,l.last=Dt,l.lastIndexOf=Ju,l.lowerCase=Dm,l.lowerFirst=Nm,l.lt=Yh,l.lte=Zh,l.max=Tw,l.maxBy=Rw,l.mean=Ow,l.meanBy=Mw,l.min=Pw,l.minBy=Dw,l.stubArray=zi,l.stubFalse=Ki,l.stubObject=yw,l.stubString=Iw,l.stubTrue=kw,l.multiply=Nw,l.nth=Qu,l.noConflict=hw,l.noop=Vi,l.now=pa,l.pad=Fm,l.padEnd=Um,l.padStart=Wm,l.parseInt=Vm,l.random=Lm,l.reduce=eh,l.reduceRight=nh,l.repeat=zm,l.replace=Km,l.result=xm,l.round=Fw,l.runInContext=p,l.sample=ih,l.size=sh,l.snakeCase=Hm,l.some=lh,l.sortedIndex=rp,l.sortedIndexBy=op,l.sortedIndexOf=sp,l.sortedLastIndex=lp,l.sortedLastIndexBy=dp,l.sortedLastIndexOf=fp,l.startCase=qm,l.startsWith=Ym,l.subtract=Uw,l.sum=Ww,l.sumBy=Vw,l.template=Zm,l.times=Ew,l.toFinite=fe,l.toInteger=R,l.toLength=xs,l.toLower=Xm,l.toNumber=Nt,l.toSafeInteger=Xh,l.toString=V,l.toUpper=Jm,l.trim=Qm,l.trimEnd=jm,l.trimStart=tw,l.truncate=ew,l.unescape=nw,l.uniqueId=Cw,l.upperCase=aw,l.upperFirst=Ni,l.each=ss,l.eachRight=ls,l.first=as,Wi(l,function(){var t={};return Xt(l,function(n,a){K.call(l.prototype,a)||(t[a]=n)}),t}(),{chain:!1}),l.VERSION=c,Tt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){l[t].placeholder=l}),Tt(["drop","take"],function(t,n){D.prototype[t]=function(a){a=a===i?1:it(R(a),0);var r=this.__filtered__&&!n?new D(this):this.clone();return r.__filtered__?r.__takeCount__=ut(a,r.__takeCount__):r.__views__.push({size:ut(a,Zt),type:t+(r.__dir__<0?"Right":"")}),r},D.prototype[t+"Right"]=function(a){return this.reverse()[t](a).reverse()}}),Tt(["filter","map","takeWhile"],function(t,n){var a=n+1,r=a==er||a==Ql;D.prototype[t]=function(s){var d=this.clone();return d.__iteratees__.push({iteratee:S(s,3),type:a}),d.__filtered__=d.__filtered__||r,d}}),Tt(["head","last"],function(t,n){var a="take"+(n?"Right":"");D.prototype[t]=function(){return this[a](1).value()[0]}}),Tt(["initial","tail"],function(t,n){var a="drop"+(n?"":"Right");D.prototype[t]=function(){return this.__filtered__?new D(this):this[a](1)}}),D.prototype.compact=function(){return this.filter(It)},D.prototype.find=function(t){return this.filter(t).head()},D.prototype.findLast=function(t){return this.reverse().find(t)},D.prototype.invokeMap=M(function(t,n){return typeof t=="function"?new D(this):this.map(function(a){return _n(a,t,n)})}),D.prototype.reject=function(t){return this.filter(ma(S(t)))},D.prototype.slice=function(t,n){t=R(t);var a=this;return a.__filtered__&&(t>0||n<0)?new D(a):(t<0?a=a.takeRight(-t):t&&(a=a.drop(t)),n!==i&&(n=R(n),a=n<0?a.dropRight(-n):a.take(n-t)),a)},D.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},D.prototype.toArray=function(){return this.take(Zt)},Xt(D.prototype,function(t,n){var a=/^(?:filter|find|map|reject)|While$/.test(n),r=/^(?:head|last)$/.test(n),s=l[r?"take"+(n=="last"?"Right":""):n],d=r||/^find/.test(n);!s||(l.prototype[n]=function(){var f=this.__wrapped__,u=r?[1]:arguments,h=f instanceof D,v=u[0],g=h||L(f),b=function(P){var N=s.apply(l,me([P],u));return r&&y?N[0]:N};g&&a&&typeof v=="function"&&v.length!=1&&(h=g=!1);var y=this.__chain__,k=!!this.__actions__.length,C=d&&!y,O=h&&!k;if(!d&&g){f=O?f:new D(this);var B=t.apply(f,u);return B.__actions__.push({func:ca,args:[b],thisArg:i}),new Ot(B,y)}return C&&O?t.apply(this,u):(B=this.thru(b),C?r?B.value()[0]:B.value():B)})}),Tt(["pop","push","shift","sort","splice","unshift"],function(t){var n=Dn[t],a=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);l.prototype[t]=function(){var s=arguments;if(r&&!this.__chain__){var d=this.value();return n.apply(L(d)?d:[],s)}return this[a](function(f){return n.apply(L(f)?f:[],s)})}}),Xt(D.prototype,function(t,n){var a=l[n];if(a){var r=a.name+"";K.call(Ge,r)||(Ge[r]=[]),Ge[r].push({name:n,func:a})}}),Ge[ia(i,te).name]=[{name:"wrapper",func:i}],D.prototype.clone=nc,D.prototype.reverse=ac,D.prototype.value=ic,l.prototype.at=Rp,l.prototype.chain=Op,l.prototype.commit=Mp,l.prototype.next=Pp,l.prototype.plant=Np,l.prototype.reverse=Fp,l.prototype.toJSON=l.prototype.valueOf=l.prototype.value=Up,l.prototype.first=l.prototype.head,fn&&(l.prototype[fn]=Dp),l},ze=Mf();ke?((ke.exports=ze)._=ze,Ua._=ze):dt._=ze}).call(kn)})(Yi,Yi.exports);var ba=Yi.exports;F.use(s_);F.use(l_);Gt.registerModule("form",d_);Gt.registerModule("publication",cb);Gt.registerModule("blocks",vb);Gt.registerModule("language",g_);Gt.registerModule("revision",Ib);Gt.registerModule("browser",__);Gt.registerModule("repeaters",Bb);Gt.registerModule("parents",Tb);Gt.registerModule("attributes",h_);Gt.registerModule("permissions",Ob);F.component("a17-fieldset",m_);F.component("a17-publisher",e0);F.component("a17-title-editor",K_);F.component("a17-blocks",v0);F.component("a17-page-nav",s0);F.component("a17-langswitcher",f_);F.component("a17-sticky-nav",N_);F.component("a17-spinner",Dl);F.component("a17-repeater",$0);F.component("a17-browser",v_);F.component("a17-connectorfield",q0);F.component("a17-locationfield",N0);F.component("a17-overlay",eg);F.component("a17-previewer",pg);F.component("a17-editor",eb);F.component("a17-modal-add",sb);const Mb=(e,o)=>F.options.components[e]?!1:F.component(e,o);typeof window.TWILL.TWILL_BLOCKS_COMPONENTS!="undefined"&&window.TWILL.TWILL_BLOCKS_COMPONENTS.map(e=>Mb(e,{template:"#"+e,mixins:[T_]}));window.TWILL.vm=window.vm=new F({store:Gt,el:"#app",mixins:[w_,Kl,Ul],data:function(){return{unSubscribe:function(){return null},isFormUpdated:!1}},computed:{...wt({loading:e=>e.form.loading,editor:e=>e.blocks.editor,isCustom:e=>e.form.isCustom}),...jt(["getSaveType","isEnabledSubmitOption"])},methods:{submitForm:function(){if(this.isSubmitPrevented){this.shouldRetrySubmitWhenAllowed=!0;return}this.loading||(this.isFormUpdated=!1,this.$store.commit(nt.UPDATE_FORM_LOADING,!0),this.unSubscribe(),this.$nextTick(()=>{const e=this.getSaveType||document.activeElement.name;this.isEnabledSubmitOption(e)?this.$store.dispatch(mt.SAVE_FORM,e).then(()=>{this.mutationsSubscribe()}):(this.$store.commit(nt.UPDATE_FORM_LOADING,!1),this.mutationsSubscribe())}))},confirmExit:function(e){if(!this.isFormUpdated||this.isCustom)window.event!==void 0?window.event.cancelBubble=!0:e.cancelBubble=!0;else return"message"},mutationsSubscribe:function(){this.unSubscribe=this.$store.subscribe((e,o)=>{L_.includes(e.type)&&(this.isFormUpdated=!0,this.unSubscribe())})},watchForFormUpdates(e,o){const i=e==="form"&&(o==="fields"||o==="modalFields"),c=this.sortObjectArraysDeep(ba.cloneDeep(this.$store.state[e][o]),i);this.$store.watch(m=>m[e][o],m=>{const x=this.sortObjectArraysDeep(ba.cloneDeep(m),i);this.isFormUpdated=!ba.isEqual(c,x),this.$store.commit(ht.UPDATE_HAS_UNSAVED_CHANGES,this.isFormUpdated)},{deep:!0})},sortArrayByFirstKey(e){return ba.sortBy(e,o=>{if(typeof o=="object"){const i=Object.keys(o)[0];return o[i]}return o})},sortObjectArraysDeep(e,o=!1){return Array.isArray(e)&&o?e=this.sortArrayByFirstKey(e):Object.keys(e).forEach(i=>{Array.isArray(e[i])?o&&(e[i]=this.sortArrayByFirstKey(e[i])):typeof e[i]=="object"&&(e[i]=this.sortObjectArraysDeep(e[i]))}),e}},mounted:function(){window.onbeforeunload=this.confirmExit,this.$nextTick(()=>{this.watchForFormUpdates("mediaLibrary","selected"),this.watchForFormUpdates("form","fields"),this.watchForFormUpdates("form","modalFields"),this.watchForFormUpdates("blocks","blocks"),this.watchForFormUpdates("browser","selected"),this.watchForFormUpdates("repeaters","repeaters")})},beforeDestroy:function(){this.unSubscribe()},created:function(){c_()}});document.addEventListener("DOMContentLoaded",u_);
